{% extends 'base.html' %}
{% load static %}
{% block content %}

<style>
  @media screen and (max-width: 600px) {
    .col-25, .col-75, input[type=submit] {
      width: 100%;
      margin-top: 0;
    }
    input[type=text], select, textarea {
    width: 100%;

  }
  }

    
    .form-check {
      margin-bottom: 10px;
    }
    
    /* style submit button */
    button[type="submit"] {
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    
    button[type="submit"]:hover {
      background-color: #0069d9;
    }
    /* Style for the highlighted account type options */
  option.highlight-account-type {
    background-color: #f3f3f3; /* Example background color */
    color: #666; /* Example text color */
    font-weight: bold; /* Example font weight */
    /* Add any other styles you want to customize the look of the highlighted account type options */
  }
  
  /* Additional style for hovering over the highlighted account type options (optional) */
  option.highlight-account-type:hover {
    background-color: #f5f5f5; /* Example hover background color */
    /* Add any other styles you want for the hover state */
  }
  .highlight-account-type {
    text-align: left;
    padding-left: 10px;
  }
  .modal{
    z-index: 9999;
    overflow: scroll;
  }
  
  </style>
  <div style="margin-top: 6rem; margin-left: 8rem;">
    <h2>Edit Expense</h2>
    <div style="height: 1500px; ">

        <form action="{% if expense %}{% url 'edit_expense' expense.id %}{% else %}{% url 'add_expense' %}{% endif %}" method="post" id="expenseForm">
            {% csrf_token %}

            <!-- Profile Name -->
            <div class="form-group row mt-4">
                <label for="profile_name" class="col-sm-3 col-form-label">Profile Name</label>
                <div class="col-sm-6">
                    <input type="text" class="form-control bg-white text-dark" name="profile_name" value="{{ expense.profile_name }}" required>
                    <div class="invalid-feedback">Please fill out this field.</div>
                </div>
            </div>
          
          
              
          
            <!-- Repeat Every -->
            <div class="form-group row mt-4">
                <label for="repeat_every" class="col-sm-3 col-form-label">Repeat Every</label>
                <div class="col-sm-6">
                  
                  <select class="form-control text-dark" id="repeat_select" name="repeat_every">
                    {% if  expense.repeatevery%}
                    <option class="text-dark" value="{{ expense.repeatevery.id }}"  selected> {{ expense.repeatevery.Terms }}</option>
                    {% endif %}
                    {% for repeat_item in repeat_list %}
                    
                    <option class="text-dark" value="{{ repeat_item.id }}" {% if repeat_item.id == repeat_id.id %} {% endif %}> {{ repeat_item.Terms }}</option>
                  
                    {% endfor %}
                
                </select>
                  </div>
                  <div class="input-group-append">
                    <button class="btn btn-primary" type="button" data-toggle="modal" id="openModal" data-target="#repeatevery" class="text-capitalize" style="width:100px;height:38px;margin-left:-123px;">Add</button>
                  </div>
                </div>

            <!-- Start Date -->
            <div class="form-group row mt-4">
                <label for="start_date" class="col-sm-3 col-form-label">Start Date</label>
                <div class="col-sm-6">
                    <input type="date" id="start_date" value="{{ expense.start_date|date:'Y-m-d' }}" name="start_date"
                        class="form-control bg-white text-dark">
                </div>
            </div>

            
            <!-- Expense Account -->
            <div class="form-group row mt-4">
                <label for="expense_account" class="col-sm-3 col-form-label">Expense Account</label>
                <div class="col-sm-6">
                    <div class="input-group">
                        <select class="form-control bg-white text-dark" id="expense_account" name="expense_account">
                            {% for account_type in items %}
                            <optgroup label="{{ account_type }}">
                                {% for account in accounts %}
                                {% if account.accountType == account_type %}
                                
                                <option value="{{ account.id }}"    {% if account.id == selected_account.id%} selected   {% endif %}> {{ account.accountName }}</option>
                              
                                {% endif %}
                                {% endfor %}
                            </optgroup>
                            {% endfor %}
                        </select>
                        <div class="input-group-append">
                            <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#newAccountModal"
                                class="text-capitalize" style="height: 38px;">New Account</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Expense Type -->
            <div class="form-group row mt-4">
                <label class="col-sm-3 col-form-label" style="margin-top: 8px;">Expense Type</label>
                <div class="col-sm-6" style="display: flex;">
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="expense_type" id="expense_type_goods" value="goods"
                            {% if expense.expense_type == 'goods' %} checked {% endif %} required>
                        <label class="form-check-label" for="expense_type_goods" style="margin-left: 10px;">Goods</label>
                    </div>
                    <div class="form-check" style="margin-left: 30px;">
                        <input class="form-check-input" type="radio" name="expense_type" id="expense_type_services" value="services"
                            {% if expense.expense_type == 'services' %} checked {% endif %} style="margin-left: 30px;" required>
                        <label class="form-check-label" for="expense_type_services" style="margin-left: 30px;">Service</label>
                    </div>
                    <div class="form-group" id="goods-bottom" style="display: none;">
                        <div style="margin-left: -300px;"><label for="goods-label" style="margin-top: 74px;margin-left: -176px;">HSN</label></div>
                        <input type="text" class="form-control bg-white text-dark" id="goods-label" name="goods_label"
                            value="{{expense.hsn}}" oninput="validateHSN(this)" style="margin-left: -13.5rem;width: 545px;">
                        <small id="hsn-error" class="text-danger"></small>
                    </div>
                    <div class="form-group" id="services-bottom" style="display: none;">
                        <div style="margin-left: -300px;"><label for="services-label"
                                style="margin-top: 74px;margin-left: -187px;">SAC</label></div>
                        <input type="text" class="form-control bg-white text-dark" id="services-label" name="services_label"
                            value="{{expense.sac}}" oninput="validateSAC(this)" style="margin-left: -13.5rem;width: 551px;">
                        <small id="sac-error" class="text-danger"></small>
                    </div>
                </div>
            </div>

        <div class="form-group row mt-4">
          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Amount</label></div>
          <div class="col-sm-12 col-md-6 col-lg-6">
            <div class="input-group-prepend" style="margin-left:-151px;">
              <select class="form-control bg-white text-dark" id="currency" name="currency"   style="width:50px; margin-left:153px;color:white;margin-top:10px;">
                <option value="INR" >INR</option>
              </select>
            </div>
            <option value="INR" ></option><input type="text"  value="{{ expense.amount }}"  id="amount" name="amount" class="form-control bg-white text-dark" style="background-color:#2c2e33;color:black;margin-top:-57px;margin-left: 48px;width: 500px;">
          </div>
        </div>
        <div class="form-group row mt-4">
          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Paid Through</label></div>
          <div class="col-sm-12 col-md-6 col-lg-6">
            <select name="paidthrough" id="paidthrough" class="form-control bg-white text-dark" style="width:550px;">
                
                <option value="{{expense.paidthrough}}">{{expense.paidthrough}}</option>
                <option value="Cash" >Cash</option>
                <option value="Cheque" >Cheque</option>
               
                <option value="UPI">UPI</option>
                {% for b in bank %}
                <option value="b.name">{{b.name}}</option>
                  {% endfor %}

               
            </select>
        </div>
        </div> 
  
        <div class="form-group row mt-4" id="chequeField" style="display: none; ">
          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Cheque ID</label></div>
          <div class="col-sm-12 col-md-6 col-lg-6">
              <input type="text" name="chequeId" id="chequeId" class="form-control bg-white text-dark" style="width: 550px;margin-left:280px;margin-top:-35px;" value="{{expense.cheque_id}}">
          </div>
      </div>
      
      <div class="form-group row mt-4" id="upiField" style="display: none;">
          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>UPI Number</label></div>
          <div class="col-sm-12 col-md-6 col-lg-6">
              <input type="text" name="upiNumber" id="upiNumber" class="form-control bg-white text-dark" style="width: 550px;margin-left:280px;margin-top:-35px;" value="{{expense.upi_number}}">
          </div>
      </div>
      
      <div class="form-group row mt-4" id="bankField" style="display: none;">
          <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Bank Account</label></div>
          <div class="col-sm-12 col-md-6 col-lg-6">
              <input type="text" name="bankAccount" id="bankAccount" class="form-control bg-white text-dark" style="width: 550px;margin-left:280px;margin-top:-35px;" value="{{expense.bank_account}}">
          </div>
      </div>
      
  
        <div class="form-group row">
          <label for="vendorSelect" class="col-sm-3 col-form-label">Vendor</label>
          <div class="col-sm-6">
              <div class="input-group">
                  <select name="vendor" id="vendorSelect" class="form-control bg-white text-dark">
                      <option value=""></option>
                      {% for vendor in vendors %}
                          <option value="{{ vendor.id }}" {% if vendor.id == expense.vendor_id %}selected{% endif %} data-gst="{{ vendor.gst_treatment }}">{{ vendor.first_name }} {{ vendor.last_name }}</option>
                      {% endfor %}
                  </select>
                  <div class="input-group-append">
                      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#newvendor" style="height: 38px;">Add new vendor</button>
                  </div>
              </div>
          </div>
      </div>
        <!-- Vendor EmailId -->
        <div class="form-group row">
          <label for="vemail" class="col-sm-3 col-form-label">Vendor EmailId</label>
          <div class="col-sm-6">
              <input type="text" class="form-control bg-white text-dark" id="vemail" name="vmail" value="{{ expense.vendormail }}">
          </div>
      </div>

        <!-- GST Treatment -->
        <div class="form-group row">
          <label for="gst_trt_inp" class="col-sm-3 col-form-label">GST Treatment</label>
          <div class="col-sm-6">
              <input type="text" name="gst_trt_inp" id="gst_trt_inp" class="form-control bg-white text-dark" value="{{ expense.vendor.gst_treatment }}">
          </div>
      </div>

      <!-- Vendor GSTIN -->
      <div class="form-group row" id="textboxContainer">
          <label for="gst_num_inp" class="col-sm-3 col-form-label">Vendor GSTIN</label>
          <div class="col-sm-6">
              <input type="text" id="gst_num_inp" class="form-control bg-white text-dark" value="{{ expense.gst }}" name="gstin_inp" placeholder="Enter additional information" style="width:546px;color:black;margin-top:-30px;margin-left:280px;">
          </div>
      </div>

    

      <div class="form-group row">
        <label for="destination" class="col-sm-3 col-form-label">Vendor Destination of Supply</label>
        <div class="col-sm-6">
            <select name="destination" id="destination" class="form-control bg-white text-dark">
            {% comment %} <select name="destination" id="destination" class="form-control bg-white text-dark" style="margin-left: 6px; width: 547px;color:black;"> {% endcomment %}
              <option value="{{expense.vendor_destination}}">{{expense.vendor_destination}}</option>
              <option value="[AN]-Andaman And Nicobar Islands" {% if expense.vendor_destination == "[AN]-Andaman And Nicobar Islands" %}selected{% endif %}>[AN]-Andaman And Nicobar Islands</option>
              <option value="[AD]-Andhra Pradesh" {% if expense.vendor_destination == "[AD]-Andhra Pradesh" %}selected{% endif %}>[AD]-Andhra Pradesh</option>
              <option value="[AR]-Arunachal Pradesh" {% if expense.vendor_destination == "[AR]-Arunachal Pradesh" %}selected{% endif %}>[AR]-Arunachal Pradesh</option>
              <option value="[AS]-Assam" {% if expense.vendor_destination == "[AS]-Assam" %}selected{% endif %}>[AS]-Assam</option>
              <option value="[BR]-Bihar" {% if expense.vendor_destination == "[BR]-Bihar" %}selected{% endif %}>[BR]-Bihar</option>
              <option value="[CH]-	Chandhigarh" {% if expense.vendor_destination == "[CH]-	Chandhigarh" %}selected{% endif %}>[CH]-	Chandhigarh</option>
              <option value="[CG]-Chattisgarh" {% if expense.vendor_destination == "[CG]-Chattisgarh" %}selected{% endif %}>[CG]-Chattisgarh</option>
              <option value="[DD]-Daman Diu" {% if expense.vendor_destination == "[DD]-Daman Diu" %}selected{% endif %}>[DD]-Daman Diu</option>
              <option value="[DL]-	Delhi" {% if expense.vendor_destination == "[DL]-	Delhi" %}selected{% endif %}>[DL]-	Delhi</option>
              <option value="[GA]-Goa" {% if expense.vendor_destination == "[GA]-Goa" %}selected{% endif %}>[GA]-Goa</option>
              <option value="[GJ]-Gujarat" {% if expense.vendor_destination == "[GJ]-Gujarat" %}selected{% endif %}>[GJ]-Gujarat</option>
              <option value="[HR]-Haryana" {% if expense.vendor_destination == "[HR]-Haryana" %}selected{% endif %}>[HR]-Haryana</option>
              <option value="[HP]-Himachal Pradesh" {% if expense.vendor_destination == "[HP]-Himachal Pradesh" %}selected{% endif %}>[HP]-Himachal Pradesh</option>
              <option value="[JK]-Jammu And Kashmir" {% if expense.vendor_destination == "[JK]-Jammu And Kashmir" %}selected{% endif %}>[JK]-Jammu And Kashmir</option>
              <option value="[JH]-Jharkand" {% if expense.vendor_destination == "[JH]-Jharkand" %}selected{% endif %}>[JH]-Jharkand</option>
              <option value="[KA]-Karnataka" {% if expense.vendor_destination == "[KA]-Karnataka" %}selected{% endif %}>[KA]-Karnataka</option>
              <option value="[KL]-Kerala" {% if expense.vendor_destination == "[KL]-Kerala" %}selected{% endif %}>[KL]-Kerala</option>
              <option value="[LA]-Ladakh" {% if expense.vendor_destination == "[LA]-Ladakh" %}selected{% endif %}>[LA]-Ladakh</option>
              <option value="[LD]-Lakshadweep" {% if expense.vendor_destination == "[LD]-Lakshadweep" %}selected{% endif %}>[LD]-Lakshadweep</option>
              <option value="[MP]-Madhyapradesh" {% if expense.vendor_destination == "[MP]-Madhyapradesh" %}selected{% endif %}>[MP]-Madhyapradesh</option>
              <option value="[MH]-Maharashtra" {% if expense.vendor_destination == "[MH]-Maharashtra" %}selected{% endif %}>[MH]-Maharashtra</option>
              <option value="[MN]-Manipur" {% if expense.vendor_destination == "[MN]-Manipur" %}selected{% endif %}>[MN]-Manipur</option>
              <option value="[ML]-Meghalaya" {% if expense.vendor_destination == "[ML]-Meghalaya" %}selected{% endif %}>[ML]-Meghalaya</option>
              <option value="[MZ]-Mizoram" {% if expense.vendor_destination == "[MZ]-Mizoram" %}selected{% endif %}>[MZ]-Mizoram</option>
              <option value="[NL]-Nagaland" {% if expense.vendor_destination == "[NL]-Nagaland" %}selected{% endif %}>[NL]-Nagaland</option>
              <option value="[OD]-Odisha" {% if expense.vendor_destination == "[OD]-Odisha" %}selected{% endif %}>[OD]-Odisha</option>
              <option value="[PY]-Puducherry" {% if expense.vendor_destination == "[PY]-Puducherry" %}selected{% endif %}>[PY]-Puducherry</option>
              <option value="[PB]-Punjab" {% if expense.vendor_destination == "[PB]-Punjab" %}selected{% endif %}>[PB]-Punjab</option>
              <option value="[RL]-Rajasthan" {% if expense.vendor_destination == "[RL]-Rajasthan" %}selected{% endif %}>[RL]-Rajasthan</option>
              <option value="[SK]-Sikkim" {% if expense.vendor_destination == "[SK]-Sikkim" %}selected{% endif %}>[SK]-Sikkim</option>
              <option value="[TN]-Tamilnadu" {% if expense.vendor_destination == "[TN]-Tamilnadu" %}selected{% endif %}>[TN]-Tamilnadu</option>
              <option value="[TS]-Telenghana" {% if expense.vendor_destination == "[TS]-Telenghana" %}selected{% endif %}>[TS]-Telenghana</option>
              <option value="[TR]-Tripura" {% if expense.vendor_destination == "[TR]-Tripura" %}selected{% endif %}>[TR]-Tripura</option>
              <option value="[UP]-Uttar Pradesh" {% if expense.vendor_destination == "[UP]-Uttar Pradesh" %}selected{% endif %}>[UP]-Uttar Pradesh</option>
              <option value="[UK]-Utharakhand" {% if expense.vendor_destination == "[UK]-Utharakhand" %}selected{% endif %}>[UK]-Utharakhand</option>
              <option value="[WB]-West Bengal" {% if expense.vendor_destination == "[WB]-West Bengal" %}selected{% endif %}>[WB]-West Bengal</option>
              <option value="[OT]-Other Territory" {% if expense.vendor_destination == "[OT]-Other Territory" %}selected{% endif %}>[OT]-Other Territory</option>
          </select>
            </select>
      </div>
    </div>
                <!-- Customer Name -->
                <div class="form-group row">
                  <label for="customer-list" class="col-sm-3 col-form-label">Customer Name</label>
                  <div class="col-sm-6">
                      <div class="input-group">
                          <input type="hidden" value="{{ expense.customer.id }}" id="hid">
                          <select name="customername" id="customer-list" class="form-control bg-white text-dark">
                              {% for c in customers %}
                                  <option value="{{ c.id }}" {% if c.id == expense.customer.id %}selected{% endif %}>{{ c.customerName }}</option>
                              {% endfor %}
                          </select>
                          <div class="input-group-append">
                              <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#newcustomer" style="height:38px;">Add new customer</button>
                          </div>
                      </div>
                  </div>
              </div>
      
              <!-- Customer EmailId -->
              <div class="form-group row">
                  <label for="email" class="col-sm-3 col-form-label">Customer EmailId</label>
                  <div class="col-sm-6">
                      <input type="text" class="form-control bg-white text-dark" id="email" name="mail" value="{{ expense.customeremail }}">
                  </div>
              </div>
              <div class="form-group row mt-4"  style="display:block;">
                <label class="col-sm-3 col-form-label">Customer GST Treatment</label>
                <div class="col-sm-6">
                  <input type="text" name="cu_gst_trt" id="cust_gst_tr" class="form-control  bg-white text-dark" style=" width: 555px;color:black;margin-left:278px;margin-top:-25px;" value="{{ expense.cust_gsttreatment }}">
                </div>
              </div>
              <div class="form-group row">
                <label for="destination" class="col-sm-3 col-form-label">Customer Destination of Supply</label>
                <div class="col-sm-6">
                    <select name="c_destination" id="c_destination" class="form-control bg-white text-dark">
                    {% comment %} <select name="destination" id="destination" class="form-control bg-white text-dark" style="margin-left: 6px; width: 547px;color:black;"> {% endcomment %}
                      <option value="{{expense.cust_placeofsupply}}">{{expense.cust_placeofsupply}}</option>
                      <option value="[AN]-Andaman And Nicobar Islands" {% if expense.cust_placeofsupply == "[AN]-Andaman And Nicobar Islands" %}selected{% endif %}>[AN]-Andaman And Nicobar Islands</option>
                      <option value="[AD]-Andhra Pradesh" {% if expense.cust_placeofsupply == "[AD]-Andhra Pradesh" %}selected{% endif %}>[AD]-Andhra Pradesh</option>
                      <option value="[AR]-Arunachal Pradesh" {% if expense.cust_placeofsupply == "[AR]-Arunachal Pradesh" %}selected{% endif %}>[AR]-Arunachal Pradesh</option>
                      <option value="[AS]-Assam" {% if expense.cust_placeofsupply == "[AS]-Assam" %}selected{% endif %}>[AS]-Assam</option>
                      <option value="[BR]-Bihar" {% if expense.cust_placeofsupply == "[BR]-Bihar" %}selected{% endif %}>[BR]-Bihar</option>
                      <option value="[CH]-	Chandhigarh" {% if expense.cust_placeofsupply == "[CH]-	Chandhigarh" %}selected{% endif %}>[CH]-	Chandhigarh</option>
                      <option value="[CG]-Chattisgarh" {% if expense.cust_placeofsupply == "[CG]-Chattisgarh" %}selected{% endif %}>[CG]-Chattisgarh</option>
                      <option value="[DD]-Daman Diu" {% if expense.cust_placeofsupply == "[DD]-Daman Diu" %}selected{% endif %}>[DD]-Daman Diu</option>
                      <option value="[DL]-	Delhi" {% if expense.cust_placeofsupply == "[DL]-	Delhi" %}selected{% endif %}>[DL]-	Delhi</option>
                      <option value="[GA]-Goa" {% if expense.cust_placeofsupply == "[GA]-Goa" %}selected{% endif %}>[GA]-Goa</option>
                      <option value="[GJ]-Gujarat" {% if expense.cust_placeofsupply == "[GJ]-Gujarat" %}selected{% endif %}>[GJ]-Gujarat</option>
                      <option value="[HR]-Haryana" {% if expense.cust_placeofsupply == "[HR]-Haryana" %}selected{% endif %}>[HR]-Haryana</option>
                      <option value="[HP]-Himachal Pradesh" {% if expense.cust_placeofsupply == "[HP]-Himachal Pradesh" %}selected{% endif %}>[HP]-Himachal Pradesh</option>
                      <option value="[JK]-Jammu And Kashmir" {% if expense.cust_placeofsupply == "[JK]-Jammu And Kashmir" %}selected{% endif %}>[JK]-Jammu And Kashmir</option>
                      <option value="[JH]-Jharkand" {% if expense.cust_placeofsupply == "[JH]-Jharkand" %}selected{% endif %}>[JH]-Jharkand</option>
                      <option value="[KA]-Karnataka" {% if expense.cust_placeofsupply == "[KA]-Karnataka" %}selected{% endif %}>[KA]-Karnataka</option>
                      <option value="[KL]-Kerala" {% if expense.cust_placeofsupply == "[KL]-Kerala" %}selected{% endif %}>[KL]-Kerala</option>
                      <option value="[LA]-Ladakh" {% if expense.cust_placeofsupply == "[LA]-Ladakh" %}selected{% endif %}>[LA]-Ladakh</option>
                      <option value="[LD]-Lakshadweep" {% if expense.cust_placeofsupply == "[LD]-Lakshadweep" %}selected{% endif %}>[LD]-Lakshadweep</option>
                      <option value="[MP]-Madhyapradesh" {% if expense.cust_placeofsupply == "[MP]-Madhyapradesh" %}selected{% endif %}>[MP]-Madhyapradesh</option>
                      <option value="[MH]-Maharashtra" {% if expense.cust_placeofsupply == "[MH]-Maharashtra" %}selected{% endif %}>[MH]-Maharashtra</option>
                      <option value="[MN]-Manipur" {% if expense.cust_placeofsupply == "[MN]-Manipur" %}selected{% endif %}>[MN]-Manipur</option>
                      <option value="[ML]-Meghalaya" {% if expense.cust_placeofsupply == "[ML]-Meghalaya" %}selected{% endif %}>[ML]-Meghalaya</option>
                      <option value="[MZ]-Mizoram" {% if expense.cust_placeofsupply == "[MZ]-Mizoram" %}selected{% endif %}>[MZ]-Mizoram</option>
                      <option value="[NL]-Nagaland" {% if expense.cust_placeofsupply == "[NL]-Nagaland" %}selected{% endif %}>[NL]-Nagaland</option>
                      <option value="[OD]-Odisha" {% if expense.cust_placeofsupply == "[OD]-Odisha" %}selected{% endif %}>[OD]-Odisha</option>
                      <option value="[PY]-Puducherry" {% if expense.cust_placeofsupply == "[PY]-Puducherry" %}selected{% endif %}>[PY]-Puducherry</option>
                      <option value="[PB]-Punjab" {% if expense.cust_placeofsupply == "[PB]-Punjab" %}selected{% endif %}>[PB]-Punjab</option>
                      <option value="[RL]-Rajasthan" {% if expense.cust_placeofsupply == "[RL]-Rajasthan" %}selected{% endif %}>[RL]-Rajasthan</option>
                      <option value="[SK]-Sikkim" {% if expense.cust_placeofsupply == "[SK]-Sikkim" %}selected{% endif %}>[SK]-Sikkim</option>
                      <option value="[TN]-Tamilnadu" {% if expense.cust_placeofsupply == "[TN]-Tamilnadu" %}selected{% endif %}>[TN]-Tamilnadu</option>
                      <option value="[TS]-Telenghana" {% if expense.cust_placeofsupply == "[TS]-Telenghana" %}selected{% endif %}>[TS]-Telenghana</option>
                      <option value="[TR]-Tripura" {% if expense.cust_placeofsupply == "[TR]-Tripura" %}selected{% endif %}>[TR]-Tripura</option>
                      <option value="[UP]-Uttar Pradesh" {% if expense.cust_placeofsupply == "[UP]-Uttar Pradesh" %}selected{% endif %}>[UP]-Uttar Pradesh</option>
                      <option value="[UK]-Utharakhand" {% if expense.cust_placeofsupply == "[UK]-Utharakhand" %}selected{% endif %}>[UK]-Utharakhand</option>
                      <option value="[WB]-West Bengal" {% if expense.cust_placeofsupply == "[WB]-West Bengal" %}selected{% endif %}>[WB]-West Bengal</option>
                      <option value="[OT]-Other Territory" {% if expense.cust_placeofsupply == "[OT]-Other Territory" %}selected{% endif %}>[OT]-Other Territory</option>
                  </select>
                    </select>
              </div>
            </div>

      
    <div class="form-group row">
      <label for="tax1" class="col-sm-3 col-form-label">Tax</label>
      <div class="col-sm-6">
        <input type="hidden" id="state" value="{{ company.state }}">
        <select name="tax[]" id="tax1" class="form-control bg-white text-dark" onclick="checkTax()" >
          <optgroup class="text-left" label="GST" style="display: none; padding: 5px; margin: 0;">
            <option value="GST0" {% if expense.tax == "GST0" %}selected{% endif %}>0% GST(0%)</option>
            <option value="GST3" {% if expense.tax == "GST3" %}selected{% endif %}>3.0% GST(3%)</option>
            <option value="GST5" {% if expense.tax == "GST5" %}selected{% endif %}>5.0% GST(5%)</option>
            <option value="GST12" {% if expense.tax == "GST12" %}selected{% endif %}>12.0% GST(12%)</option>
            <option value="GST18" {% if expense.tax == "GST18" %}selected{% endif %}>18.0% GST(18%)</option>
            <option value="GST28" {% if expense.tax == "GST28" %}selected{% endif %}>28.0% GST(28%)</option>
          </optgroup>
          <optgroup class="text-left" label="IGST" style="display: none; padding: 5; margin: 0;">
            <option value="IGST0" {% if expense.tax == "IGST0" %}selected{% endif %}>0% IGST(0%)</option>
            <option value="IGST3" {% if expense.tax == "IGST3" %}selected{% endif %}>3.0% IGST(3%)</option>
            <option value="IGST5" {% if expense.tax == "IGST5" %}selected{% endif %}>5.0% IGST(5%)</option>
            <option value="IGST12" {% if expense.tax == "IGST12" %}selected{% endif %}>12.0% IGST(12%)</option>
            <option value="IGST18" {% if expense.tax == "IGST18" %}selected{% endif %}>18.0% IGST(18%)</option>
            <option value="IGST28" {% if expense.tax == "IGST28" %}selected{% endif %}>28.0% IGST(28%)</option>             
          </optgroup>
        </select>
      </div>
      
    </div>
    
            <div class="form-group row">
              <label for="notes" class="col-sm-3 col-form-label">Notes</label>
              <div class="col-sm-6">
                  <input type="text" class="form-control bg-white text-dark" value="{{ expense.notes }}" id="notes" name="notes">
              </div>
          </div><br>
  

          <!-- Add a hidden input field for the activation tag with value "active" -->
          <input type="hidden" name="activation_tag" value="active">


          <div class="form-group row mt-4">
            <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Attach a File</label></div>
              <div class="col-md-6 col-lg-6 col-sm-12 py-5 text-center rounded mt-4">
                  <div style="width: 100%;background-color: rgba(243, 241, 241, 0.904);height:90px;margin-left:2px;margin-top:-100px;">
                    <label class="text-black mt-3 pt-3" for="">Attach File(s) to Recurring Expense</label><br>

                    <label for="file-upload" class="btn text-white border-0" style="background-color: rgb(210, 132, 30);">
                      <i class="fas fa-upload text-white"></i> Upload File
                    </label>
                    <input class="pb-3" id="file-upload" type="file" name="file" style="display:none;">
                  </div>
              </div>
          </div>
  
          <!-- Submit Buttons -->
          <div class="form-group row">
              <div class="col-sm-6 offset-sm-3">
                  <button type="submit" class="btn btn-primary">Save</button>
                  <button type="button" class="btn btn-secondary"  style="height:35px;" onclick="window.location.href='{% url 'show_recurring' expense.id %}'">Cancel</button>
              </div>
          </div>
      </form>
  </div>



  <div class="modal fade" id="repeatevery">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header " style="background: rgb(32, 35, 37);">
            <h3 class="m-3 text-uppercase">Add Repeat</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
          <div class="card p-3 m-3">
            <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="repeatForm">
              <div class="row mt-2">
                <div class="col-md-2 mt-2"></div>
                <div class="col-md-4 mt-2">
                  
                </div>
  
              </div>
  
  
              <div class="row mt-2">
                <div class="col-md-2 mt-2">
                  <center><label for="termname" style="color: rgb(190, 88, 88);">Add Repeat*</label></center>
                </div>
  
                <div class="col-md-4 mt-2">
                  <input type="text" class="form-control text-dark bg-light" id="repeats_input" name="repeatname" required>      
                </div>
  
              
  
              </div>
              
              <div class="row mt-5">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                  <div class="d-flex">
                    <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                    type="button"   data-dismiss="modal"  id="repeatSave">Save
                    </button> 
                    
  
                    <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                      data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Cancel</span>
                    </button>
                  </div>
                </div>
                <div class="col-md-4"></div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>  
  </div>  


  <script>
    var paidthroughSelect = document.getElementById('paidthrough');
    var chequeField = document.getElementById('chequeField');
    var upiField = document.getElementById('upiField');
    var bankField = document.getElementById('bankField');

    // Function to toggle input fields based on the selected option
    function toggleInputFields() {
        var selectedOption = paidthroughSelect.value;

        chequeField.style.display = (selectedOption === 'Cheque') ? 'block' : 'none';
        upiField.style.display = (selectedOption === 'UPI') ? 'block' : 'none';
        bankField.style.display = (selectedOption !== 'Cash' && selectedOption !== 'Cheque' && selectedOption !== 'UPI') ? 'block' : 'none';
    }

    // Add an event listener to run the function when the page loads
    window.addEventListener('load', toggleInputFields);

    // Add an event listener to run the function when the select changes
    paidthroughSelect.addEventListener('change', toggleInputFields);
</script>



  <script type="text/javascript">
    $(document).ready(function () {
        $('#customer-list').change(function () {
            var customer_id = $(this).val();
            if (customer_id) {
                // Make an AJAX request to get the customer's email
                $.get('{% url "get_customer_email" %}', { customername: customer_id }, function (data) {
                    $('#email').val(data.email);
                });

                // Make an AJAX request to get the customer's GST treatment
                $.get('{% url "get_customer_gsttrmnt" %}', { customername: customer_id }, function (data) {
                    $('#cust_gst_tr').val(data.gst_trtmnt);
                    $('#c_destination').val(data.pos)
                });
            }
        });
    });
</script>


  
  <script>
    $(document).ready(function () {
      $("#repeatSave").click(function (e) {
        e.preventDefault(); // Prevent the form from submitting traditionally
    
        // Serialize the form data
        var formData = $('#repeatForm').serialize();
    
        // Send an AJAX POST request to the server to save the data
        $.ajax({
          type: "POST",
          url: "{% url 'get_repeat_every' %}", // Replace with the correct URL for your view that saves the item
          data: formData,
          headers: { "X-CSRFToken": "{{ csrf_token }}" },
          success: function (data) {
            // Clear the input field
            $("#repeats_input").val("");
            
            var dropdown = $("#repeat_select");
            // Only clear and update the dropdown if data.repeat_list exists
            dropdown.empty();
          
            // Iterate through the received data and add options to the dropdown
            $.each(data, function(key, value) {
              var optionText = value[1];
              var optionValue = key;
              dropdown.append($('<option></option>').attr('value', optionValue).text(optionText));
            });
    
            
          },
          error: function (error) {
            console.log("AJAX Error:", error);
          },
        });
      });
    });
    
  </script>
  
    
  

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
          $(document).ready(function() {
              $('#customer-list').change(function() {
                  var selectedCustomer = $(this).val();
                  if (selectedCustomer !== '') {
                      // Show the email input field
                      $('#emailField').show();
      
                      // Fetch the email using AJAX and populate the input field
                      $.ajax({
                          url: "{% url 'get_customer_email' %}",
                          data: { customername: selectedCustomer },
                          dataType: 'json',
                          success: function(data) {
                              if (data.email) {
                                  $('#email').val(data.email);
                              } else {
                                  // Handle the case where no email is found
                                  $('#email').val('');
                              }
                          },
                          error: function(xhr, status, error) {
                              console.error(xhr.responseText);
                          }
                      });
                  } else {
                      // Hide the email input field if no customer is selected
                      $('#emailField').hide();
                  }
              });
          });
      </script>
      
      
    <script>
      function toggleDateInput() {
        var checkbox = document.getElementById("never-expire-checkbox");
        var dateInput = document.getElementById("ends_on");
        
        if (checkbox.checked) {
            dateInput.disabled = true;
        } 
        else {
            dateInput.disabled = false;
        }
    }
  </script>
  {% comment %} <script>
    function toggleDate() {
        var endsOnInput = document.getElementById("ends_on");
        var neverExpireCheckbox = document.getElementById("never-expire-checkbox");
        var startDateInput = document.getElementById("start_date");

        if (neverExpireCheckbox.checked) {
            endsOnInput.disabled = true;
            endsOnInput.value = ""; // Clear the "Ends On" date
        } else {
            endsOnInput.disabled = false;
        }
    }

    // Add an event listener to the "Start Date" input to prevent selecting the same date in "Ends On"
    var startInput = document.getElementById("start_date");
    var endsOnInput = document.getElementById("ends_on");

    startInput.addEventListener("change", function () {
        // Disable the "Ends On" date input if it matches the "Start Date"
        if (startInput.value === endsOnInput.value) {
            endsOnInput.value = ""; // Clear the "Ends On" date
        }
    });
</script>
    {% endcomment %}



  
      <script>
      $(document).ready(function() {
          // Event listener for the vendor dropdown
          $('#vendorSelect').on('change', function() {
              // Get the selected vendor's ID
              var selectedVendorId = $(this).val();
      
              // Check if a vendor is selected
              if (selectedVendorId !== '') {
                  // Send an AJAX request to fetch the GST treatment, GST number, and email for the selected vendor
                  $.ajax({
                      url: '/get_vendor_gst/' + selectedVendorId, // Replace with the actual URL to fetch vendor info
                      method: 'GET',
                      success: function(data) {
                          console.log('Received data:', data);
      
                          // Update the GST treatment input field with the fetched data
                          $('#gst_trt_inp').val(data.gst_treatment);
      
                          // Show or hide the GST number input field based on GST treatment
                          if (data.gst_treatment === 'unregistered Business') {
                              $('#textboxContainer').hide();
                          } else {
                              $('#textboxContainer').show();
                              $('#gst_num_inp').val(data.gst_number); // Update GST number
                          }
      
                          // Display the email input field with the fetched email
                          $('#vemail').val(data.email);
                          $('#emailid').show(); // Show the email input field container
                      },
                      error: function(error) {
                          console.log('Error fetching data:', error);
                      }
                  });
              } else {
                  // Clear the input fields and hide the GST number input field if no vendor is selected
                  $('#gst_trt_inp').val('');
                  $('#gst_num_inp').val('');
                  $('#vemail').val('');
                  $('#textboxContainer').hide();
                  $('#emailid').hide(); // Hide the email input field container
              }
          });
      
          // Rest of your JavaScript code...
      });
      </script>
      
      
      
      
      
      



    
  
  
<div class="modal fade" id="newAccountModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="true">
  <!-- Modal content here -->
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37); border-radius: 20px;">
      <div class="modal-header" style="background: rgb(32, 35, 37);">
        <h3 class="m-3 text-uppercase">New Account</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <form action=" " method="post" class="needs-validation" novalidate autocomplete="off" id="accountForm">
            {% csrf_token  %}
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="accountType">Account Type:</label>
                <select class="form-control bg-white text-dark" id="accountType" name="accountType">
                  <option value=""  disabled class="btn btn text-dark   highlight-account-type"><b>Assets</b></option>
                  {% comment %} <option value=""  ><b>Assets</b></option> {% endcomment %}
                  <option value="Other Current Asset">Other Current Asset</option>
                  <option value="Cash">Cash </option>
                  <option value="Bank">Bank </option>
                  <option value="Stock">Stock </option>
                  <option value="Payment Clearing">Payment Clearing </option>
                  <option value="Fixed Asset">Fixed Asset</option>
                  
                  <option value=""  disabled class="btn btn text-dark   highlight-account-type"><b>Liability</b></option>
                  <option value="Other Liability">Other Liability</option>
                  <option value="Other Current Liability">Other Current Liability</option>
                  <option value="Credit Card">Credit Card</option>
                  <option value="Long Term Liability">Long Term Liability</option>
                  <option value="Overseas Tax Pyable">Overseas Tax Pyable</option>
                  
                  <option value="" disabled class="btn btn text-dark   highlight-account-type"><b>Expense</b></option>
                  <option value="Expenses">Expenses</option>
                  <option value="Cost Of Goods Sold">Cost Of Goods Sold</option>
                  <option value="Other Expense">Other Expense</option>
                  <option value="" disabled class="btn btn text-dark   highlight-account-type"><b>Equatity</b></option>
                  <option value="Equality">Equatity</option>
                  <option value="" disabled class="btn btn text-dark   highlight-account-type"><b>Income</b></option>
                  <option value="Income">Income</option>
                  <option value="other Income">Other Income</option>
                
                
                
                </select>
              </div>
              <div class="form-group col-md-6">
                <label for="accountName">Account Name:</label>
                <input type="text" class="form-control bg-white text-dark" id="accountName" name="accountName" required>
              </div>
            </div>
            
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="accountCode">Account Code:</label>
                <input type="text" class="form-control  bg-white text-dark" id="accountCode" name="accountCode" required>
              </div>
              <div class="form-group col-md-6">
                <label for="description">Description:</label>
                <textarea class="form-control bg-white text-dark" id="description" name="description" rows="3" required></textarea>
              </div>
            </div>
            
            <div class="form-row mt-3">
              <div class="col-md-6" >
                <button type="submit" class="btn btn-primary" style="margin-left:356px;"  id="accountSave">Save and Select</button>
              </div>
              
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>



<script>
  $(document).ready(function() {
    // Function to open the modal
    $("#openModalBtn").click(function() {
        $('#newAccountModal').modal('show');
    });

    // Function to handle form submission
    $("#accountForm").on("submit", function(event) {
        event.preventDefault();

        // Client-side validation
        var accountType = $("#accountType").val();
        var accountName = $("#accountName").val();
        if (!accountType || !accountName) {
            alert("Please fill in all required fields.");
            return;
        }

        var formData = new FormData($(this)[0]);

        $.ajax({
            url: "{% url 'save_recurring_data' %}",  // Replace with your Django URL
            type: "POST",
            data: formData,
            processData: false,
            contentType: false,
            success: function(response) {
                console.log('Success:', response);
                // Update the dropdown options
                updateDropdown(response);

                // Clear the form fields
                $("#accountForm")[0].reset();

                // Close the modal
                $('#newAccountModal').modal('hide');
                closeForm1();
            },
            error: function(error) {
                console.log("AJAX error:", error);
            }
        });
    });


        function updateDropdown(response) {
            var expenseAccountDropdown = $("#expense_account");
            var accountType = response.account_type;
            var accountName = response.account_name;
            var accountId = response.acc_id;

            // Find or create the <optgroup> for the account type
            var optgroup = expenseAccountDropdown.find("optgroup[label='" + accountType + "']");
            if (optgroup.length === 0) {
                optgroup = $("<optgroup>").attr("label", accountType);
                expenseAccountDropdown.append(optgroup);
            }

            // Check if an option with the same text (accountName) already exists within the optgroup
            var existingOption = optgroup.find("option:contains('" + accountName + "')");

            if (existingOption.length === 0) {
                // Create a new option element
                var newOption = $("<option>")
                    .val(accountId)
                    .text(accountName);

                // Append the new option to the optgroup
                optgroup.append(newOption);
            }
        }
    });
    function closeForm1() {
      let formContainer = document.getElementById("newAccountModal");
      formContainer.style.display = "none";
  }
</script>




<div class="modal fade" id="newpayment">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">Add Payment Term</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation"  id="paymentTermsForm">
            {% csrf_token %}
            <div class="row mt-2">
              <div class="col-md-2 mt-2"></div>
              <div class="col-md-4 mt-2">
                <center><label for="termname" style="color: rgb(190, 88, 88);">Term Name *</label></center>
              </div>

              <div class="col-md-4 mt-2">
                <center><label for="termdays" style="color: rgb(190, 88, 88);">Number of Days *</label></center>
              </div>
              <div class="col-md-2 mt-2"></div>
            </div>


            <div class="row mt-2">
              <div class="col-md-2 mt-2"></div>

              <div class="col-md-4 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="term_name" name="term_name" required>      
              </div>

              <div class="col-md-4 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="term_days" name="term_days" required>
              </div>
              <div class="col-md-2 mt-2"></div>

            </div>
            
            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit"   id="paySave">Save
                  </button> 
                  

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>  
</div>  
<script>
  $(document).ready(function() {
    // AJAX for adding payment term
    $("#paymentTermsForm").submit(function(event) {
        event.preventDefault();
        var formData = $(this).serialize();
        $.ajax({
            url: "{% url 'custmr_payment' %}",
            type: "POST",
            data: formData,
            success: function(data) {
                if (data.success) {
                    console.log('Payment term added successfully:', data);
                    // Clear the form and reload the dropdown on success
                    $("#paymentTermsForm")[0].reset();
                    loadPaymentTerms();
                    closeForm()
                } else {
                    // Handle form validation errors
                    console.log('Error adding payment term:', data.errors);
                }
            },
            error: function(error) {
                console.log("Error:", error);
            }
        });
    });

    // Function to load payment terms into the dropdown
    function loadPaymentTerms() {
        $.ajax({
            url: "{% url 'payment_view' %}",
            type: "GET",
            success: function(data) {
                console.log('Received payment terms data:', data);
                var dropdown = $("#c_terms");
                var dropdown1 = $("#paymentTermsDropdown"); 
                dropdown.empty();
                dropdown1.empty();
                $.each(data, function(key, value) {
                    var optionText = value[1];
                    var optionValue = key;
                    dropdown.append($('<option></option>').attr('value', optionValue).text(optionText));
                    dropdown1.append($('<option></option>').attr('value', optionValue).text(optionText));
                    console.log('Added option:', optionValue, optionText);
                });
            },
            error: function(error) {
                console.log("Error:", error);
            }
        });
    }

    // Initial load of payment terms
    loadPaymentTerms();
});
function closeForm() {
  let formContainer = document.getElementById("newpayment");
  formContainer.style.display = "none";
}
</script>



<script>
  function address() {
    const billingStreet1 = document.getElementById("cstreet1").value;
    const billingStreet2 = document.getElementById("cstreet2").value;
    const billingCity = document.getElementById("ccity").value;
    const billingState = document.getElementById("cstate").value;
    const billingCountry = document.getElementById("ccountry").value;
    const billingPincode = document.getElementById("cpincode").value;
    const billingPhone = document.getElementById("cphone").value;
    const billingFax = document.getElementById("cfax").value;
  
    if (document.getElementById("csokay").checked) {
      // Set shipping address fields to billing address fields
      document.getElementById("csstreet1").value = billingStreet1;
      document.getElementById("csstreet2").value = billingStreet2;
      document.getElementById("cscity").value = billingCity;
      document.getElementById("csstate").value = billingState;
      document.getElementById("cscountry").value = billingCountry;
      document.getElementById("cspincode").value = billingPincode;
      document.getElementById("csphone").value = billingPhone;
      document.getElementById("csfax").value = billingFax;
    } else {
      // Clear the shipping address fields if checkbox is unchecked
      document.getElementById("csstreet1").value = "";
      document.getElementById("csstreet2").value = "";
      document.getElementById("cscity").value = "";
      document.getElementById("csstate").value = "";
      document.getElementById("cscountry").value = "";
      document.getElementById("cspincode").value = "";
      document.getElementById("csphone").value = "";
      document.getElementById("csfax").value = "";
    }
  }
  
</script>
<div class="modal fade" id="newvendor" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1" aria-hidden="true">
  <div class="modal-dialog modal-xl" role="document" >
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header" style="background: rgb(32, 35, 37);">
        <h3 class="modal-title m-3 text-uppercase" id="exampleModalLabel">New Vendor</h3>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" >
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate id="vendorForm">
            {% csrf_token %}

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="validationCustom01">Title</label>
              </div>
              <div class="col-md-3 mt-2">
                <select name="title" id="title" class="form-control text-dark bg-light">
                  <option value="Mr.">Mr.</option>
                  <option value="Mrs.">Mrs.</option>
                  <option value="Miss">Miss.</option>
                  <option value="Ms.">Ms.</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="fname">First name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="fname" name="firstname" required>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="lname">Last name</label>
                <label id="vdisplayname" name = "vdisplayname" hidden></label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="lname" name="lastname">
                
              </div>
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="company">Company Name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vcompany" name="vcompany_name">
              </div>
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="email">Email</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="email" class="form-control text-dark bg-light" id="vemail" name="vemail" placeholder="example@gmail.com">    
              </div>              
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="email">Vendor Phone</label>
              </div>
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vw_mobile" placeholder="Work Number" maxlength="10" name="vw_mobile">
              </div>        
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vp_mobile" placeholder="Personal Number" maxlength="10" name="vp_mobile">
              </div>          
            </div>

      
            <hr>
            <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>

            <div class="row mt-5">
              <div class="col-md-3 mt-2">
                <label for="wsite">Website</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="wsite" placeholder="www.example.com" name="website">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="vskype">Skype name/Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vskype" name="vskype">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_desg">Designation</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_desg" name="v_desg">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_dpt">Department</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_dpt" name="v_dpt">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="v_gsttype" name="v_gsttype" required>
                  <option selected disabled value="">Choose..</option>
                  <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                  <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                  <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                  <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                  <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                  <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                  <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                  <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                </select> 
                

              </div> 
                    
            </div>
            <div class="row gstrow d-none">
              <div class="col-md-3 mt-2">
                <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_gstin" name="v_gstin" placeholder="29APPCK7465F1Z1">
                <label id="gst_label"></label>
              </div>       
            </div>

          
            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_pan">PAN Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_pan" name="v_pan" placeholder="APPCK7465F">
                <label id="pan_label"></label>
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="" style="color: rgb(190, 88, 88);">Source of Supply *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="v_srcsupply" name="v_sourceofsupply">
                  <option value="Nill"></option>
                  <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                  <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                  <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                  <option value="[AS] Assam">[AS] Assam</option>
                  <option value="[BR] Bihar">[BR] Bihar</option>
                  <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                  <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                  <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                  <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                  <option value="[DL] Delhi">[DL] Delhi</option>
                  <option value="[GA] Goa">[GA] Goa</option>
                  <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                  <option value="[HR] Haryana">[HR] Haryana</option>
                  <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                  <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                  <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                  <option value="[KA] Karnataka">[KA] Karnataka</option>
                  <option value="[KL] Kerala">[KL] Kerala</option>
                  <option value="[LA] Ladakh">[LA] Ladakh</option>
                  <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                  <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                  <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                  <option value="[MN] Manipur">[MN] Manipur</option>
                  <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                  <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                  <option value="[NL] Nagaland">[NL] Nagaland</option>
                  <option value="[OD] Odisha">[OD] Odisha</option>
                  <option value="[PY] Puducherry">[PY] Puducherry</option>
                  <option value="[PB] Punjab">[PB] Punjab</option>
                  <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                  <option value="[SK] Sikkim">[SK] Sikkim</option>
                  <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                  <option value="[TS] Telangana">[TS] Telangana</option>
                  <option value="[TR] Tripura">[TR] Tripura</option>
                  <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                  <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                  <option value="[WB] West Bengal">[WB] West Bengal</option>
                  <option value="[OT] Other Territory">[OT] Other Territory</option>
                </select>
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_curn">Currency </label>
              </div>
              <div class="col-md-3 mt-2">
                <select class="form-control text-dark bg-light" id="v_curn" name="currency" required>
                  <option selected disabled value="">Choose..</option>
                  <option value="INR">INR</option>
                </select>
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_open">Opening Balance</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_open" name="v_open">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_terms">Payment Terms</label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <select class="form-control text-dark bg-light" id="paymentTermsDropdown" name="v_terms" required>
                  
                    {% for p in payments %}
                    <option value="{{p.id}}">{{p.Terms}}</option>
                    {% endfor %}
                  </select>                
                  <a href="#" class="btn btn-outline-secondary py-2 my-1" id="openPaymentModalBtn" data-target="#newpayment" data-toggle="modal">+</a>   
                </div>
              </div>       
            </div>
            

            <hr>

            <div class="row">
              <div class="col-md-6 mt-5 text-center text-uppercase">
                <h4 class="mb-0">Billing Address</h4>
              </div>
              <div class="col-md-6 mt-5">
                <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
              </div>
            </div>
            <div class="row mt-2 m-0 p-0 mb-2">
              <div class="col-md-9"> </div>
              <div class="col-md-3 text-right  m-0 p-0">
                <input type="checkbox" onclick="addressSame()" id="vokay" name="vokay">
                <label for="vokay" style="color: #909091;">Same As Billing Address</label>
              </div>
            </div>

            <div class="row mt-5">
              <div class="col-md-1">
                <label for="vstreet">Street</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="vstreet" name="vstreet"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsstreet">Street</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="vsstreet" name="vsstreet"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="vcity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vcity" name="vcity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
              <div class="col-md-1">
                <label for="vscity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vscity" name="vscity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="vstate">State</label>
              </div>
              <div class="col-md-4">
                <select type="text" class="form-control text-dark bg-light" id="vstate" name="vstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                  </option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsstate">State</label>
              </div>
              <div class="col-md-4 ">
                <select type="text" class="form-control text-dark bg-light" id="vsstate" name="vsstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                  </option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>

              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="vcountry">Country</label>
              </div>
              <div class="col-md-4 ">
                <input type="text" class="form-control text-dark bg-light" id="vcountry" name="vcountry" placeholder="Country">  
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vscountry">Country</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vscountry"  name="vscountry" placeholder="Country">
              </div>
              <div class="col-md-1 "></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="vpincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vpincode" name="vpincode" maxlength="6" placeholder="PIN Code"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vspincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vspincode" name="vspincode" maxlength="6"  placeholder="PIN Code">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="vphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vphone" name="vphone"  placeholder="Phone"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vsphone" name="vsphone"  placeholder="Phone">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="vfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vfax" name="vfax"  placeholder="FAX"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vsfax" name="vsfax"  placeholder="FAX">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row">
                <div class="col-md-6">
                  <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                  <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                  <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="vendorSave">Submit
                  </button> 

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-6"></div>
              <!-- <div class="col-md-4"></div> -->
            </div>
          </form>
              </div>
          </div>
      </div>
  </div>  
</div>  
<!-- end modal -->

<script>
function addressSame() {
    const billingStreet = document.getElementById("vstreet").value;
    const billingCity = document.getElementById("vcity").value;
    const billingState = document.getElementById("vstate").value;
    const billingCountry = document.getElementById("vcountry").value;
    const billingPincode = document.getElementById("vpincode").value;
    const billingPhone = document.getElementById("vphone").value;
    const billingFax = document.getElementById("vfax").value;

    if (document.getElementById("vokay").checked) {
        document.getElementById("vsstreet").value = billingStreet;
        document.getElementById("vscity").value = billingCity;
        document.getElementById("vsstate").value = billingState;
        document.getElementById("vscountry").value = billingCountry;
        document.getElementById("vspincode").value = billingPincode;
        document.getElementById("vsphone").value = billingPhone;
        document.getElementById("vsfax").value = billingFax;
    } else {
        // Clear the shipping address fields if checkbox is unchecked
        document.getElementById("vsstreet").value = "";
        document.getElementById("vscity").value = "";
        document.getElementById("vsstate").value = "";
        document.getElementById("vscountry").value = "";
        document.getElementById("vspincode").value = "";
        document.getElementById("vsphone").value = "";
        document.getElementById("vsfax").value = "";
    }
}
</script>


    <script>
        $(document).ready(function() {
            $("#vendorSave").on("click", function(event) {
                event.preventDefault();
                var formData = $("#vendorForm").serialize();
    
                $.ajax({
                    url: "{% url 'add_vendor' %}",
                    type: "POST",
                    data: formData,
                    headers: { "X-CSRFToken": "{{ csrf_token }}" },
                    success: function(data) {
                        console.log("AJAX Success:", data);
    
                        if (data.success) {
                            alert("Vendor added successfully!");
                            $("#vendorForm")[0].reset();
                            updateVendorDropdown(data.vendorId, data.vendorName,); // Pass the newly added vendor's ID and Name
                        } else {
                            alert("Vendor addition failed!");
                        }
                    },
                    error: function(error) {
                        console.log("AJAX Error:", error);
                    }
                });
            });
    
            function updateVendorDropdown(vendorId, vendorName) {
                // Append the new vendor to the select dropdown
                $("#vendorSelect").append($('<option>', {
                    value: vendorId,
                    text: vendorName,
                    
                }));
            }
        });
    </script>
    





<!--End Cutomer-->



<script>
  $(document).ready(function() {
    // Event listener for the vendor dropdown
    $('#vendorSelect').on('change', function() {
        // Get the selected vendor's ID
        var selectedVendorId = $(this).val();

        // Check if a vendor is selected
        if (selectedVendorId !== '') {
            // Send an AJAX request to fetch the GST treatment and GST number for the selected vendor
            $.ajax({
                url: '/get_vendor_gst/' + selectedVendorId, // Replace with the actual URL to fetch GST treatment and GST number
                method: 'GET',
                success: function(data) {
                    console.log('Received data:', data); // Add this line to check the received data
                    // Update the GST treatment and GST number input fields with the fetched data
                    $('#gst_trt_inp').val(data.gst_treatment);
                    $('#gst_num_inp').val(data.gst_number);
                },
                error: function(error) {
                    console.log('Error fetching GST treatment and GST number:', error);
                }
            });
        } else {
            // Clear the GST treatment and GST number input fields if no vendor is selected
            $('#gst_trt_inp').val('');
            $('#gst_num_inp').val('');
        }
    });

    // Rest of your JavaScript code...
});

</script>

<script>
  $(document).ready(function(){
    checkTax();
  })
       
  function checkTax() {
    // Get the selected place of supply
    var placeOfSupply = $("#c_destination").val().split(" ").slice(1).join(" ").trim();
  
    // Get the company's state and convert it to lowercase
    var companyState = $("#state").val().toLowerCase();
  
    // Convert the placeOfSupply to lowercase for consistent comparison
    placeOfSupply = placeOfSupply.toLowerCase();
  
    // Get the tax dropdown element
    var taxDropdown = document.getElementById("tax1");
  
    // Get the optgroup elements inside the tax dropdown
    
  
    if (placeOfSupply === "kerala" && companyState === "kerala") {
      // If both company state and customer place of supply are Kerala, add GST options
      var gstOptgroup = taxDropdown.querySelector('optgroup[label="GST"]');
      var igstOptgroup = taxDropdown.querySelector('optgroup[label="IGST"]');
      gstOptgroup.style.display = "block";
      igstOptgroup.style.display = "none";
      if (igstOptgroup) {
        igstOptgroup.remove();
      }
      
    } else {
      
      // If any other condition, add IGST options
      var gstOptgroup = taxDropdown.querySelector('optgroup[label="GST"]');
      var igstOptgroup = taxDropdown.querySelector('optgroup[label="IGST"]');
      gstOptgroup.style.display = "none";
      igstOptgroup.style.display = "block";
      if (gstOptgroup) {
        gstOptgroup.remove();
      }
    }
   
  };
  

</script>








  <script>
  $(document).ready(function() {
      // Handle clicking the "Add Customer" button in the modal
      $("#addCustomerButton").on("click", function() {
          var formData = $("#customerForm").serialize(); // Replace "customerForm" with the actual form ID

          $.ajax({
              url: "{% url 'entr_recurring_custmr' %}", // Change to the actual URL
              type: "POST",
              data: formData,
              success: function(data) {
                  // Clear the form fields
                  $("#customerForm")[0].reset();

                  // Close the modal
                  $("#newcustomer").modal("hide");

                  // Update the customer dropdown list
                  updateCustomerDropdown();
              },
              error: function(error) {
                  console.log("Error:", error);
              }
          });
      });

      // Function to update the customer dropdown list
      function updateCustomerDropdown() {
          var customerListSelect = $("#customer-list");

          $.ajax({
              url: "{% url 'get_customer_namess' %}", // Change to the actual URL
              type: "GET",
              success: function(data) {
              
                var expense=$("#hid").val()
                console.log(expense )
                customerListSelect.empty();
                data.forEach(function(customer) {
                    

                    var selected = customer.id == expense ? 'selected' : '';
                    console.log(selected,customer.id)
                    
                    customerListSelect.append("<option value='" + customer.id + "' " + selected + ">" + customer.name + "</option>");
                });
            },
              error: function(error) {
                  console.log("Error:", error);
              }
          });
      }

      // Initial update of the customer dropdown list
  
  });
  </script>




  <script>
    // Function to toggle visibility based on the selected radio button
    function toggleInputVisibility() {
      const goodsRadio = document.getElementById("expense_type_goods");
      const servicesRadio = document.getElementById("expense_type_services");
      const goodsInput = document.getElementById("goods-bottom");
      const servicesInput = document.getElementById("services-bottom");
  
      goodsRadio.addEventListener("change", function () {
        if (goodsRadio.checked) {
          goodsInput.style.display = "block";
          servicesInput.style.display = "none";
        }
      });
  
      servicesRadio.addEventListener("change", function () {
        if (servicesRadio.checked) {
          goodsInput.style.display = "none";
          servicesInput.style.display = "block";
        }
      });
  
      // Check the initially selected radio button and show the corresponding input field
      if (goodsRadio.checked) {
        goodsInput.style.display = "block";
        servicesInput.style.display = "none";
      } else if (servicesRadio.checked) {
        goodsInput.style.display = "none";
        servicesInput.style.display = "block";
      }
    }
  
    // Call the function to initialize the behavior
    toggleInputVisibility();
  </script>
  
  






<script>
  function validateGSTNumber(gstNumber) {
    // Regular expression to validate GST number
    var gstRegex = /^([0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1})$/;

    // Check if the entered GST number matches the regex pattern
    if (!gstRegex.test(gstNumber)) {
      alert("Invalid GST number. Please enter a valid GST number.");
      return false;
    }
    return true;
  }

  function validateForm() {
    var gstTreatment = document.getElementById("gst").value;

    // Check if the selected GST treatment requires GST number validation
    if (gstTreatment !== "Unregistered Business-not Registered under GST") {
      var gstNumber = document.getElementById("textbox").value;
      return validateGSTNumber(gstNumber);
    }

    return true;
  }
</script> 
<script>
  function toggleTextBox() {
    var gstTreatment = document.getElementById("gst_trt_inp").value;
    var textboxContainer = document.getElementById("textboxContainer");
    var textbox = document.getElementById("gstin_inp");

    if (gstTreatment !== "unregistered Business") {
      textboxContainer.style.display = "block";
      textbox.value = getGstNumber();
    } else {
      textboxContainer.style.display = "none";
      textbox.value = "";
    }
  }

  function getGstNumber() {
    var vendorSelect = document.getElementById("vendorSelect");
    var selectedVendorId = vendorSelect.value;
    var selectedVendorOption = vendorSelect.options[vendorSelect.selectedIndex];
    var gstNumber = selectedVendorOption.getAttribute("data-gst-number");
    return gstNumber || ""; // Return an empty string if GST number is undefined
  }

  // Call toggleTextBox initially to set the initial state of the textbox
  toggleTextBox();
</script>
<script>
  $(document).ready(function() {
    $("#v_gsttype").change(function() {
      var x=$('#v_gsttype').val();
      if(x=="unregistered Business") 
      {
        $(".gstrow").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".gstrow").addClass('d-none');
      }
      else 
      {
        $(".gstrow").removeClass('d-none');
        $(".gstrow").addClass('d-flex');
      }
    
    });
  });


    $(document).ready(function() {
    $("#v_gstin").change(function() {

        var x=$("v_gstin").val();
        var gst_label=document.getElementById("gst_label")
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (!expr.test(x)) {
            gst_label.style.color="red";
            gst_label.innerHTML = "Invalid GST Number.";
        }
        else{
            gst_label.style.color="green";
            gst_label.innerHTML = "valid GST Number.";

        }
      });
    });

    $(document).ready(function() {
      $("#v_pan").change(function() {
        var x= $("#v_pan").val();
        var pan_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";
            pan_label.innerHTML = "valid PAN Number.";

        }
      });
    });
</script>

<script>
  $(document).ready(function() {
    $("#c_gsttype").change(function() {
      var x=$('#c_gsttype').val();
      if(x=="Unregistered Business-not Registered under GST") 
      {
        $(".gstroww").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".gstroww").addClass('d-none');
      }
      else 
      {
        $(".gstroww").removeClass('d-none');
        $(".gstroww").addClass('d-flex');
      }
    
    });
  });


    $(document).ready(function() {
    $("#c_gstin").change(function() {

        var x=$("c_gstin").val();
        var gst_labell=document.getElementById("gst_labell")
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (!expr.test(x)) {
            gst_labell.style.color="red";
            gst_labell.innerHTML = "Invalid GST Number.";
        }
        else{
            gst_labell.style.color="green";
            gst_labell.innerHTML = "valid GST Number.";

        }
      });
    });

    $(document).ready(function() {
      $("#c_pan").change(function() {
        var x= $("#c_pan").val();
        var pan_labell=document.getElementById("pan_labell")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_labell.style.color="red";
            pan_labell.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_labell.style.color="green";
            pan_labell.innerHTML = "valid PAN Number.";

        }
      });
    });
</script>



<script>
  function validateHSN(input) {
    const hsnValue = input.value.trim();
    const hsnError = document.getElementById('hsn-error');
  
    if (hsnValue.length === 6 && /^[0-9]+$/.test(hsnValue)) {
      hsnError.textContent = '';
    } else {
      hsnError.textContent = 'Please enter a valid 6-digit number.';
    }
  }
  function validateSAC(input) {
    const sacValue = input.value.trim();
    const sacError = document.getElementById('sac-error');

    if (sacValue.length === 6 && /^[0-9]+$/.test(sacValue)) {
        sacError.textContent = '';
    } else {
        sacError.textContent = 'Please enter a valid 6-digit number.';
    }
}

  </script>


  
<script>
  function addressSame() {
      const billingStreet = document.getElementById("vstreet").value;
      const billingCity = document.getElementById("vcity").value;
      const billingState = document.getElementById("vstate").value;
      const billingCountry = document.getElementById("vcountry").value;
      const billingPincode = document.getElementById("vpincode").value;
      const billingPhone = document.getElementById("vphone").value;
      const billingFax = document.getElementById("vfax").value;
  
      if (document.getElementById("vokay").checked) {
          document.getElementById("vsstreet").value = billingStreet;
          document.getElementById("vscity").value = billingCity;
          document.getElementById("vsstate").value = billingState;
          document.getElementById("vscountry").value = billingCountry;
          document.getElementById("vspincode").value = billingPincode;
          document.getElementById("vsphone").value = billingPhone;
          document.getElementById("vsfax").value = billingFax;
      } else {
          // Clear the shipping address fields if checkbox is unchecked
          document.getElementById("vsstreet").value = "";
          document.getElementById("vscity").value = "";
          document.getElementById("vsstate").value = "";
          document.getElementById("vscountry").value = "";
          document.getElementById("vspincode").value = "";
          document.getElementById("vsphone").value = "";
          document.getElementById("vsfax").value = "";
      }
  }
  </script>
  
  
    <script>
        $(document).ready(function() {
            $("#vendorSave").on("click", function(event) {
                event.preventDefault();
                var formData = $("#vendorForm").serialize();
    
                $.ajax({
                    url: "{% url 'add_recurring_vendor' %}",
                    type: "POST",
                    data: formData,
                    headers: { "X-CSRFToken": "{{ csrf_token }}" },
                    success: function(data) {
                        console.log("AJAX Success:", data);
    
                        if (data.success) {
                            alert("Vendor added successfully!");
                            $("#vendorForm")[0].reset();
                            updateVendorDropdown(data.vendorId, data.vendorName); // Pass the newly added vendor's ID and Name
                        } else {
                            alert("Vendor addition failed!");
                        }
                    },
                    error: function(error) {
                        console.log("AJAX Error:", error);
                    }
                });
            });
    
            function updateVendorDropdown(vendorId, vendorName) {
                // Append the new vendor to the select dropdown
                $("#vendorSelect").append($('<option>', {
                    value: vendorId,
                    text: vendorName
                }));
            }
        });
    </script>


    <div class="modal fade" id="newcustomer">
      <div class="modal-dialog modal-xl">
        <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
          <div class="modal-header " style="background: rgb(32, 35, 37);">
              <h3 class="m-3 text-uppercase">New Customer</h3>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
              </button>
          </div>
          <div class="modal-body" style="background: rgb(32, 35, 37);">
            <div class="card p-3 m-3">
              <form action=" " method="post" class="needs-validation" novalidate autocomplete="off" id="customerForm">
                {% csrf_token %}
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="">Customer Type</label><br>
                  </div>
                  <div class="col-md-6 mt-2">
                    <div class="d-flex">
                      <div class="radio_opt mx-5 mt-2">
                        <input type="radio" id="business" name="type" value="Business" >
                        <label for="option1">Business</label>
                      </div>
                      <div class="radio_opt mx-4 mt-2">
                        <input type="radio" id="individual" name="type" value="Individual" >
                        <label for="option2">Individual</label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row mt-5">
                  <div class="col-md-3">
                    <label for="ctitle">Title</label>
                  </div>
                  <div class="col-md-3">
                    <select name="ctitle" id="ctitle" class="form-control text-dark bg-light">
                      <option value="Mr." selected>Mr.</option>
                      <option value="Mrs.">Mrs.</option>
                      <option value="Ms.">Ms.</option>
                      <option value="Miss.">Miss.</option>
                      <option value="Dr.">Dr.</option>
                    </select>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cfname">First name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="cfname" name="cfirstname" required>
                  </div>
                </div>
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="clname">Last name</label>
                    <label id="cdisplayname" name = "cdisplayname" hidden></label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="clname" name="clastname">
                  </div>
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="ccompany">Company Name</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="ccompany" name="ccompany_name">
                  </div>
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cemail">Customer Email</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="email" class="form-control text-dark bg-light" id="cemail" name="cemail" placeholder="example@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$">    
                  </div>              
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="email">Customer Phone</label>
                  </div>
                  <div class="col-md-3 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="cw_mobile" placeholder="Work Number" maxlength="10" name="cw_mobile">
                  </div>        
                  <div class="col-md-3 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="cp_mobile" placeholder="Personal Number" maxlength="10" name="cp_mobile">
                  </div>          
                </div>
    
          
                <hr>
                <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
                <div class="row mt-5">
                  <div class="col-md-3 mt-2">
                    <label for="facebook">Facebook</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="facebook" placeholder="www.example.com" name="facebook">
                  </div>       
                </div>
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="twitter">Twitter</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="twitter" placeholder="www.example.com" name="twitter">
                  </div>       
                </div>
    
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="website">Website</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="website" placeholder="www.example.com" name="website">
                  </div>       
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="cskype">Skype name/Number</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="cskype" name="cskype">
                  </div>       
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_desg">Designation</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="c_desg" name="c_desg">
                  </div>       
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_dpt">Department</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control text-dark bg-light" id="c_dpt" name="c_dpt">
                  </div>       
                </div>
    
                <div class="form-group row mt-2">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                    <label for="c_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
                  </div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                    <select class="form-control text-dark bg-light" id="c_gsttype" name="c_gsttype" required>
                      <option value="value" selected>Select a Gst Treatment</option>
                      <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                      <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">Registered Business-Composition Business that is registered under the Composition scheme in GST</option>
                      <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                      <option value="Consumer- A customer who is a regular Consumer">Consumer- A customer who is a regular Consumer</option>
                      <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                      <option value="Special Economic Zone">Special Economic Zone</option>
                    </select>
                    
                  </div>       
                </div>
                <div class="row gstroww d-none">
                  <div class="col-md-3 mt-2">
                    <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control" id="c_gstin" name="c_gstin" placeholder="29APPCK7465F1Z1">
                    <label id="gst_labell"></label>
                  </div>       
                </div>
                
    
                
    
    
                <div class="row">
                  <div class="col-md-3 mt-2">
                    <label for="v_pan">PAN Number</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="text" class="form-control" id="v_pan" name="v_pan" placeholder="APPCK7465F">
                    <label id="pan_labell"></label>
                  </div>       
                </div> 
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="" style="color: rgb(190, 88, 88);">Place of Supply *</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <select class="form-control text-dark bg-light" id="placesupply" name="placesupply">
                      <option value="Nill"></option>
                      <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                      <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                      <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                      <option value="[AS] Assam">[AS] Assam</option>
                      <option value="[BR] Bihar">[BR] Bihar</option>
                      <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                      <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                      <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                      <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                      <option value="[DL] Delhi">[DL] Delhi</option>
                      <option value="[GA] Goa">[GA] Goa</option>
                      <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                      <option value="[HR] Haryana">[HR] Haryana</option>
                      <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                      <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                      <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                      <option value="[KA] Karnataka">[KA] Karnataka</option>
                      <option value="[KL] Kerala">[KL] Kerala</option>
                      <option value="[LA] Ladakh">[LA] Ladakh</option>
                      <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                      <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                      <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                      <option value="[MN] Manipur">[MN] Manipur</option>
                      <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                      <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                      <option value="[NL] Nagaland">[NL] Nagaland</option>
                      <option value="[OD] Odisha">[OD] Odisha</option>
                      <option value="[PY] Puducherry">[PY] Puducherry</option>
                      <option value="[PB] Punjab">[PB] Punjab</option>
                      <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                      <option value="[SK] Sikkim">[SK] Sikkim</option>
                      <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                      <option value="[TS] Telangana">[TS] Telangana</option>
                      <option value="[TR] Tripura">[TR] Tripura</option>
                      <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                      <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                      <option value="[WB] West Bengal">[WB] West Bengal</option>
                      <option value="[OT] Other Territory">[OT] Other Territory</option>
                    </select>
                  </div>       
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference* </label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <div class="d-flex">
                      <div class="radio_opt mx-5 mt-2">
                        <input type="radio" id="custtax1" name="radioCust1" value="Taxable" >
                        <label for="option1">Taxable</label>
                      </div>
                      <div class="radio_opt mx-4 mt-2">
                        <input type="radio" id="custtax2" name="radioCust1" value="Tax-exempt" >
                        <label for="option2">Tax-exempt</label>
                      </div>
                    </div>
                  </div>       
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_curn">Currency </label>
                  </div>
                  <div class="col-md-3 mt-2">
                    <select class="form-control text-dark bg-light" id="c_curn" name="c_curn" required>
                      <option selected disabled value="">Choose..</option>
                      <option value="INR">INR</option>
                    </select>
                  </div>       
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_open">Opening Balance</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <input type="number" class="form-control text-dark bg-light" id="c_open" name="c_open">
                  </div>       
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-3 mt-2">
                    <label for="c_terms">Payment Terms</label>
                  </div>
                  <div class="col-md-6 mt-2">
                    <div class="d-flex">
                      <select class="form-control text-dark bg-light" id="c_terms" name="c_terms" required>
                    
                        {% for p in payments %}
                        <option value="{{p.id}}">{{p.Terms}}</option>
                        {% endfor %}
                      </select>                
                      <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>   
                    </div>
                  </div>       
                </div>
                
    
                <hr>
    
                <div class="row mt-2">
                  <div class="col-md-6 mt-5 text-center text-uppercase">
                    <h4 class="mb-0">Billing Address</h4>
                  </div>
                  <div class="col-md-6 mt-5">
                    <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
                  </div>
                </div>
                <div class="row mt-2 m-0 p-0 mb-2">
                  <div class="col-md-9"> </div>
                  <div class="col-md-3 text-right  m-0 p-0">
                    <input type="checkbox" onclick="addressSame()" id="csokay" name="csokay">
                    <label for="csokay" style="color: #909091;">Same As Billing Address</label>
                  </div>
                </div>
    
                <div class="row mt-5">
                  <div class="col-md-1">
                    <label for="cstreet1">Address 1</label>
                  </div>
                  <div class="col-md-4">
                    <textarea class="form-control street text-dark bg-light" id="cstreet1" name="cstreet1"></textarea>
                  </div>
                  <div class="col-md-1"></div>
    
                  <div class="col-md-1">
                    <label for="csstreet1">Address 1</label>
                  </div>
                  <div class="col-md-4 ">
                    <textarea class="form-control street text-dark bg-light" id="csstreet1" name="csstreet1"></textarea>
                  </div>
                  <div class="col-md-1"></div>
    
                </div>
                <div class="row mt-5">
                  <div class="col-md-1">
                    <label for="cstreet2">Address 2</label>
                  </div>
                  <div class="col-md-4">
                    <textarea class="form-control street text-dark bg-light" id="cstreet2" name="cstreet2"></textarea>
                  </div>
                  <div class="col-md-1"></div>
    
                  <div class="col-md-1">
                    <label for="csstreet2">Address 2</label>
                  </div>
                  <div class="col-md-4 ">
                    <textarea class="form-control street text-dark bg-light" id="csstreet2" name="csstreet2"></textarea>
                  </div>
                  <div class="col-md-1"></div>
    
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="ccity">City</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="ccity" name="ccity" placeholder="City">  
                  </div>
                  <div class="col-md-1">
                  </div>
                  <div class="col-md-1">
                    <label for="cscity">City</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="cscity" name="cscity" placeholder="City">  
                  </div>
                  <div class="col-md-1">
                  </div>
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="cstate">State</label>
                  </div>
                  <div class="col-md-4">
                    <select type="text" class="form-control text-dark bg-light" id="cstate" name="cstate">
                      <option value="" selected>Choose</option>
                      <option value="None Of This">None Of This</option>
                      <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                      <option value="Andhra Predhesh">Andhra Predhesh</option>
                      <option value="Arunachal Predesh">Arunachal Predesh</option>
                      <option value="Assam">Assam</option>
                      <option value="Bihar">Bihar</option>
                      <option value="Chandigarh">Chandigarh</option>
                      <option value="Chhattisgarh">Chhattisgarh</option>
                      <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                      <option value="Damn anad Diu">Damn anad Diu</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Goa">Goa</option>
                      <option value="Gujarat">Gujarat</option>
                      <option value="Haryana">Haryana</option>
                      <option value="Himachal Predesh">Himachal Predesh</option>
                      <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                      <option value="Jharkhand">Jharkhand</option>
                      <option value="Karnataka">Karnataka</option>
                      <option value="Kerala">Kerala</option>
                      <option value="Ladakh">Ladakh</option>
                      <option value="Lakshadweep">Lakshadweep</option>
                      <option value="Madhya Predesh">Madhya Predesh</option>
                      <option value="Maharashtra">Maharashtra</option>
                      <option value="Manipur">Manipur</option>
                      <option value="Meghalaya">Meghalaya</option>
                      <option value="Mizoram">Mizoram</option>
                      <option value="Nagaland">Nagaland</option>
                      <option value="Odisha">Odisha</option>
                      <option value="Puducherry">Puducherry</option>
                      <option value="Punjab">Punjab</option>
                      <option value="Rajasthan">Rajasthan</option>
                      <option value="Sikkim">Sikkim</option>
                      <option value="Tamil Nadu">Tamil Nadu</option>
                      <option value="Telangana">Telangana</option>
                      <option value="Tripura">Tripura</option>
                      <option value="Uttar Predesh">Uttar Predesh</option>
                      <option value="Uttarakhand">Uttarakhand</option>
                      <option value="West Bengal">West Bengal</option>
                      <option value="Other Territory">Other Territory</option>
                    </select>
                  </div>
                  <div class="col-md-1"></div>
    
                  <div class="col-md-1">
                    <label for="csstate">State</label>
                  </div>
                  <div class="col-md-4 ">
                    <select type="text" class="form-control text-dark bg-light" id="csstate" name="csstate">
                      <option value="" selected>Choose</option>
                      <option value="None Of This">None Of This</option>
                      <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                      </option>
                      <option value="Andhra Predhesh">Andhra Predhesh</option>
                      <option value="Arunachal Predesh">Arunachal Predesh</option>
                      <option value="Assam">Assam</option>
                      <option value="Bihar">Bihar</option>
                      <option value="Chandigarh">Chandigarh</option>
                      <option value="Chhattisgarh">Chhattisgarh</option>
                      <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                      <option value="Damn anad Diu">Damn anad Diu</option>
                      <option value="Delhi">Delhi</option>
                      <option value="Goa">Goa</option>
                      <option value="Gujarat">Gujarat</option>
                      <option value="Haryana">Haryana</option>
                      <option value="Himachal Predesh">Himachal Predesh</option>
                      <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                      <option value="Jharkhand">Jharkhand</option>
                      <option value="Karnataka">Karnataka</option>
                      <option value="Kerala">Kerala</option>
                      <option value="Ladakh">Ladakh</option>
                      <option value="Lakshadweep">Lakshadweep</option>
                      <option value="Madhya Predesh">Madhya Predesh</option>
                      <option value="Maharashtra">Maharashtra</option>
                      <option value="Manipur">Manipur</option>
                      <option value="Meghalaya">Meghalaya</option>
                      <option value="Mizoram">Mizoram</option>
                      <option value="Nagaland">Nagaland</option>
                      <option value="Odisha">Odisha</option>
                      <option value="Puducherry">Puducherry</option>
                      <option value="Punjab">Punjab</option>
                      <option value="Rajasthan">Rajasthan</option>
                      <option value="Sikkim">Sikkim</option>
                      <option value="Tamil Nadu">Tamil Nadu</option>
                      <option value="Telangana">Telangana</option>
                      <option value="Tripura">Tripura</option>
                      <option value="Uttar Predesh">Uttar Predesh</option>
                      <option value="Uttarakhand">Uttarakhand</option>
                      <option value="West Bengal">West Bengal</option>
                      <option value="Other Territory">Other Territory</option>
                    </select>
                  </div>
    
                  <div class="col-md-1"></div>
    
                </div>
    
                <div class="row mt-2">
                  <div class="col-md-1">
                    <label for="ccountry">Country</label>
                  </div>
                  <div class="col-md-4 ">
                    <input type="text" class="form-control text-dark bg-light" id="ccountry" name="ccountry" placeholder="Country">  
                  </div>
                  <div class="col-md-1"></div>
    
                  <div class="col-md-1">
                    <label for="cscountry">Country</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="cscountry"  name="cscountry" placeholder="Country">
                  </div>
                  <div class="col-md-1 "></div>
    
                </div>
    
                <div class="row mt-2">
    
                  <div class="col-md-1">
                    <label for="cpincode">Pincode</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="cpincode" name="cpincode" maxlength="6" placeholder="PIN Code"> 
                  </div>
                  <div class="col-md-1"></div>
    
                  <div class="col-md-1">
                    <label for="cspincode">Pincode</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="cspincode" name="cspincode" maxlength="6" placeholder="PIN Code">  
                  </div>
                  <div class="col-md-1"></div>
    
                </div>
    
                <div class="row mt-2">
    
                  <div class="col-md-1">
                    <label for="cphone">Phone</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="cphone" name="cphone" placeholder="Phone"> 
                  </div>
                  <div class="col-md-1"></div>
    
                  <div class="col-md-1">
                    <label for="csphone">Phone</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="csphone" name="csphone" placeholder="Phone">  
                  </div>
                  <div class="col-md-1"></div>
    
                </div>
    
                <div class="row mt-2">
    
                  <div class="col-md-1">
                    <label for="cfax">Fax</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="cfax" name="cfax" placeholder="FAX"> 
                  </div>
                  <div class="col-md-1"></div>
    
                  <div class="col-md-1">
                    <label for="csfax">Fax</label>
                  </div>
                  <div class="col-md-4">
                    <input type="text" class="form-control text-dark bg-light" id="csfax" name="csfax" placeholder="FAX">  
                  </div>
                  <div class="col-md-1"></div>
    
                </div>
    
                <div class="row mt-2">
                    <div class="col-md-6">
                      <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                      <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                      <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                    </div>
                </div>
                <div class="row mt-5">
                  <div class="col-md-4"></div>
                  <div class="col-md-4">
                    <div class="d-flex">
                      <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                      type="submit" data-dismiss="modal"  id="addCustomerButton">Submit
                      </button> 
    
                      <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                        data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">Cancel</span>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4"></div>
              </form>
                  </div>
              </div>
          </div>
      </div>  
    </div> 
    

  
  
  
  

  


  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script> 

  
{% endblock %}
    
  






