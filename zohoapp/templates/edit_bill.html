{% extends 'base.html' %}
{% load static %}
{% block content %}

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<style>
    select:focus {
        outline: none !important;
        box-shadow: none !important;
    }

    #customer_sel option:hover {
        background-color: rgb(210, 132, 30);
    }

    .element-below-fixed {
        padding-top: 100px;
    }

    /* width */
    ::-webkit-scrollbar {
        width: 10px;
    }

    /* Track */
    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    /* Handle */
    ::-webkit-scrollbar-thumb {
        background: #888;
    }

    /* Handle on hover */
    ::-webkit-scrollbar-thumb:hover {
        background: #555;
    }

    .hide {
        display: none;
    }

    .modal-backdrop {
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 999;
        /* Adjust the alpha value to control the opacity */
    }
</style>

<script>



    function calc() {
        $('#item_table tbody tr').each(function () {


            var html = $(this).html();
            if (html != '') {
                console.log('rows');
                var qty = $(this).find('.qty').val();
                var rate = $(this).find('.rate').val();
                var tax = $(this).find('.tax').val();
                var dic = $(this).find('.discount').val();
                console.log(qty);
                console.log(rate);
                console.log(tax);
                $(this).find('.taxamount').val((qty * rate) * (tax / 100));
                var taxamount = parseFloat($(this).find('.taxamount').val());
                $(this).find('.amount').val((qty * rate)-dic);

                calc_total();
            }
        });
    }

    function calc_total() {
        total = 0;
        $('.amount').each(function () {
            total += parseFloat($(this).val());

        });
        taxamount = 0;
        $('.taxamount').each(function () {
            taxamount += parseFloat($(this).val());

        });

        // total = Math.round(total);
        // taxamount = Math.round(taxamount);
        $('#subtotal').val(total.toFixed(2));
        $('#total_taxamount').val(taxamount.toFixed(2));

        $('#total').val((taxamount + total).toFixed(2));
        // $('#baldue').val((taxamount + total).toFixed(2));

        test();
    }

    function test() {
        // console.log('test');
        d = 0;
        // var pos = document.getElementById("pos").value;
        // var sos = document.getElementById("sos").value;

        var pos = document.getElementById("pos").value.split("-")[1];
        var sos = document.getElementById("state").value;

        if (pos == sos) {
            // console.log(pos);
            // console.log(state);
            // console.log(taxamount);
            gst = taxamount / 2;
            // gst = Math.round (gst);
            // console.log(gst);
            $('#cgst').val(parseFloat(gst.toFixed(2)));
            $('#sgst').val(parseFloat(gst.toFixed(2)));
            $('#igst').val(parseFloat(d.toFixed(2)));
            document.getElementById("tr_cgst").style.display = "table-row";
            document.getElementById("tr_sgst").style.display = "table-row";


        }

        if (pos != sos) {
            // console.log(pos);
            // console.log(state);
            $('#igst').val(taxamount.toFixed(2));
            $('#cgst').val(d.toFixed(2));
            $('#sgst').val(d.toFixed(2));
            document.getElementById('tr_igst').style.display = "table-row";
        }
    }
    // Calculate total
    $(document).ready(function () {
        $('#shipping, #adjustment').on('change', function () {
            var shipping_charge = parseFloat($('#shipping').val() || 0);
            var add_round_off = parseFloat($('#adjustment').val() || 0);
            var subtotal = parseFloat($('#subtotal').val() || 0);
            var total_tax = parseFloat($('#total_taxamount').val() || 0);
            var total = subtotal + total_tax + shipping_charge + add_round_off;
            // total = Math.round(total);

            // $('#shipping_charge').val(shipping_charge.toFixed(2));
            // $('#discount_amnt').val(discount_amnt.toFixed(2));
            $('#total').val(total.toFixed(2));
        });
    });

</script>

<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>

    function cancelDialog() {

        var frm = document.getElementById("forms");
        let customMsg = "Do you want to cancel?";

        if (confirm(customMsg)) {
            alert("Bill cancelled!")
        }
    }

    function saveAsDraftDialog() {
    let grand_total = $('#grandtotal').val();
    let paid = $('#amtPaid').val(); 
    if(parseFloat(paid) > parseFloat(grand_total)){
       alert("Paid amount should not be greater than grand total.")
    }
    else{
      var frm = document.getElementById("forms");
      frm.action = ("{% url 'update_bills' pk=id %}")
    }
  }
function saveAndOpenDialog() {

let grand_total = $('#grandtotal').val();
let paid = $('#amtPaid').val(); 
if(parseFloat(paid) > parseFloat(grand_total)){
   alert("Paid amount should not be greater than grand total.")
}
else{
  var frm = document.getElementById("forms");
  frm.action = ("{% url 'update_bills_save' pk=id %}")
}
  
}



</script>


<section>
    <!-- <div class="fixed-top  " style="top: 7rem; margin-left: 20rem;"> -->


    <div class="row  ml-2">
        <div class="col-md-3 "><a class="text-white" style="font-size: 1.5rem;"><i class="fas fa-file-invoice"></i> Edit
                Bill</a></div>
        <input type="hidden" id="state" value="{{ company.state }}">
    </div>

    <!-- <div style="height: 600px; overflow-y: scroll;"> -->
        <form method="POST"  class="p-5" enctype="multipart/form-data" novalidate id="forms">
            {% csrf_token %}
            <div class="row mb-4  pt-5">
                <div class="col-sm-2"><label for="customer_name">Vendor Name*</label></div>
                <div class="col-sm-10 d-flex align-items-center">
                    <select class="form-control text-dark" id="vendor_sel" name="vendor_name"
                        style="width: 50%;  background: white;">
                        <option>Select Vendor</option>
                        <option id="crt_vendor" value="{{bill.vendor_name}}" selected>{{bill.vendor_name}}</option>
                        {% for v in vendors %}
                        <option value="{{v.first_name}} {{v.last_name}}">
                            {{v.first_name}} {{v.last_name}}
                        </option>
                        {% endfor %}
                    </select>
                    <a href="" class="p-2" data-toggle="modal" data-target="#create_vendor">
                        <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); "
                            data-toggle="tooltip" title="Create Vendor"></i>
                    </a>
                </div>
            </div>
            <div class="row mb-4  vendor_email_row">
                <div class="col-sm-2"><label for="vendor_email">Email</label></div>
                <div class="col-sm-10"><input type="email" id="vendor_email" name="vendor_email"
                        class="form-control bg-white text-dark" style="width: 50%;" value="{{bill.vendor_email}}">

                </div>
            </div>
            
            <div class="row mb-4" >
              <div class="col-sm-2"><label for="v_gsttype">GST Treatment</div>
              <div class="col-sm-10"> <input type="text" class="form-control bg-white text-dark"
                style="width: 50%;" id="v_gsttype" name="v_gsttype" value="{{bill.v_gsttype}}">

              </div>
          </div>
            
            <div class="row mb-4" id="gstin_row">
              <div class="col-sm-2"><label for="gstin_inp">GST Number</div>
              <div class="col-sm-10"><input type="text" id="gstin_inp" name="gstin_inp" class="form-control bg-white text-dark"
                      style="width: 50%;" value="{{bill.gstin_inp}}">

              </div>
          </div>
            <div class="row mb-4 ">
                <div class="col-sm-2"><label for="vendor_sos">Source Of Supply</label></div>
                <div class="col-sm-10"><input type="text" id="sos" name="sos" class="form-control bg-white text-dark"
                        style="width: 50%;" value="{{bill.source_of_supply}}">

                </div>
            </div>
           
            <div class="row mb-4   pt-5">
                <div class="col-sm-2"><label for="bill_number">Bill#*</label></div>
                <div class="col-sm-4"><input type="text" id="bill_number" name="bill_number"
                        class="form-control bg-white text-dark" value="{{bill.bill_no}}">

                </div>
            </div>
            <div class="row mb-4">
              <div class="col-sm-2"><label for="repeats">Repeat Every*</label></div>
              <div class="col-sm-4"><select class="form-control bg-white text-dark" id="repeats"  name="repeats"> 
                <option selected value="{{recur_bills.repeat_every}}">{{recur_bills.repeat_every}}</option>
              </select>

              </div>
              <div class="col-sm-6">
                <a data-toggle="modal" data-target="#newrepeat">
                  <i class="fas fa-plus p-2 rounded " style="color: white; background-color: rgb(210, 132, 30); "
                      data-toggle="tooltip" title="Add Repeat"></i>
              </a>
              </div>
          </div>
              
          
            <div class="row mb-4">
                <div class="col-sm-2"><label for="reference">Order Number</label></div>
                <div class="col-sm-4"> <input type="number" id="order_number" name="order_number"
                        class="form-control bg-white text-dark" value="{{bill.order_number}}"></div>
            </div>
            <div class="row mb-4">
                <div class="col-sm-2"><label for="reference">Bill Date*</label></div>
                <div class="col-sm-4"> <input type="date" id="bill_date" name="bill_date"
                        class="form-control bg-white text-dark" value="{{ bill.bill_date|date:'Y-m-d'}}"></div>
            </div>
            <div class="row ">
                <div class="col-sm-2"><label for="reference">Due Date*</label></div>
                <div class="col-sm-4"> <input type="date" id="due_date" name="due_date"
                        class="form-control bg-white text-dark" value="{{bill.due_date|date:'Y-m-d'}}">
                </div>
                <div class="col-md-3">
                  <input type="checkbox" id="never-expire-checkbox" onchange="toggleDateInput()" />
                  <label for="never-expire-checkbox" style="color: #909091;" name="neverExp">Never Expires</label>
                </div>
                
            </div>
            <div class="row pt-4">  
            <div class="col-sm-2 "><label class="text-right">Payment Terms</label></div>
                <div class="col-sm-5 d-flex align-items-center"> <select id="p_terms" name="p_terms"
                        class="form-control bg-white text-dark" style="width: 80%;">
                        <option id="crt_term" value="{{bill.payment_terms}}" selected> 
                        
                        {% if bill.payment_terms == "recpt" %}
                          Due On Receipt
                        {% else %}
                        {{bill.payment_terms}}
                        {% endif %}
                      </option>
                       
                       
                        <option value="30">Net 30</option>
                        
                        <option value="60">Net 60</option>
                        <option value="recpt">Due On Receipt</option>
                        {% for t in terms %}
                        <option value="{{t.Days}}">{{t.Terms}}</option>
                        {% endfor%}
                    </select>
                    <button type="button" class="btn p-2" data-toggle="modal" data-target="#newpayment">
                        <i class="fas fa-plus p-2 rounded" style="color: white; background-color: rgb(210, 132, 30); "
                            data-toggle="tooltip" title="Configure Terms"></i>
                    </button>
                </div>
            <div class="row mb-4  pt-5">
              <div class="col-sm-2"><label for="customer_name">Customer Name*</label></div>
              <div class="col-sm-10 d-flex align-items-center">
                  <select class="form-control text-dark" id="customer_sel" name="customer_name"
                      style="width: 50%;  background: white;">
                      <option>Select Customer</option>
                      <option id="crt_cust" value="{{bill.customer_name}}" selected>{{bill.customer_name}}</option>
                      {% for cust in customers %}
                      <option value="{{cust.customerName}}" data-pos="{{cust.placeofsupply}}">
                          {{cust.customerName}}
                      </option>
                      {% endfor %}
                  </select>
                  <a href="" class="p-2" data-toggle="modal" data-target="#create_customer">
                      <i class="fas fa-plus p-2 rounded" style="color: white; background-color: rgb(210, 132, 30); "
                          data-toggle="tooltip" title="Create Customer"></i>
                  </a>
              </div>
          </div>
        </div>
          <div class="row mb-4   " id="customer_email_row">
              <div class="col-sm-2"><label for="customer_email">Email</label></div>
              <div class="col-sm-10"><input type="email" id="customer_email" name="customer_email"
                      class="form-control bg-white text-dark" style="width: 50%;" value="{{bill.customer_email}}">

              </div>
          </div>
          <div class="row mb-4   " id="pos_row">
              <div class="col-sm-2"><label for="customer_pos">Place Of Supply</label></div>
              <div class="col-sm-10"><input type="text" id="pos" name="pos" class="form-control bg-white text-dark"
                      style="width: 50%;" value="{{bill.place_of_supply}}">

              </div>
          </div>
          <div class="row mb-4" id="cgst_trt_row">
            <div class="col-sm-2"> <label for="c_gsttype">GST Treatment</label></div>
            <div class="col-5"><input type="text" class="form-control bg-white text-dark"  id="c_gsttype" name="c_gsttype" style="width: 105%;">

            </div>
        </div>
        <div class="row mb-4" id="cgstin_row">
          <div class="col-sm-2"> <label for="gstin_inp">GST Number</label></div>
          <div class="col-5"><input type="text" class="form-control text-dark bg-light" id="cgstin_inp" name="cgstin_inp" style="width: 105%;">

          </div>
          <div class="row mb-4 pt-4">
            <div class="col-sm-2"><label for="paymentmethod">Payment Method</label></div>
            <div class="col-sm-10"><select name="paymentmethod" id="paymentmethod" class="form-control bg-white text-dark" style="width: 53%;">
              <option id="crt_paymt_method" value="{{bill.payment_method}}" selected>{{bill.payment_method}}</option>
              <option value="Cash">Cash</option>
              <option value="Cheque">Cheque</option>
              {% for b in bank %}
                  <option value="{{b.name}}">{{b.name}}</option>
              {% endfor %}
          </select>

            </div>
        </div>
      </div>
          
            <div class="form-check  pt-2 pb-5">
                <input class="form-check-input" type="checkbox" value="" id="checkbox" onchange="updateTaxHeader()">
                <label class="form-check-label" for="checkbox">
                    This transaction is applicable for reverse charge
                </label>
            </div>
            <label for="">Price List</label><br>
            <table class="table  text-black" id="item_table" style="background-color: rgba(250, 227, 198, 0.8);display: block;"
                onchange="calc()">
                <thead>
                    <tr>
                        <th style="width: 200px;">Item Details <a href="" data-toggle="modal" data-target="#create_item" style="text-decoration: none;">
                          <i class="fas fa-plus p-2 rounded"style="color: white; background-color: rgb(210, 132, 30);"></i></a></th>
                          <th class="text-right">HSN</th>

                        <!-- <th style="width: 250px;">Account<a href="" data-toggle="modal" data-target="#create_account" style="text-decoration: none;">
                          <i class="fas fa-plus p-2 rounded"style="color: white; background-color: rgb(210, 132, 30);"></i></a></th> -->

                        <th class="text-right">Quantity</th>
                        <th class="text-right">Rate</th>
                        <th class="text-right" id="tax_head" style="width: 200px;">Tax</th>
                        <th class="text-right">Discount</th>
                        <th class="text-right" style="width: 200px;">Amount</th>
                    </tr>
                </thead>
                <tbody>

                  {% for item in bill_items  %} 
                    <tr id='row{{ forloop.counter }}'>
                        <td>
                            <div class='form-group'>
                              <select class='form-control bg-transparent text-black border-0 item_select itm'
                                    name='item[]' id='item{{ forloop.counter }}'>
                                    <option class='text-dark' id="items_nms" value="{{item.item_name}}" >{{item.item_name}}</option>
                                    {% for i in items %}
                                    <option class="text-dark" value="{{i.Name}}">{{i.Name}}</option>
                                    {% endfor %}
                                </select></div>
                        </td>
                       
                        <td class='text-right'><input  type="number" value="{{item.hsn}}"  name='HSN[]' id="HSN{{ forloop.counter }}" placeholder='HSN' style="width: 80px;" 
                          class='bg-transparent border-0 text-black text-right HSN' style="width: 50px;">
                        </td>
                      
                        <td class='text-right'><input type='number' id='qty{{ forloop.counter }}' style="width: 50px;"
                                class='bg-transparent border-0 text-black text-right qty' name='quantity[]' value="{{item.quantity}}">
                        </td>
                        <td class='text-right'><input type='number' id='rate{{ forloop.counter }}' style="width: 80px;"
                                class='bg-transparent border-0 text-black text-right rate' name='rate[]' value="{{item.rate}}">
                        </td>

                        <td class='text-right'> <select name='tax[]' id='tax{{ forloop.counter }}' style="width: 80px;"
                          class='bg-transparent border-0 text-black text-right tax'
                          onclick='handleTaxChange({{ forloop.counter }})'>
                          
                                <option value="{{item.tax_percentage}}"  id="taxType" selected>{{item.tax_percentage}}%</option> 
                                <optgroup label="GST" style="display: none;">
                                  <option value=0>0% GST</option>
                                  <option value=3>3% GST</option>
                                  <option value=5>5% GST</option>
                                  <option value=12>12% GST</option>
                                  <option value=18>18% GST</option>
                                  <option value=28>28% GST</option>
                              </optgroup>
                              <optgroup label="IGST"  style="display: none;">
                                  <option value=0>0% IGST</option>
                                  <option value=3>3% IGST</option>
                                  <option value=5>5% IGST</option>
                                  <option value=12>12% IGST</option>
                                  <option value=18>18% IGST</option>
                                  <option value=28>28% IGST</option>
                              </optgroup>
                            </select></td>
                        <td style="display: none;">
                            <input type="number" name='taxamount[]' id="taxamount{{ forloop.counter }}" class="form-control taxamount" style="width: 50px;" />
                        </td>
                        <td class='text-right'><input type='number' id='discount{{ forloop.counter }}'
                          class='bg-transparent border-0 text-black text-right discount' style="width: 50px;" name='discount[]' 
                          value="{{item.discount}}"></td>
                        <td class='text-right'><input type='number' id='amount{{ forloop.counter }}'
                                class='bg-transparent border-0 text-black text-right amount' name='amount[]'
                                value="{{item.amount}}" style="width: 80px;"></td>
                        <td class='text-center'><button type='button' id='copy_btn{{ forloop.counter }}'
                                class='btn btn-transparent text-secondary btn-sm   copy_row' data-toggle='tooltip'
                                data-placement='top' title='Clone' style='width:20px'><i
                                    class="fas fa-copy"></i></button>
                        </td>
                        <td class='text-center'><button type='button' id='del_btn{{ forloop.counter }}'
                                class='btn btn-transparent text-danger btn-sm   delete-row' data-toggle='tooltip'
                                data-placement='top' title='delete-row' style='width:20px'><i
                                    class='fa fa-times'></i></button></td>
                    </tr>
                    {% endfor %}
                </tbody>

            </table>
            <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30) ;"
                id="add-row">Add another line</button>

            <div class="row  pb-5">
                <div class="col-sm-6 d-flex flex-column mt-auto">


                </div>
                <div class="col-sm-6">
                    <table class=" table  text-black" style="background-color: rgba(250, 227, 198, 0.8);">
                        <tr>
                            <td>Sub Total</td>
                            <td></td>
                            <td><input type="number" id="subtotal" name="subtotal" step="any" value="{{bill.sub_total}}"
                                    class="bg-transparent border-0 text-right subtotal "></td>
                        </tr>
                        <tr style="display: none;" id="tr_igst">
                            <td>IGST</td>
                            <td></td>
                            <td><input type="number" id='igst' name="igst" step="any" value="{{bill.igst}}"
                                    class="form-control bg-transparent border-0 text-right igst text-dark"></td>
                        </tr>
                        <tr style="display: none;" id="tr_cgst">
                            <td>CGST</td>
                            <td></td>
                            <td><input type="number" id='cgst' name="cgst" step="any" value="{{bill.cgst}}"
                                    class="form-control bg-transparent border-0 text-right cgst text-dark"></td>
                        </tr>
                        <tr style="display: none;" id="tr_sgst">
                            <td>SGST</td>
                            <td></td>
                            <td><input type="number" id='sgst' name="sgst" step="any" value="{{bill.sgst}}"
                                    class="form-control bg-transparent border-0 text-right sgst text-dark"></td>
                        </tr>
                        <tr>
                            <td>Tax Amount</td>
                            <td></td>
                            <td><input type="number" id="total_taxamount" name="total_taxamount" step="any" value="{{bill.tax_amount}}"
                                    class="total_taxamount form-control bg-transparent border-0 text-right text-dark">
                            </td>
                        </tr>
                        <tr>
                          <td>Shipping Charges</td>
                          <td></td>
                          <td><input type="number" id="shipping" name="shipping_charge" value="{{bill.shipping_charge}}"> <i class="fas fa-question"></i></td>
                          <!-- <td><input type="text" id="shipping_charge" name="shipping_charge" step="any" 
                                  class="form-control bg-transparent border-0 text-right shipping_charge text-dark">
                          </td> -->
                      </tr>
                      <tr>
                          <td>Adjustment</td>
                          <td></td>
                          <td><input type="number" id="adjustment" name="add_round_off" placeholder=0 value="{{bill.adjustment}}" step="0.00" min="0" > <i class="fas fa-question"></i></td>
                          <!-- <td><input type="text" id="discount_amnt" name="discount_amnt" step="any" 
                                  class="form-control bg-transparent border-0 text-right discount_amnt text-dark">
                          </td> -->
                      </tr>
                        
                        <tr>
                            <th>Total ( &#x20B9; )</th>
                            <th></th>
                            <th><input type="number" id="total" name="total" step="any" value="{{bill.total}}"
                                    class="form-control bg-transparent border-0 text-right total text-dark"></th>
                        </tr>
                        <tr>
                          <td><strong>Paid ( &#x20B9; )</strong></td>
                          <th></th>
                          <th><input type="number" id="amtPaid" name="amtPaid" step="any" value="{{bill.amt_paid}}"
                                  ></th>
                        </tr>
                    </table>
                </div>
            </div>

            <div class="row py-2 ">

                <div class="col-md-6 py-2 text-center rounded" style="background-color: rgba(250, 227, 198, 0.8);">
                    <label class="text-dark" for="">Attach File(s) to Purchase Bill</label><br>

                    <label for="file-upload" class="btn text-white border-0"
                        style="background-color: rgb(210, 132, 30);">
                        <i class="fas fa-upload text-white"></i> Upload File
                    </label>
                    <input id="file-upload" type="file" name="file" style="display:none;">



                </div>
            </div>

            <!-- <input type="submit" class="btn text-white mt-5 " style="background-color:  rgb(210, 132, 30) ; "
                     value="Save"> -->
                     <div class="row mt-5 mb-3">
        
                      <div class="col-md-4">
                        <div class="d-flex">
                          <!-- <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
                          onclick="saveAsDraftDialog()" value="Save As Draft"> &nbsp; -->
                      <input type="submit" class="btn text-white mt-5" style="background-color: rgb(210, 132, 30) ; "
                          onclick="saveAndOpenDialog()" value="SAVE CHANGES"> &nbsp;
                      <input type="submit" class="btn text-white mt-5" style="background-color:  rgb(59, 59, 58) ; "
                          onclick="cancelDialog()" value="Cancel">
                          
                        </div>
                      </div>
                      <div class="col-md-4"></div>
                      <div class="col-md-4"></div>
                    </div>

          
        </form>



    </div>

    </div>



</section>

<!-- create customer----------------------------------------------------------------------------------------------------------------------------------- -->

<div class="modal fade" id="create_customer">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Customer</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);height: 600px; overflow-y: scroll;">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalCustomer">
    
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="">Customer Type</label><br>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="business" name="radioCust" value="Business" >
                    <label for="option1">Business</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="individual" name="radioCust" value="Individual" >
                    <label for="option2">Individual</label>
                  </div>
                </div>
              </div>
            </div>
            <div class="row mt-5">
              <div class="col-md-3">
                <label for="ctitle">Title</label>
              </div>
              <div class="col-md-3">
                <select name="ctitle" id="ctitle" class="form-control text-dark bg-light">
                  <option value="Mr." selected>Mr.</option>
                  <option value="Mrs.">Mrs.</option>
                  <option value="Ms.">Ms.</option>
                  <option value="Miss.">Miss.</option>
                  <option value="Dr.">Dr.</option>
                </select>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cfname">First name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cfname" name="cfirstname" required>
              </div>
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="clname">Last name</label>
                <label id="cdisplayname" name = "cdisplayname" hidden></label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="clname" name="clastname">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="ccompany">Company Name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="ccompany" name="ccompany_name">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cemail">Customer Email</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="email" class="form-control text-dark bg-light" id="cemail" name="cemail" placeholder="example@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$">    
              </div>              
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="email">Customer Phone</label>
              </div>
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cw_mobile" placeholder="Work Number" maxlength="10" name="cw_mobile">
              </div>        
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cp_mobile" placeholder="Personal Number" maxlength="10" name="cp_mobile">
              </div>          
            </div>

       
            <hr>
            <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
            <div class="row mt-5">
              <div class="col-md-3 mt-2">
                <label for="facebook">Facebook</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="facebook" placeholder="www.example.com" name="facebook">
              </div>       
            </div>
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="twitter">Twitter</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="twitter" placeholder="www.example.com" name="twitter">
              </div>       
            </div>


            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="website">Website</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="website" placeholder="www.example.com" name="website">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cskype">Skype name/Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="cskype" name="cskype">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_desg">Designation</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_desg" name="c_desg">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_dpt">Department</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_dpt" name="c_dpt">
              </div>       
            </div>

            
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="c_gsttype" name="c_gsttype" required>
                  <option value="value" selected>Select a Gst Treatment</option>
                  <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                  <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">Registered Business-Composition Business that is registered under the Composition scheme in GST</option>
                  <option value="Unregistered Business">Unregistered Business-not Registered under GST</option>
                  <option value="Consumer- A customer who is a regular Consumer">Consumer- A customer who is a regular Consumer</option>
                  <option value="Overseas">Overseas- Persons with who you do import or exports of supplies outside india</option>
                  <option value="Special Economic Zone">Special Economic Zone</option>
                </select>
              </div>       
            </div>

           <div class="row gstrow d-none">
              <div class="col-md-3 mt-2">
                <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control bg-white text-dark" id="c_gstin" name="c_gstin" placeholder="29APPCK7465F1Z1">
                <label id="gst_label"></label>
              </div>       
            </div>

           <!--- <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_pan">PAN Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control" id="v_pan" name="v_pan" placeholder="APPCK7465F">
                <label id="pan_label"></label>
              </div>       
            </div> -->

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="" style="color: rgb(190, 88, 88);">Place of Supply *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="placesupply" name="placesupply">
                  <option value="Nill"></option>
                  <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                  <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                  <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                  <option value="[AS] Assam">[AS] Assam</option>
                  <option value="[BR] Bihar">[BR] Bihar</option>
                  <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                  <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                  <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                  <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                  <option value="[DL] Delhi">[DL] Delhi</option>
                  <option value="[GA] Goa">[GA] Goa</option>
                  <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                  <option value="[HR] Haryana">[HR] Haryana</option>
                  <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                  <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                  <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                  <option value="[KA] Karnataka">[KA] Karnataka</option>
                  <option value="[KL] Kerala">[KL] Kerala</option>
                  <option value="[LA] Ladakh">[LA] Ladakh</option>
                  <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                  <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                  <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                  <option value="[MN] Manipur">[MN] Manipur</option>
                  <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                  <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                  <option value="[NL] Nagaland">[NL] Nagaland</option>
                  <option value="[OD] Odisha">[OD] Odisha</option>
                  <option value="[PY] Puducherry">[PY] Puducherry</option>
                  <option value="[PB] Punjab">[PB] Punjab</option>
                  <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                  <option value="[SK] Sikkim">[SK] Sikkim</option>
                  <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                  <option value="[TS] Telangana">[TS] Telangana</option>
                  <option value="[TR] Tripura">[TR] Tripura</option>
                  <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                  <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                  <option value="[WB] West Bengal">[WB] West Bengal</option>
                  <option value="[OT] Other Territory">[OT] Other Territory</option>
                </select>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference* </label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <div class="radio_opt mx-5 mt-2">
                    <input type="radio" id="custtax1" name="radioCust1" value="Taxable" >
                    <label for="option1">Taxable</label>
                  </div>
                  <div class="radio_opt mx-4 mt-2">
                    <input type="radio" id="custtax2" name="radioCust1" value="Tax-exempt" >
                    <label for="option2">Tax-exempt</label>
                  </div>
                </div>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_curn">Currency </label>
              </div>
              <div class="col-md-3 mt-2">
                <select class="form-control text-dark bg-light" id="c_curn" name="c_curn" required>
                  <option selected disabled value="">Choose..</option>
                  <option value="INR">INR</option>
                </select>
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_open">Opening Balance</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="c_open" name="c_open">
              </div>       
            </div>

            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="c_terms">Payment Terms</label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <select class="form-control text-dark bg-light" id="c_terms" name="c_terms" required>
                    <option selected id="crt_term"></option>
                    
                    <option value="30">NET 30</option>
                    
                    <option value="60">NET 60</option>
                   
                    <option value="recpt">Due on receipt</option>
                    {% for p in terms %}
                    <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                    {% endfor %}
                  </select>                
                  <!-- <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>    -->
                </div>
              </div>       
            </div>
            

            <hr>

            <div class="row mt-2">
              <div class="col-md-6 mt-5 text-center text-uppercase">
                <h4 class="mb-0">Billing Address</h4>
              </div>
              <div class="col-md-6 mt-5">
                <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
              </div>
            </div>
            <div class="row mt-2 m-0 p-0 mb-2">
              <div class="col-md-9"> </div>
              <div class="col-md-3 text-right  m-0 p-0">
                <input type="checkbox" onclick="addressSame()" id="csokay" name="csokay">
                <label for="csokay" style="color: #909091;">Same As Billing Address</label>
              </div>
            </div>

            <div class="row mt-5">
              <div class="col-md-1">
                <label for="cstreet1">Address 1</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="cstreet1" name="cstreet1"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csstreet1">Address 1</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="csstreet1" name="csstreet1"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>
            <div class="row mt-5">
              <div class="col-md-1">
                <label for="cstreet2">Address 2</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="cstreet2" name="cstreet2"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csstreet2">Address 2</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="csstreet2" name="csstreet2"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="ccity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="ccity" name="ccity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
              <div class="col-md-1">
                <label for="cscity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cscity" name="cscity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="cstate">State</label>
              </div>
              <div class="col-md-4">
                <select type="text" class="form-control text-dark bg-light" id="cstate" name="cstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csstate">State</label>
              </div>
              <div class="col-md-4 ">
                <select type="text" class="form-control text-dark bg-light" id="csstate" name="csstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                  </option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>

              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="ccountry">Country</label>
              </div>
              <div class="col-md-4 ">
                <input type="text" class="form-control text-dark bg-light" id="ccountry" name="ccountry" placeholder="Country">  
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="cscountry">Country</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cscountry"  name="cscountry" placeholder="Country">
              </div>
              <div class="col-md-1 "></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cpincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cpincode" name="cpincode" maxlength="6" placeholder="PIN Code"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="cspincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cspincode" name="cspincode" maxlength="6" placeholder="PIN Code">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cphone" name="cphone" placeholder="Phone"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="csphone" name="csphone" placeholder="Phone">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="cfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="cfax" name="cfax" placeholder="FAX"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="csfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="csfax" name="csfax" placeholder="FAX">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
                <div class="col-md-6">
                  <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                  <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                  <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                </div>
            </div>
            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="customerSave">Submit
                  </button> 

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
              </div>
          </div>
      </div>
  </div>  
</div>  
<!-- create vendor----------------------------------------------------------------------------------------------------------------------------------- -->

<div class="modal fade" id="create_vendor">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Vendor</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);height: 600px; overflow-y: scroll;">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalVendor">

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="validationCustom01">Title</label>
              </div>
              <div class="col-md-3 mt-2">
                <select name="title" id="title" class="form-control text-dark bg-light">
                  <option value="Mr.">Mr.</option>
                  <option value="Mrs.">Mrs.</option>
                  <option value="Miss">Miss</option>
                  <option value="Ms.">Ms.</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="fname">First name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="fname" name="firstname" required>
              </div>
            </div>
            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="lname">Last name</label>
                <label id="vdisplayname" name = "vdisplayname" hidden></label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="lname" name="lastname">
              </div>
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="company">Company Name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vcompany" name="vcompany_name">
              </div>
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="email">Email</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="email" class="form-control text-dark bg-light" id="vemail" name="vemail" placeholder="example@gmail.com">    
              </div>              
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="email">Vendor Phone</label>
              </div>
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vw_mobile" placeholder="Work Number" maxlength="10" name="vw_mobile">
              </div>        
              <div class="col-md-3 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vp_mobile" placeholder="Personal Number" maxlength="10" name="vp_mobile">
              </div>          
            </div>

       
            <hr>
            <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>

            <div class="row mt-5">
              <div class="col-md-3 mt-2">
                <label for="wsite">Website</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="wsite" placeholder="www.example.com" name="website">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="vskype">Skype name/Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="vskype" name="vskype">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_desg">Designation</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_desg" name="v_desg">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_dpt">Department</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_dpt" name="v_dpt">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="v_gsttype" name="v_gsttype" required>
                  <option selected disabled value="">Choose..</option>
                  <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                  <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                  <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                  <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                  <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                  <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                  <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                  <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                </select>
              </div>       
            </div>

            <div class="row gstrow d-none">
              <div class="col-md-3 mt-2">
                <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_gstin" name="v_gstin" placeholder="29APPCK7465F1Z1">
                <label id="gst_label"></label>
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_pan">PAN Number</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_pan" name="v_pan" placeholder="APPCK7465F">
                <label id="pan_label"></label>
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="" style="color: rgb(190, 88, 88);">Source of Supply *</label>
              </div>
              <div class="col-md-6 mt-2">
                <select class="form-control text-dark bg-light" id="v_srcsupply" name="v_sourceofsupply">
                  <option value="Nill"></option>
                  <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                  <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                  <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                  <option value="[AS] Assam">[AS] Assam</option>
                  <option value="[BR] Bihar">[BR] Bihar</option>
                  <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                  <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                  <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                  <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                  <option value="[DL] Delhi">[DL] Delhi</option>
                  <option value="[GA] Goa">[GA] Goa</option>
                  <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                  <option value="[HR] Haryana">[HR] Haryana</option>
                  <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                  <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                  <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                  <option value="[KA] Karnataka">[KA] Karnataka</option>
                  <option value="[KL] Kerala">[KL] Kerala</option>
                  <option value="[LA] Ladakh">[LA] Ladakh</option>
                  <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                  <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                  <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                  <option value="[MN] Manipur">[MN] Manipur</option>
                  <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                  <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                  <option value="[NL] Nagaland">[NL] Nagaland</option>
                  <option value="[OD] Odisha">[OD] Odisha</option>
                  <option value="[PY] Puducherry">[PY] Puducherry</option>
                  <option value="[PB] Punjab">[PB] Punjab</option>
                  <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                  <option value="[SK] Sikkim">[SK] Sikkim</option>
                  <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                  <option value="[TS] Telangana">[TS] Telangana</option>
                  <option value="[TR] Tripura">[TR] Tripura</option>
                  <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                  <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                  <option value="[WB] West Bengal">[WB] West Bengal</option>
                  <option value="[OT] Other Territory">[OT] Other Territory</option>
                </select>
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_curn">Currency </label>
              </div>
              <div class="col-md-3 mt-2">
                <select class="form-control text-dark bg-light" id="v_curn" name="v_curn" required>
                  <option selected disabled value="">Choose..</option>
                  <option value="INR">INR</option>
                </select>
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_open">Opening Balance</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="v_open" name="v_open">
              </div>       
            </div>

            <div class="row">
              <div class="col-md-3 mt-2">
                <label for="v_terms">Payment Terms</label>
              </div>
              <div class="col-md-6 mt-2">
                <div class="d-flex">
                  <select class="form-control text-dark bg-light" id="v_terms" name="v_terms" required>
                    <option selected id="crt_term"></option> 
                    <option value="30">NET 30</option>
                    
                    <option value="60">NET 60</option>
                   
                    <option value="recpt">Due on receipt</option>
                    {% for p in payments %}
                    <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                    {% endfor %}
                  </select>                
                  <!-- <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>    -->
                </div>
              </div>       
            </div>

            <hr>

            <div class="row">
              <div class="col-md-6 mt-5 text-center text-uppercase">
                <h4 class="mb-0">Billing Address</h4>
              </div>
              <div class="col-md-6 mt-5">
                <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
              </div>
            </div>
            <div class="row mt-2 m-0 p-0 mb-2">
              <div class="col-md-9"> </div>
              <div class="col-md-3 text-right  m-0 p-0">
                <input type="checkbox" onclick="addressSame()" id="vokay" name="vokay">
                <label for="vokay" style="color: #909091;">Same As Billing Address</label>
              </div>
            </div>

            <div class="row mt-5">
              <div class="col-md-1">
                <label for="vstreet">Street</label>
              </div>
              <div class="col-md-4">
                <textarea class="form-control street text-dark bg-light" id="vstreet" name="vstreet"></textarea>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsstreet">Street</label>
              </div>
              <div class="col-md-4 ">
                <textarea class="form-control street text-dark bg-light" id="vsstreet" name="vsstreet"></textarea>
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="vcity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vcity" name="vcity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
              <div class="col-md-1">
                <label for="vscity">City</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vscity" name="vscity" placeholder="City">  
              </div>
              <div class="col-md-1">
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="vstate">State</label>
              </div>
              <div class="col-md-4">
                <select type="text" class="form-control text-dark bg-light" id="vstate" name="vstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                  </option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsstate">State</label>
              </div>
              <div class="col-md-4 ">
                <select type="text" class="form-control text-dark bg-light" id="vsstate" name="vsstate">
                  <option value="" selected>Choose</option>
                  <option value="None Of This">None Of This</option>
                  <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                  </option>
                  <option value="Andhra Predhesh">Andhra Predhesh</option>
                  <option value="Arunachal Predesh">Arunachal Predesh</option>
                  <option value="Assam">Assam</option>
                  <option value="Bihar">Bihar</option>
                  <option value="Chandigarh">Chandigarh</option>
                  <option value="Chhattisgarh">Chhattisgarh</option>
                  <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                  <option value="Damn anad Diu">Damn anad Diu</option>
                  <option value="Delhi">Delhi</option>
                  <option value="Goa">Goa</option>
                  <option value="Gujarat">Gujarat</option>
                  <option value="Haryana">Haryana</option>
                  <option value="Himachal Predesh">Himachal Predesh</option>
                  <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                  <option value="Jharkhand">Jharkhand</option>
                  <option value="Karnataka">Karnataka</option>
                  <option value="Kerala">Kerala</option>
                  <option value="Ladakh">Ladakh</option>
                  <option value="Lakshadweep">Lakshadweep</option>
                  <option value="Madhya Predesh">Madhya Predesh</option>
                  <option value="Maharashtra">Maharashtra</option>
                  <option value="Manipur">Manipur</option>
                  <option value="Meghalaya">Meghalaya</option>
                  <option value="Mizoram">Mizoram</option>
                  <option value="Nagaland">Nagaland</option>
                  <option value="Odisha">Odisha</option>
                  <option value="Puducherry">Puducherry</option>
                  <option value="Punjab">Punjab</option>
                  <option value="Rajasthan">Rajasthan</option>
                  <option value="Sikkim">Sikkim</option>
                  <option value="Tamil Nadu">Tamil Nadu</option>
                  <option value="Telangana">Telangana</option>
                  <option value="Tripura">Tripura</option>
                  <option value="Uttar Predesh">Uttar Predesh</option>
                  <option value="Uttarakhand">Uttarakhand</option>
                  <option value="West Bengal">West Bengal</option>
                  <option value="Other Territory">Other Territory</option>
                </select>
              </div>

              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">
              <div class="col-md-1">
                <label for="vcountry">Country</label>
              </div>
              <div class="col-md-4 ">
                <input type="text" class="form-control text-dark bg-light" id="vcountry" name="vcountry" placeholder="Country">  
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vscountry">Country</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vscountry"  name="vscountry" placeholder="Country">
              </div>
              <div class="col-md-1 "></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="vpincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vpincode" name="vpincode" maxlength="6" placeholder="PIN Code"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vspincode">Pincode</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vspincode" name="vspincode" maxlength="6"  placeholder="PIN Code">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="vphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vphone" name="vphone"  placeholder="Phone"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsphone">Phone</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vsphone" name="vsphone"  placeholder="Phone">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row mt-2">

              <div class="col-md-1">
                <label for="vfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vfax" name="vfax"  placeholder="FAX"> 
              </div>
              <div class="col-md-1"></div>

              <div class="col-md-1">
                <label for="vsfax">Fax</label>
              </div>
              <div class="col-md-4">
                <input type="text" class="form-control text-dark bg-light" id="vsfax" name="vsfax"  placeholder="FAX">  
              </div>
              <div class="col-md-1"></div>

            </div>

            <div class="row">
                <div class="col-md-6">
                  <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                  <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                  <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="vendorSave">Submit
                  </button> 

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-6"></div>
              <!-- <div class="col-md-4"></div> -->
            </div>
          </form>
              </div>
          </div>
      </div>
  </div>  
</div>  

<!-- Create Item  ------------------------------------------------------------------------------------------------------------------------------>
<div class="modal fade" id="create_item" style="overflow: auto;">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
      <div class="modal-content modal-xl  p-5" style="background-color: #000000;height: 700px;  overflow-y: scroll;overflow: auto;">
        <div class="modal-header">
          <h3 class="mb-3  text-white  " style="font-size: 2rem;">New item</h3>
          <button type="button" class="close text-light" data-dismiss="modal" aria-label=""
            style="font-size: 20px;;background-color: #000000;border:none;">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="row   ">
  
          <div class="col-md-12 mt-3 ">
            <fieldset class="form-group">
              <div class="row">
                <label class="col-form-label col-sm-2 pt-0">Type <i class="fa fa-question-circle"></i></label>
                <div class="col-sm-10 form-inline">
                  <div class="form-check ">
                    <input required class="form-check-input" type="radio" name="type" id="gridRadios1" value="Goods">
                    <label class="form-check-label" for="gridRadios1">
                      Goods
                    </label>
                  </div>
                  <div class="form-check ml-5">
                    <input required class="form-check-input" type="radio" name="type2" id="gridRadios2" value="Services">
                    <label class="form-check-label" for="gridRadios2">
                      Services
                    </label>
                  </div>
  
                </div>
              </div>
            </fieldset>
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Name *</label>
              <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                <input required type="text" class="form-control bg-light text-dark" name="name">
              </div>
            </div>

            <div class="form-group row">
              <label for="HSN" class="col-sm-2 col-form-label" style="color: rgb(190, 88, 88);">HSN</label>
              <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                <input type="text" class="form-control bg-light text-dark" id="HSN" name="HSN" required>
              </div>
            </div>
            
            <div class="form-group row">
              <label class="col-sm-2 col-form-label">Unit <i class="fa fa-question-circle"></i></label>
              <div class="col-sm-10 col-md-7 col-9" style="margin-left: -2.2rem;">
                <select name="unit" class="form-control bg-light text-dark ">
  
                  {% for u in units %}
                  <option value="{{u.id}}">{{u.unit}}</option>
                  {% endfor %}
                </select>
  
              </div>
  
              <!-- <a href="" data-toggle="modal" data-target="#add_unit">
                <div style="width: 6rem;" type="button" class="btn btn-secondary">Ad Unit</div>
              </a> -->
  
            </div>
  
            <section>
  
              <div class="row">
                <div class="col-sm-12">
                  <label class="text-danger mb-3 mr-3" for="">Tax Preference :</label>
                </div>
              </div>
              <div class="row mb-3 mr-3">
                <div class="col-sm-12">
  
                  <input type="radio" name="radio1" value="tax" onclick="showAllSelect()">
                  <label for="">Taxable</label> &nbsp;&nbsp;&nbsp;
                  <input type="radio" name="radio2" value="none" onclick="hideAllSelect()">
                  <label for="">None-Taxable</label>
  
  
                </div>
              </div>
  
              <div class="row mb-3">
                <div class="col-md-3 ">
  
                  <div id="select1_div" style="display: none;">
                    <label for="select1">Intra-State TAX</label>
                    <select name="intra" class="form-control bg-light text-dark" id="select1">
                      <option value="GST0[0%]">GST0[0%]</option>
                      <option value="GST5[5%]">GST5[5%]</option>
                      <option value="GST12[12%]">GST12[12%]</option>
                      <option value="GST18[18%]">GST18[18%]</option>
                      <option value="GST28[28%]">GST28[28%]</option>
                    </select>
                  </div>
  
  
                </div>
                <div class="col-md-3">
                  <div id="select2_div" style="display: none;">
                    <label for="select2">Inter-State TAX</label>
                    <select name="inter" class="form-control bg-light text-dark" id="select2">
                      <option value="IGST0[0%]">IGST0[0%]</option>
                      <option value="IGST5[5%]">IGST5[5%]</option>
                      <option value="IGST12[12%]">IGST12[12%]</option>
                      <option value="IGST18[18%]">IGST18[18%]]</option>
                      <option value="IGST28[28%]">IGST28[28%]</option>
                    </select>
                  </div>
                </div>
              </div>
  
  
              <script>
                function showAllSelect() {
                  var select1_div = document.getElementById("select1_div");
                  var select2_div = document.getElementById("select2_div");
                  select1_div.style.display = "block";
                  select2_div.style.display = "block";
                }
  
                function hideAllSelect() {
                  var select1_div = document.getElementById("select1_div");
                  var select2_div = document.getElementById("select2_div");
                  select1_div.style.display = "none";
                  select2_div.style.display = "none";
                }
              </script>
  
  
  
            </section>
  
            <section>
              <div class="row">
                <div class="col-md-6">
                  <input type="checkbox" name="selling" checked> <label>selling information</label>
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Selling price *</label>
                    <div class="col-sm-10 col-md-7 col-9 ml-5">
                      <div class="input-group mb-2">
                        <div class="input-group-prepend">
                          <div class="input-group-text">INR</div>
                        </div>
                        <input required type="text" name="sel_price" class="form-control bg-light text-dark">
                      </div>
                    </div>
                  </div>
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Account *</label>
                    <div class="col-sm-10 col-md-7 col-9 ml-5">
                      <select name="sel_acc" class="form-control bg-light text-dark">
                        
                        {% for account in s_acc %}
                        <option value="" disabled class="btn btn-dark text-white"><b>{{account.account_type }}</b></option>
                        <option value="{{account.id}}">{{ account.Account_name }}</option>  
                        {% endfor %}
  
                      </select>
                    </div>
                    <!-- <a href="" data-toggle="modal" data-target="#add_account">
                      <div style="width: 6rem;" type="button" class="btn btn-secondary">Ad Acount</div>
                    </a> -->
  
                  </div>
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Description </label>
                    <div class="col-sm-10 col-md-7 col-9 ml-5">
                      <input required type="text" name="sel_desc" class="form-control bg-light text-dark">
                    </div>
                  </div>
  
                </div>
                <div class="col-md-6">
                  <input type="checkbox" name="purchase" checked> <label for="">Purchase information</label>
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Cost Price *</label>
                    <div class="col-sm-10 col-md-7 col-9">
                      <div class="input-group mb-2">
                        <div class="input-group-prepend">
                          <div class="input-group-text">INR</div>
                        </div>
                        <input required type="text" class="form-control bg-light text-dark" name="cost_price">
                      </div>
                    </div>
                  </div>
                  <div class="form-group row in">
                    <label class="col-sm-2 col-form-label">Account *</label>
                    <div class="col-sm-10 col-md-7 col-9">
  
                      <script>
  
                      </script>
  
                      <select name="cost_acc" class="form-control bg-light text-dark">
                        {% for account in p_acc %}
                        <option value="" disabled class="btn btn-dark text-white"><b>{{account.account_type }}</b></option>
                        <option value="{{account.id}}">{{ account.Account_name }}</option>  
                        {% endfor %}
  
                      </select>
  
  
                    </div>
  
                    <!-- <a href="" data-toggle="modal" data-target="#add_sale">
                      <div style="width: 6rem;" type="button" class="btn btn-secondary">Ad Account</div>
                    </a> -->
                  </div>
                  <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Description </label>
                    <div class="col-sm-10 col-md-7 col-9">
                      <input type="text" name="cost_desc" class="form-control bg-light text-dark">
                    </div>
                  </div>
                </div>
              </div>
            </section>
  
            <div class="form-inline">
              <input type="submit" class="mr-3 btn btn-success" data-dismiss="modal" onclick="create_item()" value="Save">&nbsp;
              <input type="submit" class="btn btn-secondary but" data-dismiss="modal" value="Cancel">
            </div>
  
  
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Add unit --------------------------------------------------------------------------------------------------------------------------------->
<div class="rowmt-5 modal " id="add_unit">
    <div class="modal-dialog modal-md modal-dialog-centered " role="document">
      <div class="modal-content modal-md bg-dark" style="background-color: #191c24;">
        <div class="card bg-dark">
          <div class="card-body bg-dark">
  
            <button type="button" class="close text-light bg-dark" data-dismiss="modal" aria-label=""
              style="background-color: #191c24;border:none; float: right; font-size: 20px;">
              <span aria-hidden="true">&times;</span>
            </button>
            <div class="text-info bg-dark" style="font-size: 20px;font-weight: 600;" id="heads2">Add Unit</div>
            <form style="margin-top: 3rem;" action="" method="post">
              {% csrf_token %}
              <label class="text-light">Unit</label> <br>
              <input required type="text" class="form-control bg-light text-dark" name="unit_name" id=""> <br>
  
              <br>
  
              <p class="text-light" disabled>eg:KL,PCS,BOX,LTR</p> <br>
              <div class="row">
                <div class="col-sm-12" style="text-align: center;">
                  <input style="width: 5rem; height: 2rem; color: black;" class="btn btn-success" type="submit"
                    value="submit">
                </div>
              </div>
  
  
            </form>
  
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- Add account------------------------------------------------------------------------------------------------------------------------------->

<!-- <div class="modal fade" id="create_account">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">New Account</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalAccount">
    
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="">Account Type</label><br>
              </div>
              <div class="col-md-6 mt-2"> -->
                <!-- <input type="text" class="form-control text-dark bg-light" id="acct_type" name="acct_type" required> -->
                <!-- <select class="form-control text-dark bg-light" id="acct_type" name="acct_type">
                  <option value="Accounts Payable">Accounts Payable</option>
                  <option value="Accounts Receivable">Accounts Receivable</option>
                  <option value="Other Current Asset">Other Current Asset</option>
                  <option value="Expence">Expence</option>
                  <option value="Cost of Goods Sold">Cost of Goods Sold</option>
                  <option value="Income">Income</option>
                  <option value="Equity">Equity</option>
                  <option value="Other Current Liability">Other Current Liability</option>
                  <option value="Other Expense">Other Expense</option>
                  <option value="Fixed Asset">Fixed Asset</option>
                  <option value="Stock">Stock</option>
                  <option value="Cash">Cash</option>
                  <option value="Other Liability">Other Liability</option>
                  <option value="Long Term Liability">Long Term Liability</option>
                </select>
              </div>
            </div>
            
            <div class="row mt-2">
              <div class="col-md-3 mt-2">
                <label for="cfname">Account name</label>
              </div>
              <div class="col-md-6 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="acct_name" name="acct_name" required>
              </div>
            </div>            

            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="accountSave">Submit
                  </button> 

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>  
</div>  -->
<!-- repeat modal -->


<div class="modal fade" id="newrepeat">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">Add Repeat</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalRepeat">
            <div class="row mt-2">
              <div class="col-md-2 mt-2"></div>
              <div class="col-md-4 mt-2">
                
              </div>

            </div>


            <div class="row mt-2">
              <div class="col-md-2 mt-2">
                <center><label for="termname" style="color: rgb(190, 88, 88);">Add Repeat*</label></center>
              </div>

              <div class="col-md-4 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="repeats_input" name="repeats_input" required>      
              </div>

             

            </div>
            
            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="RepeatSave">Save
                  </button> 
                  

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>  
</div>  
<!-- Add sale---------------------------------------------------------------------------------------------------------------------------------->
<div class="rowmt-5 modal " id="add_sale">
    <div class="modal-dialog modal-md modal-dialog-centered " role="document">
      <div class="modal-content modal-md bg-dark" style="background-color: #191c24;">
        <div class="card bg-dark">
          <div class="card-body bg-dark">
  
            <button type="button" class="close text-light bg-dark" data-dismiss="modal" aria-label=""
              style="background-color: #191c24;border:none; float: right; font-size: 20px;">
              <span aria-hidden="true">&times;</span>
            </button>
            <div class="text-info bg-dark" style="font-size: 20px;font-weight: 600;" id="heads2">Add Sale</div>
            <form style="margin-top: 3rem;" action="" method="post">
              {% csrf_token %}
              <label class="text-light">Accout type</label> <br>
              <input required type="text" class="form-control bg-light text-dark" name="acc_type" id=""> <br>
              <label class="text-light">Accout Name</label> <br>
              <input required type="text" class="form-control bg-light text-dark" name="acc_name" id=""> <br>
              <label class="text-light">Accout Code</label> <br>
              <input type="text" class="form-control bg-light text-dark" name="acc_code" id=""> <br>
              <label class="text-light">Accout Description</label> <br>
              <input type="text" class="form-control bg-light text-dark" name="acc_desc" id=""> <br> <br>
              <div class="row">
                <div class="col-sm-12" style="text-align: center;">
                  <input style="width: 5rem; height: 2rem; color: black;" class="btn btn-success" type="submit"
                    value="submit">
                </div>
              </div>
  
  
            </form>
  
          </div>
        </div>
      </div>
    </div>
  
  </div>

<!-- Add payment terms------------------------------------------------------------------------------------------------------------------------->

  <div class="modal fade" id="newpayment">
    <div class="modal-dialog modal-xl">
      <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
        <div class="modal-header " style="background: rgb(32, 35, 37);">
            <h3 class="m-3 text-uppercase">Add Payment Term</h3>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" style="background: rgb(32, 35, 37);">
          <div class="card p-3 m-3">
            <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment">
              <div class="row mt-2">
                <div class="col-md-2 mt-2"></div>
                <div class="col-md-4 mt-2">
                  <center><label for="termname" style="color: rgb(190, 88, 88);">Term Name *</label></center>
                </div>

                <div class="col-md-4 mt-2">
                  <center><label for="termdays" style="color: rgb(190, 88, 88);">Number of Days *</label></center>
                </div>
                <div class="col-md-2 mt-2"></div>
              </div>


              <div class="row mt-2">
                <div class="col-md-2 mt-2"></div>

                <div class="col-md-4 mt-2">
                  <input type="text" class="form-control text-dark bg-light" id="term_name" name="term_name" required>      
                </div>

                <div class="col-md-4 mt-2">
                  <input type="text" class="form-control text-dark bg-light" id="term_days" name="term_days" required>
                </div>
                <div class="col-md-2 mt-2"></div>

              </div>
              
              <div class="row mt-5">
                <div class="col-md-4"></div>
                <div class="col-md-4">
                  <div class="d-flex">
                    <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                    type="submit" data-dismiss="modal" id="paySave">Save
                    </button> 
                    

                    <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                      data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">Cancel</span>
                    </button>
                  </div>
                </div>
                <div class="col-md-4"></div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>  
  </div>  

<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.4.js" integrity="sha256-a9jBBRygX1Bh5lt8GZjXDzyOB+bWve9EiO7tROUtj/E="
    crossorigin="anonymous"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js" integrity="sha512-somehash"
    crossorigin="anonymous"></script>

<!-- Get customer data -->
<script>
  $(document).ready(function() {
debugger
select = $('#customer_sel').val();
            // console.log(select);
            $.ajax({
                type: "GET",
                url: "{% url 'get_customer_data_bill' %}",
                data: {
                    id: select
                },
                success: function (response) {
                    // console.log(response)
                    email = response.email
                    pos = response.pos
                    gst_treatment = response.gst_treatment
                    gst_number = response.gst_number

                    $("#cgst_trt_row").removeClass('d-none');
                    $("#cgst_trt_row").addClass('d-flex');
                    $("#pos_row").removeClass('d-none');
                    $("#pos_row").addClass('d-flex');
                    $("#customer_email_row").removeClass('d-none');
                    $("#customer_email_row").addClass('d-flex');
                    $("#cgstin_row").removeClass('d-none');
                    $("#cgstin_row").addClass('d-flex');

                    document.getElementById('customer_email').value = email
                    document.getElementById('pos').value = pos
                    document.getElementById('c_gsttype').value = gst_treatment
                    document.getElementById('cgstin_inp').value = gst_number

                    if( response.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)
              }
              else if( response.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)  
              }
              else if( response.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)
              }
              
              else{
                $("#cgstin_row").addClass('d-none');
              }

                // gst or igst in tax

              $("#cust_state").val(response.state);
   debugger 
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;
                     if (pos === sos) {
                           $('#tax1 optgroup[label="GST"]').show();
                           $('#tax1 optgroup[label="IGST"]').hide(); 
                       } else {
                           $('#tax1 optgroup[label="GST"]').hide();
                           $('#tax1 optgroup[label="IGST"]').show();  
                       }
                      
                }

            });

           
});

document.addEventListener("DOMContentLoaded", function() { debugger
                        var pos = document.getElementById("pos").value.split("-")[1];
                        var sos = document.getElementById("state").value;
                        if (pos === sos) {
                           $('#tax1 optgroup[label="GST"]').show();
                           $('#tax1 optgroup[label="IGST"]').hide(); 
                           a =  $("#taxType").text()
                           $("#taxType").text(a +" GST");
                       } else {
                           $('#tax1 optgroup[label="GST"]').hide();
                           $('#tax1 optgroup[label="IGST"]').show();  
                           a =  $("#taxType").text()
                           $("#taxType").text(a +" IGST");
                       }  
                     });
    $(document).ready(function () {
        $('#customer_sel').on('change', function () {
            select = $('#customer_sel').val();
            // console.log(select);
            $.ajax({
                type: "GET",
                url: "{% url 'get_customer_data_bill' %}",
                data: {
                    id: select
                },
                success: function (response) {
                    // console.log(response)
                    email = response.email
                    pos = response.pos
                    gst_treatment = response.gst_treatment
                    gst_number = response.gst_number

                    $("#cgst_trt_row").removeClass('d-none');
                    $("#cgst_trt_row").addClass('d-flex');
                    $("#pos").removeClass('d-none');
                    $("#pos").addClass('d-flex');
                    $("#customer_email").removeClass('d-none');
                    $("#customer_email").addClass('d-flex');
                    $("#cgstin_row").removeClass('d-none');
                    $("#cgstin_row").addClass('d-flex');

                    document.getElementById('customer_email').value = email
                    document.getElementById('pos').value = pos
                    document.getElementById('c_gsttype').value = gst_treatment
                    document.getElementById('cgstin_inp').value = gst_number
                    if( response.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)
              }
              else if( response.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)  
              }
              else if( response.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ response.gst_number)
              }
              
              else{
                $("#cgstin_row").addClass('d-none');
              }

                // gst or igst in tax

              $("#cust_state").val(response.state);

                
                    

                }

            });


        });
    });
</script>


<!-- Get vendor data -->
<script>

$(document).ready(function () {
        
            select = $('#vendor_sel').val();
            // console.log(select);
            $.ajax({
                type: "GET",
                url: "{% url 'get_vendor_data_bill' %}",
                data: {
                    id: select
                },
                success: function (response) { 
                    email = response.email
                    sos = response.sos 
                    gst_treatment = response.gst_treatment
                    gst_number = response.gst_number
 
                    $("#gst_trt_row").removeClass('d-none');
                    $("#gst_trt_row").addClass('d-flex');
                    $("#gstin_row").removeClass('d-none');
                    $("#gstin_row").addClass('d-flex');
                    $("#sos_row").removeClass('d-none');
                    $("#sos_row").addClass('d-flex');
                    $("#vendor_email_row").removeClass('d-none');
                    $("#vendor_email_row").addClass('d-flex');


                    document.getElementById('vendor_email').value = email
                    document.getElementById('sos').value = sos
                    document.getElementById('gstin_inp').value = gst_number
                    document.getElementById('v_gsttype').value = gst_treatment

                    if( response.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(' '+ response.gst_number)
              }
              else if( response.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(' '+ response.gst_number)  
              }
              else if( response.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(' '+ response.gst_number)
              }
              
              else{
                $("#gstin_row").addClass('d-none');
              }


                }

            });


        });
   

    $(document).ready(function () {
        $('#vendor_sel').on('change', function () {
            select = $('#vendor_sel').val();
            // console.log(select);
            $.ajax({
                type: "GET",
                url: "{% url 'get_vendor_data_bill' %}",
                data: {
                    id: select
                },
                success: function (response) { 
                    email = response.email
                    sos = response.sos 
                    gst_treatment = response.gst_treatment
                    gst_number = response.gst_number
 
                    $("#gst_trt_row").removeClass('d-none');
                    $("#gst_trt_row").addClass('d-flex');
                    $("#gstin_row").removeClass('d-none');
                    $("#gstin_row").addClass('d-flex');
                    $("#sos_row").removeClass('d-none');
                    $("#sos_row").addClass('d-flex');
                    $("#vendor_email").removeClass('d-none');
                    $("#vendor_email").addClass('d-flex');


                    document.getElementById('vendor_email').value = email
                    document.getElementById('sos').value = sos
                    document.getElementById('gstin_inp').value = gst_number
                    document.getElementById('v_gsttype').value = gst_treatment

                    if( response.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(' '+ response.gst_number)
              }
              else if( response.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(' '+ response.gst_number)  
              }
              else if( response.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#gstin_row").removeClass('d-none');
                $("#gstin_row").addClass('d-flex');
                $('#gstin_inp').val(' '+ response.gst_number)
              }
              
              else{
                $("#gstin_row").addClass('d-none');
              }


                }

            });


        });
    });
</script>

<!-- Add row, copy row, delete row -->
<script>

    // set todays date on estimate date field
    // var today = new Date().toISOString().substr(0, 10);
    // document.getElementById("bill_date").value = today;

    // Get the bill date and due date elements
    var billDateInput = document.getElementById("bill_date");
    var dueDateInput = document.getElementById("due_date");

    // Add an event listener to the payment terms select element
    var paymentTermsSelect = document.getElementById("p_terms");
    paymentTermsSelect.addEventListener("change", function () {
        var selectedOption = paymentTermsSelect.options[paymentTermsSelect.selectedIndex];
        var paymentTermsValue = selectedOption.value;

        var billDate = new Date(billDateInput.value);
        var dueDate = new Date(billDate.getTime() + (paymentTermsValue * 24 * 60 * 60 * 1000));
        dueDateInput.value = dueDate.toISOString().split("T")[0];
    });



    // Add new row
    $(document).ready(function () {
        $('#add-row').click(function () {
            var table = document.getElementById("item_table");
            var RowCount = table.rows.length;
            // console.log(RowCount);
            var newRow = $(`
            <tr id='row${RowCount}' >
                <td>
                    <div class='form-group'>
                        <select
                            class='form-control bg-transparent text-black border-0 item_select' name='item[]'
                            id='item${RowCount}'>
                            <option class='text-dark'>Select Items</option>
                            <option class='text-dark' id='items_nms1' ></option>
                            {% for i in items %}
                            <option class="text-dark" value="{{i.Name}}">{{i.Name}}</option>
                            {% endfor %}
                        </select></div>
                </td>
                <td class='text-right'><input type='number' id='HSN${RowCount}'
                  class='bg-transparent border-0 text-black text-right HSN' name='HSN[]' style="width: 50px;" value='0' min="0"></td>
                
                <td class='text-right'><input type='number' id='qty${RowCount}' style="width: 50px;"
                        class='bg-transparent border-0 text-black text-right qty' name='quantity[]' value='0' >
                </td>
                <td class='text-right'><input type='number' id='rate${RowCount}' style="width: 80px;"
                        class='bg-transparent border-0 text-black text-right rate' name='rate[]' value='0.00'
                        ></td>
               
                <td class='text-right'> <select name='tax[]' id='tax${RowCount}' style="width: 90px;"
                        class="form-control bg-transparent text-black text-right border-0 tax"
                        onclick='handleTaxChange(${RowCount})'>
                        <optgroup label="GST" >
                                <option value=0>0% GST</option>
                                <option value=3>3% GST</option>
                                <option value=5>5% GST</option>
                                <option value=12>12% GST</option>
                                <option value=18>18% GST</option>
                                <option value=28>28% GST</option>
                            </optgroup>
                            <optgroup label="IGST" >
                                <option value=0>0% IGST</option>
                                <option value=3>3% IGST</option>
                                <option value=5>5% IGST</option>
                                <option value=12>12% IGST</option>
                                <option value=18>18% IGST</option>
                                <option value=28>28% IGST</option>
                            </optgroup>
                       
                    </select></td>
                <td style="display: none;">
                    <input type="text" name='taxamount[]' id="taxamount${RowCount}" class="form-control taxamount" />
                            </td>

                    <td class='text-right'><input type='number' id='discount${RowCount}' style="width: 50px;"
                      class='bg-transparent border-0 text-black text-right discount' name='discount[]' value='0.0' min="0"></td>
                <td class='text-right'><input type='number' id='amount${RowCount}' style="width: 80px;"
                        class='bg-transparent border-0 text-black text-right amount' name='amount[]' value='0.00'></td>
                <td class='text-center'><button type='button' id='copy_btn${RowCount}'
                        class='btn btn-transparent text-secondary btn-sm   copy_row' data-toggle='tooltip'
                        data-placement='top' title='Clone' style='width:20px'><i
                            class="fas fa-copy"></i></button>
                </td>
                <td class='text-center'><button type='button' id='del_btn${RowCount}'
                        class='btn btn-transparent text-danger btn-sm  delete-row'
                        style='width:20px'><i class='fa fa-times'></i></button></td>
            </tr>`);
            $('#item_table').append(newRow);
        });

        //Duplicate row function
        $('#item_table').on('click', '.copy_row', function () {
            // console.log('hi');
            var table = document.getElementById("item_table");
            var RowCount = table.rows.length;
            // console.log(RowCount);

            // Get the values from the current row
            var currentItem = $(this).closest('tr').find("select[name='item[]']").val();
            var currentHSN = $(this).closest('tr').find("input[name='HSN[]']").val();
            
            var currentQuantity = $(this).closest('tr').find("input[name='quantity[]']").val();
            var currentRate = $(this).closest('tr').find("input[name='rate[]']").val();
            var currentTax = $(this).closest('tr').find("select[name='tax[]']").val();
            var currentTaxText = $(this).closest('tr').find("select[name='tax[]'] option:selected").text();
            var currentTaxAmount = $(this).closest('tr').find("input[name='taxamount[]']").val();
            var currentDiscount = $(this).closest('tr').find("input[name='discount[]']").val();
            var currentAmount = $(this).closest('tr').find("input[name='amount[]']").val();
            // console.log(currentItem);
            
            // console.log(currentQuantity);
            // console.log(currentRate);
            // console.log(currentTax);
            // console.log(currentTaxAmount);
            // console.log(currentAmount);

            var newRow = $(`
            <tr id='row${RowCount}' >
                <td>
                    <div class='form-group'>
                        <select
                            class='form-control bg-transparent text-black border-0 item_select' name='item[]'
                            id='item${RowCount}'>
                            <option class='text-dark ' value='${currentItem}'>${currentItem}</option>
                            {% for i in items %}
                            <option class="text-dark" value="{{i.Name}}">{{i.Name}}</option>
                            {% endfor %}
                        </select></div>
                </td>debugger
                <td style="width: 50%;">
                        <input type='number' id='HSN${RowCount}' value="${currentHSN}" 
                        class='bg-transparent border-0 text-black text-right HSN' name='HSN[]' style="width: 50px;" value='0' min="0">
                </td>
                
                <td class='text-right'><input type='number' id='qty${RowCount}' value="${currentQuantity}" style="width: 50px;"
                        class='bg-transparent border-0 text-black text-right qty' name='quantity[]' value='0.00' >
                </td>
                <td class='text-right'><input type='number' id='rate${RowCount}' value="${currentRate}" style="width: 80px;"
                        class='bg-transparent border-0 text-black text-right rate' name='rate[]' value='0.00'
                        ></td>
               
                <td class='text-right'> <select name='tax[]' id='tax${RowCount}' style="width: 80px;"
                        class="form-control bg-transparent text-black text-right border-0 tax"
                        onclick='handleTaxChange(${RowCount})'>
                        <option  value='${currentTax}'>${currentTaxText}</option>
                        <optgroup label="GST" >
                                <option value=0>0% GST</option>
                                <option value=3>3% GST</option>
                                <option value=5>5% GST</option>
                                <option value=12>12% GST</option>
                                <option value=18>18% GST</option>
                                <option value=28>28% GST</option>
                            </optgroup>
                            <optgroup label="IGST" >
                                <option value=0>0% IGST</option>
                                <option value=3>3% IGST</option>
                                <option value=5>5% IGST</option>
                                <option value=12>12% IGST</option>
                                <option value=18>18% IGST</option>
                                <option value=28>28% IGST</option>
                            </optgroup>
                       
                    </select></td>
                <td style="display: none;">
                    <input type="text" name='taxamount[]' id="taxamount${RowCount}" class="form-control taxamount" value="${currentTaxAmount}"/>
                            </td>
                            <td class='text-right'><input type='number' id='discount${RowCount}' value="${currentDiscount}"
                              class='bg-transparent border-0 text-black text-right discount' name='discount[]' style="width: 50px;" value='0.0'></td>
                <td class='text-right'><input type='number' id='amount${RowCount}' value="${currentAmount}"
                        class='bg-transparent border-0 text-black text-right amount' name='amount[]'style="width: 80px;" value='0.00'></td>
                <td class='text-center'><button type='button' id='copy_btn${RowCount}'
                        class='btn btn-transparent text-secondary btn-sm   copy_row' data-toggle='tooltip'
                        data-placement='top' title='Clone' style='width:20px'><i
                            class="fas fa-copy"></i></button>
                </td>
                <td class='text-center'><button type='button' id='del_btn${RowCount}'
                        class='btn btn-transparent text-danger btn-sm  delete-row'
                        style='width:20px'><i class='fa fa-times'></i></button></td>
            </tr>`);

            $('#item_table').append(newRow);
            calc_total();
        });

        // Delete row
        $('#item_table').on('click', '.delete-row', function () {
            $(this).closest('tr').remove();
            calc();
        });

    });

</script>

<!-- Update tax header according to check box selection -->
<script>
    function updateTaxHeader() {
        var checkbox = document.getElementById("checkbox");
        var taxHeader = document.getElementById("tax_head");

        if (checkbox.checked) {
            taxHeader.innerText = "Tax (Reverse Charge)";
        } else {
            taxHeader.innerText = "Tax";
        }
    }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- set display name -->
<script>
  $(document).ready(function() {
    $("#fname, #lname").change(function() {
      $("#vdisplayname").text($("#title").val() +" " + $("#fname").val() + " " + $("#lname").val());
    });
  });
  $(document).ready(function() {
    $("#cfname, #clname").change(function() {
      $("#cdisplayname").text($("#ctitle").val() +" " + $("#cfname").val() + " " + $("#clname").val());
    });
  });
</script>

<!-- create vendor -->
<script>
  $(document).on("click","#vendorSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'add_vendor_bills' %}",

    data:{
        title : $("#title").val(),
        firstname : $("#fname").val(),
        lastname : $("#lname").val(),
        company_name : $("#vcompany").val(),
        display_name : $('#vdisplayname').text(),
        email : $("#vemail").val(),
        website :$("#wsite").val(),
        work_mobile :$("#vw_mobile").val(),
        pers_mobile :$("#vp_mobile").val(),
        skype :$("#vskype").val(),
        desg :$("#v_desg").val(),
        dpt :$("#v_dpt").val(),
        gsttype :$("#v_gsttype").val(),
        gstin :$("#v_gstin").val(),
        panno : $("#v_pan").val(),
        sourceofsupply :$("#v_srcsupply").val(),
        currency : $("#v_curn").val(),
        openingbalance : $("#v_open").val(),
        paymentterms : $("#v_terms").val(),
        street : $("#vstreet").val(),
        city : $("#vcity").val(),
        state : $("#vstate").val(),
        pincode : $("#vpincode").val(),
        fax : $("#vfax").val(),
        phone : $("#vphone").val(),
        country : $("#vcountry").val(),
        shipstreet : $("#vsstreet").val(),
        shipcity : $("#vscity").val(),
        shipstate : $("#vsstate").val(),
        shippincode : $("#vspincode").val(),
        shipcountry : $("#vscountry").val(),
        shipfax : $("#vsfax").val(),
        shipphone : $("#vsphone").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
          v_name = response.fullname
          sos = response.sos
          email = response.email
          gstin = response.gstin
          console.log(v_name);
          console.log(sos);
          console.log(email);
          document.getElementById("crt_vendor").innerHTML = v_name
          document.getElementById('vendor_email').value = email
          document.getElementById('sos').value = sos
          document.getElementById('gst_no').value = gstin
          document.getElementById("modalCustomer").reset();
      },
  });        
});
</script>

<!-- create customer -->
<script>
  $(document).on("click","#customerSave",function(){

if ($('input[name="radioCust"]:checked').val() == 'Business'){

  custType = $('#business').val();
}
else{
  custType = $('#individual').val();
}
  
if ($('input[name="radioCust1"]:checked').val() == 'Taxable'){
  cust_tax = $('#custtax1').val();
}
else{
    cust_tax = $('#custtax2').val();
}
$.ajax({
  
  type : 'POST',
  url:"{% url 'entr_custmr_for_bills' %}",

  data:{
      customer_type : custType,
      display_name : $('#cdisplayname').text(),
      company_name : $('#ccompany').val(),
      email : $("#cemail").val(),
      work_mobile :$("#cw_mobile").val(),
      pers_mobile :$("#cp_mobile").val(),
      facebook :$("#facebook").val(),
      twitter :$("#twitter").val(),
      website :$("#website").val(),
      skype :$("#cskype").val(),
      desg :$("#c_desg").val(),
      dpt :$("#c_dpt").val(),
      gsttype :$("#c_gsttype").val(),
      placeofsupply :$("#placesupply").val(),
      tax_preference :cust_tax,
      currency : $("#c_curn").val(),
      openingbalance : $("#c_open").val(),
      paymentterms : $("#c_terms").val(),
      street1 : $("#cstreet1").val(),
      street2 : $("#cstreet2").val(),
      city : $("#ccity").val(),
      state : $("#cstate").val(),
      pincode : $("#cpincode").val(),
      fax : $("#cfax").val(),
      phone : $("#cphone").val(),
      country : $("ccountry").val(),
      csrfmiddlewaretoken: '{{ csrf_token }}'
      
    },
  
    success: function(response) {
          c_name = response.name
          plos = response.pos
          email = response.email
          console.log(c_name);
          console.log(plos);
          console.log(email);
          document.getElementById("crt_cust").innerHTML = c_name
          document.getElementById('customer_email').value = email
          document.getElementById('pos').value = plos
          document.getElementById("modalCustomer").reset();
      // reloadCustomer();
    },
});        
});

</script>

<!-- create account -->
<script>
  $(document).on("click","#accountSave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'create_account_bills' %}",

    data:{
        type : $("#acct_type").val(),
        name : $("#acct_name").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
          acc_name = response.name
          console.log(acc_name)
          document.getElementById("crt_acc").innerHTML = acc_name
          document.getElementById("crt_acc1").innerHTML = acc_name
          document.getElementById("modalCustomer").reset();
      },
  });        
});
</script>

<!-- create payment terms -->
<script>
  $(document).on("click","#paySave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'create_payment_terms_bills' %}",

    data:{
        name : $("#term_name").val(),
        days : $("#term_days").val(),
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
          term_name = response.t_name
          document.getElementById("crt_term").innerHTML = term_name
          document.getElementById("modalCustomer").reset();
      },
  });        
});
</script>

<script>
     

    function vendor_display()
    {
        console.log('fullname');
        var x=document.getElementById("select1").value;
        var y=document.getElementById("ffname").value;
        var z=document.getElementById("llname").value;
        console.log(x);
        console.log(y);
        console.log(z);
        document.getElementById("select2").innerHTML=x+" "+y+" "+z
        
        
    }
</script>

<script>
    function gstPan_function(){
        var x=document.getElementById('GSTT').value
        if(x=="Unregistered Business-not Registered under GST")
        {
            document.getElementById("pan").style.display="block";
            document.getElementById("gst").style.display="none";

            
        }
        else if((x=="Registered Business-Regular Business that is registered under GST") || (x=="Registered Business-Composition Business that is registered under the Composition scheme in GST") || (x=="Overseas- Persons with who you do import or exports of supplies outside india") || (x=="Special Economic Zone"))
        {
            document.getElementById("gst").style.display="block";
            document.getElementById("pan").style.display="block";


        }
    
    }
    function gst_check(){
        var x=document.getElementById("gst_input").value;
        var gst_label=document.getElementById("gst_label")
        // var expr=/^[0-9]{15}$/;
        var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;

        // "[0-9]{2}[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}[1-9A-Za-z]{1}[Z]{1}[0-9a-zA-Z]{1}"
        // /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/
        if (!expr.test(x)) {
            gst_label.style.color="red";
            gst_label.innerHTML = "Invalid GST Number.";
        }
        else{
            gst_label.style.color="green";

            gst_label.innerHTML = "valid GST Number.";

        }
    }
    function pan_check(){
        var x=document.getElementById("pan_input").value;
        var gst_label=document.getElementById("pan_label")
        var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
        if (!expr.test(x)) {
            pan_label.style.color="red";
            pan_label.innerHTML = "Invalid PAN Number.";
        }
        else{
            pan_label.style.color="green";

            pan_label.innerHTML = "valid PAN Number.";

        }
    }
 

    $(document).ready(function () {
        $(".toggle1").click(function (e) {
          e.preventDefault();
          $("fieldset1").toggle();
        })
      })
    $(document).ready(function () {
        $(".toggle2").click(function (e) {
          e.preventDefault();
         
          $("fieldset2").toggle(); 
          $("fieldset5").hide();
          $("fieldset6").hide();
          $("fieldset7").hide();


      
        })
      })

      $(document).ready(function () {
        $(".toggle3").click(function (e) {
          e.preventDefault();
          $("fieldset5").toggle();
          $("fieldset2").hide();
          $("fieldset6").hide();
          $("fieldset7").hide();

        })
      })
      $(document).ready(function () {
        $(".toggle4").click(function (e) {
          e.preventDefault();
          $("fieldset6").toggle();
          $("fieldset2").hide();
          $("fieldset5").hide();
          $("fieldset7").hide();
                
        })
      })
      $(document).ready(function () {
        $(".toggle7").click(function (e) {
          e.preventDefault();
          $("fieldset7").toggle();
          $("fieldset2").hide();
          $("fieldset6").hide();
          $("fieldset5").hide();
         

         
        })
      })

      $('document').ready(function () {
        $('.add_another').click(function () {
          $("#tbl").append('<tr><td><select name="salutation[]" id="PLACE" style="width:8rem;height: 2.4rem;"><option value="Mr" selected>Mr.</option><option value=""Mrs">Mrs.</option><option value="Ms">Ms.</option><option value="Miss">Miss.</option><option value="Dr">Dr.</option></select>  </td><td><input type="text" name="first_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="last_name[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="email" name="email[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="number" id="twphone" name="wphone[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="number" id="tmobile" onclick="sample1()" name="mobile[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="number" onclick="sample()" name="skype[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="designation[]" style="width:8rem;" class="txtbox" value="" /></td><td><input type="text" name="department[]" style="width:8rem;" class="txtbox" value="" /></td></tr>');
        });
      })

      function fieldset5_function()
      {
        document.getElementById("address").style.display="block";
      }

      function myCopyAddressFunction() {
        var checkBox = document.getElementById("myCheckT");
        var textatn = document.getElementById("batten");
        var txtcry = document.getElementById("bctry");
        var txtadrs11 = document.getElementById("badd1");
        var txtcty = document.getElementById("bcty");
        var txtstat = document.getElementById("bste");
        var txtzip = document.getElementById("bzp");
        var txtphone = document.getElementById("bphone_num");
        var txtfx = document.getElementById("bfx");
  
        var textatn1 = document.getElementById("satten");
        var txtcry1 = document.getElementById("sctry");
        var txtadrs21 = document.getElementById("sadd1");
        var txtcty1 = document.getElementById("scty");
        var txtstat1 = document.getElementById("sste");
        var txtzip1 = document.getElementById("szp");
        var txtphone1 = document.getElementById("sphone_num");
        var txtfx1 = document.getElementById("sfx");
        if (checkBox.checked == true) {
          textatn1.value = textatn.value;
          txtadrs21.value = txtadrs11.value;
          txtcty1.value = txtcty.value;
          txtstat1.value = txtstat.value;
          txtzip1.value = txtzip.value; 
          txtphone1.value = txtphone.value;
          txtfx1.value = txtfx.value;
          



          
  
        } else {
          txtadrs21.value = "";
          txtcty1.value = "";
          txtstat1.value = "";
          txtzip1.value = "";
          txtphone1.value = "";
          txtfx1.value = "";
          txtcry1.value = "";
          textatn1.value = "";

  
        }
      }

      function open_table()
      {
        document.getElementById("hid").style.display="block";
        
      }

    //   function work_phone()
    //   {
    //     var x=document.getElementById("workphone").value;
    //     var y=document.getElementById("workphone_label")
    //     var expr=/^[0-9]{7}$/;
    //     if (!expr.test(x)) {
    //         y.style.color="red";
    //         y.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         y.style.color="green";

    //         y.innerHTML = "valid Phone Number.";

    //     }


    //   }

    //   function mobile_phone()
    //   {
        
    //     var a=document.getElementById("mphone").value;
    //     var b=document.getElementById("mphone_label");
    //     var expr=/^[0-9]{10}$/;
    //     if (!expr.test(a)) {
    //         b.style.color="red";
    //         b.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b.style.color="green";

    //         b.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function bphone_number()
    //   {
    //     var a1=document.getElementById("bphone_num").value;
    //     var b1=document.getElementById("bphone_label");
    //     var expr=/^[0-9]{10}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function sphone_number()
    //   {
    //     var a1=document.getElementById("sphone_num").value;
    //     var b1=document.getElementById("sphone_label");
    //     var expr=/^[0-9]{10}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function fax_number()
    //   {
    //     var a1=document.getElementById("bfx").value;
    //     var b1=document.getElementById("fax_label");
    //     var expr=/^[0-9]{7}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    //   function sfax_number()
    //   {
    //     var a1=document.getElementById("sfx").value;
    //     var b1=document.getElementById("sfax_label");
    //     var expr=/^[0-9]{7}$/;
    //     if (!expr.test(a1)) {
    //         b1.style.color="red";
    //         b1.innerHTML = "Invalid Phone Number.";
    //     }
    //     else{
    //         b1.style.color="green";

    //         b1.innerHTML = "valid Phone Number.";

    //     }
    //   }

    
      function sample()
      {

        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl");
        var a1=x.rows[total_rows-1].cells[5].getElementsByTagName('input')[0].value;

        var b1=document.getElementById("tlabel");

        b1.innerHTML = "";

        var expr=/^[0-9]{10}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "valid";

        }

       

      }

      function sample1()
      {

        var tbldata = document.getElementById("tbl");
        var total_rows = tbldata.rows.length;
        x=document.getElementById("tbl");
        var a1=x.rows[total_rows-1].cells[4].getElementsByTagName('input')[0].value;

        var b1=document.getElementById("twph_label");

        b1.innerHTML = "";

        var expr=/^[0-9]{7}$/;
        if (!expr.test(a1)) {
            b1.style.color="red";
            b1.innerHTML = "Invalid";
        }
        else{
            b1.style.color="green";
            b1.innerHTML = "valid";

        }

       

      }

      

     
</script>


<script>
    function create_item() {
  
      if (document.getElementsByName('radio1')[0].checked) {
        var radio = document.getElementsByName('radio1')[0].value
      } else {
        var radio = document.getElementsByName('radio2')[0].value
      }
  
      if (document.getElementsByName('type')[0].checked) {
        var type = document.getElementsByName('type')[0].value
      } else {
        var type = document.getElementsByName('type2')[0].value
      }
  
      var inter = document.getElementsByName('inter')[0].value
      var intra = document.getElementsByName('intra')[0].value
  
      var name = document.getElementsByName('name')[0].value
      var unit = document.getElementsByName('unit')[0].value
      var sel_price = document.getElementsByName('sel_price')[0].value
      var sel_acc = document.getElementsByName('sel_acc')[0].value
      var sel_desc = document.getElementsByName('sel_desc')[0].value
      var cost_price = document.getElementsByName('cost_price')[0].value
      var cost_acc = document.getElementsByName('cost_acc')[0].value
      var cost_desc = document.getElementsByName('cost_desc')[0].value
      var hsn = document.getElementsByName('HSN')[0].value
  
      $.ajax({
  
        type: "GET",
        url: "{% url 'additem_bills' %}",
  
        data: {
          radios: radio,
          inters: inter,
          intras: intra,
          types: type,
          names: name,
          units: unit,
          sel_prices: sel_price,
          sel_accs: sel_acc,
          s_descs: sel_desc,
          cost_prices: cost_price,
          cost_accs: cost_acc,
          p_descs: cost_desc,
          hsn: hsn,
        },
  
        success: function (response) {
          console.log(response)
  
          window.datast = response.name
  
          document.getElementById("items_nms").innerHTML = window.datast
          document.getElementById("items_nms1").innerHTML = window.datast
          const id_country_option = document.getElementById("item2");
  
  
        }
  
      });
  
  
    }
  </script>

<script>
    function generateFullName() {
        document.getElementById('txtFullName').value =
            document.getElementById('sa').value +
            document.getElementById('fName').value + ' ' +
            document.getElementById('lName').value;

    }
    function myFunction() {
        var x = document.getElementById("myEmail").pattern;
        document.getElementById("demo").innerHTML = x;
    }
    function myCopyAddressFunction() {
        var checkBox = document.getElementById("myCheckT");
        var textatn = document.getElementById("batn");
        var txtcry = document.getElementById("bcty");
        var txtadrs11 = document.getElementById("bads1");
        var txtadrs12 = document.getElementById("bads2");
        var txtcty = document.getElementById("bct");
        var txtstat = document.getElementById("bst");
        var txtzip = document.getElementById("bzip");
        var txtphone = document.getElementById("bpon");
        var txtfx = document.getElementById("bfx");

        var textatn1 = document.getElementById("satn");
        var txtcry1 = document.getElementById("scty");
        var txtadrs21 = document.getElementById("sads1");
        var txtadrs22 = document.getElementById("sads2");
        var txtcty1 = document.getElementById("sct");
        var txtstat1 = document.getElementById("sst");
        var txtzip1 = document.getElementById("szip");
        var txtphone1 = document.getElementById("spn");
        var txtfx1 = document.getElementById("sfx");
        if (checkBox.checked == true) {
            textatn1.value = textatn.value;
            txtcry1.value = txtcry.value;
            txtadrs21.value = txtadrs11.value;
            txtadrs22.value = txtadrs12.value;
            txtcty1.value = txtcty.value;
            txtstat1.value = txtstat.value;
            txtzip1.value = txtzip.value;
            txtphone1.value = txtphone.value;
            txtphone1.value = txtfx.value;

        } else {
            textatn1.value = "";
            txtcry1.value = "";
            txtadrs21.value = "";
            txtadrs22.value = "";
            txtcty1.value = "";
            txtstat1.value = "";
            txtzip1.value = "";
            txtphone1.value = "";
            txtphone1.value = "";

        }
    }
    $(document).ready(function () {
        $(".toggle").click(function (e) {
            e.preventDefault();
            $("fieldset1").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle2").click(function (e) {
            e.preventDefault();
            $("fieldset2").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle3").click(function (e) {
            e.preventDefault();
            $("fieldset3").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle4").click(function (e) {
            e.preventDefault();
            $("fieldset5").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle6").click(function (e) {
            e.preventDefault();
            $("fieldset6").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle7").click(function (e) {
            e.preventDefault();
            $("fieldset7").toggle();
        })
    })
    $(document).ready(function () {
        $(".toggle9").click(function (e) {
            e.preventDefault();
            $("fieldset9").toggle();
        })
    })
    $('document').ready(function () {
        $('.add_another').click(function () {
            $("#tbl").append('<tr><td><select name="Place" id="PLACE"><option value="Mr." selected>Mr.</option><option value="Mrs.">Mrs.</option><option value="Ms.">Ms.</option><option value="mercedes">Miss.</option><option value="audi">Dr.</option></select>  </td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td><td><input type="text" class="txtbox" value="" /></td></tr>');
        });
    })

    let popu = document.getElementById("popup-1");

    function openpop() {
        popu.classList.add("open-popup-1");
    }
    function closepop() {
        popu.classList.remove("open-popup-1");
    }
</script>

<script>
    $(document).ready(function () {


        var roinc = 0
        //console.log("ajax");
        // var place = document.getElementById('pos').value;

        $(document).on('click', '#item1', function () {
            select = $('#item1').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate

                    document.getElementById('rate1').value = rate
                    document.getElementById('HSN1').value = response.hsn
                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax1 optgroup[label="GST"]').show();
                           $('#tax1 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax1 optgroup[label="GST"]').hide();
                           $('#tax1 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });
        // //console.log('pos:'+place_of_supply);
        $(document).on('click', '#item2', function () {
            select = $('#item2').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate2').value = rate;
                    document.getElementById('HSN2').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax2 optgroup[label="GST"]').show();
                           $('#tax2 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax2 optgroup[label="GST"]').hide();
                           $('#tax2 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item3', function () { 
            select = $('#item3').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate3').value = rate;
                    document.getElementById('HSN3').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax3 optgroup[label="GST"]').show();
                           $('#tax3 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax3 optgroup[label="GST"]').hide();
                           $('#tax3 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item4', function () {
            select = $('#item4').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate4').value = rate;
                    document.getElementById('HSN4').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax4 optgroup[label="GST"]').show();
                           $('#tax4 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax4 optgroup[label="GST"]').hide();
                           $('#tax4 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item5', function () {
            select = $('#item5').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate5').value = rate;
                    document.getElementById('HSN5').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax5 optgroup[label="GST"]').show();
                           $('#tax5 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax5 optgroup[label="GST"]').hide();
                           $('#tax5 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item6', function () {
            select = $('#item6').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate6').value = rate;
                    document.getElementById('HSN6').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax6 optgroup[label="GST"]').show();
                           $('#tax6 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax6 optgroup[label="GST"]').hide();
                           $('#tax6 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item7', function () {
            select = $('#item7').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate7').value = rate;
                    document.getElementById('HSN7').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax7 optgroup[label="GST"]').show();
                           $('#tax7 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax7 optgroup[label="GST"]').hide();
                           $('#tax7 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item8', function () {
            select = $('#item8').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate8').value = rate;
                    document.getElementById('HSN8').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax8 optgroup[label="GST"]').show();
                           $('#tax8 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax8 optgroup[label="GST"]').hide();
                           $('#tax8 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item9', function () {
            select = $('#item9').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate9').value = rate;
                    document.getElementById('HSN9').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax9 optgroup[label="GST"]').show();
                           $('#tax9 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax9 optgroup[label="GST"]').hide();
                           $('#tax9 optgroup[label="IGST"]').show();
                       }
                   });
                }
            });

        });

        $(document).on('click', '#item10', function () {
            select = $('#item10').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate10').value = rate;
                    document.getElementById('HSN10').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax10 optgroup[label="GST"]').show();
                           $('#tax10 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax10 optgroup[label="GST"]').hide();
                           $('#tax10 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item11', function () {
            select = $('#item11').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate11').value = rate;
                    document.getElementById('HSN11').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax11 optgroup[label="GST"]').show();
                           $('#tax11 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax11 optgroup[label="GST"]').hide();
                           $('#tax11 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item12', function () {
            select = $('#item12').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate12').value = rate;
                    document.getElementById('HSN12').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax12 optgroup[label="GST"]').show();
                           $('#tax12 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax12 optgroup[label="GST"]').hide();
                           $('#tax12 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item13', function () {
            select = $('#item13').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate13').value = rate;
                    document.getElementById('HSN13').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax13 optgroup[label="GST"]').show();
                           $('#tax13 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax13 optgroup[label="GST"]').hide();
                           $('#tax13 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item14', function () {
            select = $('#item14').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate14').value = rate;
                    document.getElementById('HSN14').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax14 optgroup[label="GST"]').show();
                           $('#tax14 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax14 optgroup[label="GST"]').hide();
                           $('#tax14 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item15', function () {
            select = $('#item15').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate15').value = rate;
                    document.getElementById('HSN15').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax15 optgroup[label="GST"]').show();
                           $('#tax15 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax15 optgroup[label="GST"]').hide();
                           $('#tax15 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item16', function () {
            select = $('#item16').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate16').value = rate;
                    document.getElementById('HSN16').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax16 optgroup[label="GST"]').show();
                           $('#tax16 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax16 optgroup[label="GST"]').hide();
                           $('#tax16 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item17', function () {
            select = $('#item17').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate17').value = rate;
                    document.getElementById('HSN17').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax17 optgroup[label="GST"]').show();
                           $('#tax17 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax17 optgroup[label="GST"]').hide();
                           $('#tax17 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item18', function () {
            select = $('#item18').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate18').value = rate;
                    document.getElementById('HSN18').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax18 optgroup[label="GST"]').show();
                           $('#tax18 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax18 optgroup[label="GST"]').hide();
                           $('#tax18 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item19', function () {
            select = $('#item19').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate19').value = rate;
                    document.getElementById('HSN19').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax19 optgroup[label="GST"]').show();
                           $('#tax19 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax19 optgroup[label="GST"]').hide();
                           $('#tax19 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item20', function () {
            select = $('#item20').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate20').value = rate;
                    document.getElementById('HSN20').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax20 optgroup[label="GST"]').show();
                           $('#tax20 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax20 optgroup[label="GST"]').hide();
                           $('#tax20 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });

        $(document).on('click', '#item21', function () {
            select = $('#item21').val();
            customer = $('#customer_sel').val();
            //console.log(select);
            //console.log(customer);
            $.ajax({
                type: "GET",
                url: "{% url 'itemdata_bills' %}",
                data: {
                    id: select,
                    cust: customer
                },
                success: function (response) {
                    //console.log(response)
                    rate = response.rate
                    document.getElementById('rate21').value = rate;
                    document.getElementById('HSN21').value = response.hsn

                    // var pos = document.getElementById("pos").value;
                    // var sos = document.getElementById("sos").value;
                    var pos = document.getElementById("pos").value.split("-")[1];
                    var sos = document.getElementById("state").value;

                    $(document).ready(function() {
                       if (pos === sos) {
                           $('#tax21 optgroup[label="GST"]').show();
                           $('#tax21 optgroup[label="IGST"]').hide();
                       } else {
                           $('#tax21 optgroup[label="GST"]').hide();
                           $('#tax21 optgroup[label="IGST"]').show();
                       }
                   });



                }
            });

        });


    });
</script>

<!-- address same -->
<script>
  function addressSame(){
    var chkbtn1 = document.getElementById('vokay');
    var chkbtn2 = document.getElementById('csokay');
    if (chkbtn1.checked == true) {
      document.getElementById('vsstreet').value = document.getElementById('vstreet').value;
      document.getElementById('vscity').value = document.getElementById('vcity').value;
      document.getElementById('vspincode').value = document.getElementById('vpincode').value;
      document.getElementById('vscountry').value = document.getElementById('vcountry').value;
      document.getElementById('vsstate').value = document.getElementById('vstate').value;
      document.getElementById('vsphone').value = document.getElementById('vphone').value;
      document.getElementById('vsfax').value = document.getElementById('vfax').value;
    } 
    else {
      document.getElementById('vsstreet').value = '';
      document.getElementById('vscity').value = '';
      document.getElementById('vsstate').value = '';
      document.getElementById('vspincode').value = '';
      document.getElementById('vscountry').value = '';
      document.getElementById('vsphone').value = '';
      document.getElementById('vsfax').value = '';
    }
    if (chkbtn2.checked == true) {
      document.getElementById('csstreet1').value = document.getElementById('cstreet1').value;
      document.getElementById('csstreet2').value = document.getElementById('cstreet2').value;
      document.getElementById('cscity').value = document.getElementById('ccity').value;
      document.getElementById('cspincode').value = document.getElementById('cpincode').value;
      document.getElementById('cscountry').value = document.getElementById('ccountry').value;
      document.getElementById('csstate').value = document.getElementById('cstate').value;
      document.getElementById('csphone').value = document.getElementById('cphone').value;
      document.getElementById('csfax').value = document.getElementById('cfax').value;
    } 
    else {
      document.getElementById('csstreet').value = '';
      document.getElementById('cscity').value = '';
      document.getElementById('csstate').value = '';
      document.getElementById('cspincode').value = '';
      document.getElementById('cscountry').value = '';
      document.getElementById('csphone').value = '';
      document.getElementById('csfax').value = '';
    }
  }
</script>
<script>
 function handleTaxChange(selectId) {
        // var pos = $("#pos").val();
        // var sos = $("#sos").val();
        var pos = $("#pos").val().value.split("-")[1];
        var sos = $("#state").val();
         
        
        if (pos === sos) {
            $(`#tax${selectId} optgroup[label="GST"]`).show();
            $(`#tax${selectId} optgroup[label="IGST"]`).hide();
        } else {
            $(`#tax${selectId} optgroup[label="GST"]`).hide();
            $(`#tax${selectId} optgroup[label="IGST"]`).show();
        }
    }

</script>

<script>
  $(document).ready(function() {
    $("#v_gsttype").change(function() {
      var x=$('#v_gsttype').val();
      if(x=="unregistered Business") 
      {
        $(".gstrow").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".gstrow").addClass('d-none');
      }
      else 
      {
        $(".gstrow").removeClass('d-none');
        $(".gstrow").addClass('d-flex');
      }
    
    });
  });

  $(document).ready(function() {
    $("#c_gsttype").change(function() {
      var x=$('#c_gsttype').val();
      if(x=="Unregistered Business") 
      {
        $(".gstrow").addClass('d-none');

      }
      else if(x == 'Overseas'){
        $(".gstrow").addClass('d-none');
      }
      else 
      {
        $(".gstrow").removeClass('d-none');
        $(".gstrow").addClass('d-flex');
      }
    
    });
  });

</script>

<!-- //-------- add repeat modal----------- -->
<script>
  $(document).on("click","#RepeatSave",function(){
    $.ajax({
      
      type : 'POST',
      url:"{% url 'add_repeat' %}",
  
  
      data:{
        repeats : $("#repeats_input").val(),
         
          
          csrfmiddlewaretoken: '{{ csrf_token }}'
          
        },
      
        success: function(response) {
          document.getElementById("modalRepeat").reset();
          reloadRepeat();
        },
    });        
  });
  
  $(document).ready(function(){
    reloadRepeat()
  });
  
  function reloadRepeat() {
  
  $.ajax({
    url: "{% url 'repeat_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',
  
    success: function(data) {
      var dropdown = $('#repeats');
      dropdown.empty();
      dropdown.append(`
                 <option selected value="Week">Week</option>
                 
                 <option value="Month">Month</option>
                 
                 <option value="Year">Year</option>`); 
      $.each(data, function(key, value) { 
          dropdown.append('<option value="'+value[0]+'">'+value[0]+'</option>'); 
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
  }
  </script>
  
<!-- --------payment terms modal---------- -->
<script>
  $(document).on("click","#paySave",function(){
    $.ajax({
      
      type : 'POST',
      url:"{% url 'recurbills_pay' %}",
  
      data:{
          name : $("#term_name").val(),
          days : $("#term_days").val(),
          
          csrfmiddlewaretoken: '{{ csrf_token }}'
          
        },
      
        success: function(response) {
          document.getElementById("modalPayment").reset();
          reloadPayment();
        },
    });        
  });
  
  function reloadPayment() {
  
    $.ajax({
      url: "{% url 'pay_dropdown' %}",
      type: "GET",
      dataType: "json",
      data: $(this).serialize(),
      csrfmiddlewaretoken: '{{ csrf_token }}',
  
      success: function(data) {
        var dropdown = $('#terms');
        dropdown.empty();
        dropdown.append(`<option value="30">NET 30</option></option>
                            
                            
                            <option value="60">NET 60</option>
                            
                           
                            <option value="recpt">Due on receipt</option>`);
        var drpv = $('#v_terms');
        drpv.empty();
        drpv.append(`<option value="30">NET 30</option>
                          
                          
                          <option value="60">NET 60</option>
                         
                          
                          <option value="recpt">Due on receipt</option>`);
        $.each(data, function(key, value) { 
            dropdown.append($('<option></option>').attr('value', key).text(value[0]).val(value[1]));
            drpv.append($('<option></option>').attr('value', key).text(value).val(value));
        });
      },
      error: function(xhr, status, error) {
      console.error(xhr.responseText);
      }
    });
  }
  
  function toggleDateInput() {
        var checkbox = document.getElementById("never-expire-checkbox");
        var dateInput = document.getElementById("due_date");
        
        if (checkbox.checked) {
            dateInput.disabled = true;
            $('#due_date').val("");
            $("#p_terms").val("recpt");
        } 
        else {
            dateInput.disabled = false;
        }
    }

    $(document).ready(function() {
    $('#p_terms').change(function() {
      var va = $(this).val();
      var checkbox = $('#never-expire-checkbox')[0];
      if (va == 'recpt'){
        checkbox.checked = true;
        $('#due_date')[0].disabled = true;
      }
      else{
        checkbox.checked = false;
        $('#due_date').disabled = false;
      }
      });
  });
  </script>
  <!-- <script>
     $(document).on("change", "#add_round_off", function(){
      var round = parseFloat($("#total").val()) + parseFloat($("#add_round_off").val()) 
      $("#total").val(round);
    });
  </script> -->

  <script>
    $(document).ready(function() {
  $("#item0").change(function() {
    $.ajax({
      url: "{% url 'get_rate' %}",
      type : 'POST',
      data:{
          id : $("#item0").val(),
      
          csrfmiddlewaretoken: '{{ csrf_token }}'
        },
    
      success: function(response) {
        $("#rate0").val(response.rate);
        $("#HSN0").val(response.hsn);



      },
    });
  });
});
  </script>
{% endblock %}