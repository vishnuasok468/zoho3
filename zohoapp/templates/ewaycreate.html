{% extends 'base.html' %}
{% block content %}
{% load static %}



<!-- class="row fixed-topss" -->
<!-- style=" position: fixed;" -->
<style>
 /* Modal styles */
 .modal{
    z-index: 9999;
    overflow: scroll;
  }
  .modal-backdrop {
    display: none;
    z-index: 1040 !important;
}

.modal-content {
    margin: 2px auto;
    z-index: 1100 !important;
}
 .modal1 {
      display: none; /* Hide the modal by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
    }
   .modal11 {
      display: none; /* Hide the modal by default */
      position: fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
    }
    .modal2 {
      display: none; /* Hide the modal by default */
      position:fixed; /* Stay in place */
      z-index: 1; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
    }
    .modal11-content {
      background-color: #fefefe;
      margin: 15% auto; /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width:80%; /* Set the width of the modal */
    }
    .modal1-content {
      background-color: #fefefe;
      margin: 15% auto; /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width:80%; /* Set the width of the modal */
    }
    .modal2-content {
      background-color: #fefefe;
      margin: 15% auto; /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width:300px; /* Set the width of the modal */
    }
    .modal3 {
      display: none; /* Hide the modal by default */
      position: fixed; /* Stay in place */
      z-index: 2; /* Sit on top */
      left: 0;
      top: 0;
      width: 100%; /* Full width */
      height: 100%; /* Full height */
      overflow: auto; /* Enable scroll if needed */
      background-color: rgba(0, 0, 0, 0.4); /* Black w/ opacity */
    }
    .modal3-content {
      background-color: #fefefe;
      margin: 15% auto; /* 15% from the top and centered */
      padding: 20px;
      border: 1px solid #888;
      width:300px; /* Set the width of the modal */
    }
    .modal1-label {
      font-weight: bold;
    }
    .modal11-label {
      font-weight: bold;
    }
    .modal1-input {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      box-sizing: border-box;
    }
    .modal11-input {
      width: 100%;
      padding: 12px 20px;
      margin: 8px 0;
      box-sizing: border-box;
    }
    .modal1-buttons {
      text-align: right;
      margin-top: 20px;
    }
    .modal11-buttons {
      text-align: right;
      margin-top: 20px;
    }
    .modal{
      z-index:1050;
      overflow:x;
      
    }
    input[type=text], select, textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
      resize: vertical;
    }
    
    label {
      padding: 12px 12px 12px 0;
      display: inline-block;
    }
    
    
    .row:after {
      content: "";
      display: table;
      clear: both;
    }
    
    @media screen and (max-width: 600px) {
      .col-25, .col-75, input[type=submit] {
        width: 100%;
        margin-top: 0;
      }
      input[type=text], select, textarea {
      width: 100%;

    }
    }

    .dropdown input,
    .dropdown button {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
    }

    .dropdown.open input,
    .dropdown.open button {
      display: block;
    }

    .row a{
      color: rgb(218, 164, 48);
      font-size: 12px;
    }

    .table th a{
      color:rgb(218, 164, 48);
      font-size: 11px;
      margin-left: 100px;
    }


    ::-webkit-scrollbar {
      width: 5px; 
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1; 
    }

    ::-webkit-scrollbar-thumb {
      background: #888; 
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555; 
    }

   
    .item{
      height: auto;
    }
</style>
<!-- <section > -->
    <div class="fixed-top" style="top: 7rem; margin-left: 18rem;" >
     
          <div style="height: 600px;overflow-y: scroll;">
             <h3  class="mb-3  text-white " style="font-size: 2rem;">New E-way Bill</h3><br>     
      
            <form  method="post" action="{% url 'create_ewaybillz' %}"  enctype="multipart/form-data" class="">
              {% csrf_token %}
              
              
              <div class=" form-group row">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                    <label style="color:rgb(190, 88, 88);">Document Type*</label>
                </div>
                <div class="col-sm-12 col-md-6 col-lg-6">
                    <select name="doc" id="" class="form-control bg-light text-dark" required>
                        <option value="" hidden selected></option>
                        <option value="Invoices">Invoices</option>
                        <option value="Credit Notes">Credit Notes</option>
                        <option value="Delivery Challans">Delivery Challans</option>
                    </select>
 
                </div>
                
            </div>

            <div class=" form-group row">
                <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                    <label style="color:rgb(190, 88, 88);">Transaction Sub Type*</label>
                </div>
                <div class="col-sm-12 col-md-6 col-lg-6">
                    <select name="transsub" id="" class="form-control bg-light text-dark" required>
                        <option value="" hidden selected></option>
                        <option value="Supply">Supply</option>
                        <option value="Export">Export</option>
                        <option value="SKD/CKD">SKD/CKD</option>
                    </select>
 
                </div>
                
            </div>
            <div class="row mt-2">
              <div class="col-md-3">
                <label style="color:rgb(190, 88, 88);">Customer Name *</label><br>
              </div>
              <div class="col-md-6">
                <select name="customerzz" id="customer" class="form-control text-dark bg-light" required>
                  <option value=""></option>
                  {% for c in data %}
                  <option value="{{c.id}}" data-email="{{ c.customerEmail }}" data-gst-treatment="{{c.GSTTreatment}}" data-GSTIN="{{c.GSTIN}}">{{ c.customerName }}</option>
                  {% endfor %}
                </select>
                <a href="" data-toggle="modal" data-target="#newcustomer">+ Add New Customer</a>
                <input type="hidden" id="cust_state" value="" readonly >
      
                <input type="hidden" id="company_state" value="{{company.state}}" readonly>
      
              </div>
            </div>
      
            <div class="row mt-2" id="cemail_row">
              <div class="col-md-3">
                <label for="cemail_inp">Customer Email</label>
              </div>
              <div class="col-md-6">
                <input type="email" class="form-control text-dark bg-light"  id="cemail_inp" name="cemail"  >
              </div>
            </div>
      
            <div class="row mt-2" id="cgst_trt_row">
              <div class="col-md-3">
                <label for="gst_trt_inp">GST Treatment</label>
              </div>
              <div class="col-md-6">
                <input type="text" class="form-control text-dark bg-light" id="cgst_trt_inp" name="cgst_trt_inp"  >
              </div>
            </div>
      
            <div class="row mt-2 mb-2" id="cgstin_row">
              <div class="col-md-3">
                <label for="gstin_inp">GST Number</label>
              </div>
              <div class="col-md-6">
                <input type="text" class="form-control text-dark bg-light"  id="cgstin_inp" name="cgstin_inp" >
              </div>
            </div>
      
      


                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                        <label>Invoice#*</label>
                    </div>
                    <div class="col-sm-12 col-md-3 col-lg-3">
                        <input type="text" class="form-control text-dark bg-light" id="invoiceno" name="invoiceno">
                    </div>
                    <div class="col-sm-12 col-md-1 col-lg-1 col-form-label">
                        <label>Date</label>
                    </div>
                    <div class="col-sm-12 col-md-2 col-lg-2">
                        <input type="date" name="date" id="dateInput" class="form-control bg-light text-dark" style="float: left;">
                    </div>
                </div>
                <script>
                  // JavaScript to set the date input to today's date and restrict selection of other dates
                  const today = new Date().toISOString().split('T')[0];
                  document.getElementById('dateInput').value = today; // Set today's date as the default value
                  document.getElementById('dateInput').setAttribute('min', today); // Prevent selecting dates before today
                  document.getElementById('dateInput').setAttribute('max', today); // Prevent selecting dates after today
              </script>
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label style="color:rgb(190, 88, 88);">Transaction Type*</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <select name="trans" id="transaction" class="form-control bg-light text-dark" required>
                            <option value="" hidden selected></option>
                            <option value="Goods">Goods</option>
                            <option value="Services">Services</option>
                        </select>
                    </div>
                </div>
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Address Details</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <input  type="text" class="form-control bg-light text-dark" name="adda" >
                    </div>
                </div>
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Address Details 2</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <input  type="text" class="form-control bg-light text-dark" name="addb" >
                    </div>
                </div>
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label">
                        <label style="color:rgb(190, 88, 88);">Place of supply*</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6" >
                      <select name="srcofsupply" id="srcofsupply" onclick="toggleDateInput()" onselect="calculateTaxAmount()" class="form-control bg-light text-dark" required>
                        <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                        <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                        <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                        <option value="[AS] Assam">[AS] Assam</option>
                        <option value="[BR] Bihar">[BR] Bihar</option>
                        <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                        <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                        <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                        <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                        <option value="[DL] Delhi">[DL] Delhi</option>
                        <option value="[GA] Goa">[GA] Goa</option>
                        <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                        <option value="[HR] Haryana">[HR] Haryana</option>
                        <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                        <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                        <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                        <option value="[KA] Karnataka">[KA] Karnataka</option>
                        <option selected="selected" value="[KL] Kerala">[KL] Kerala</option>
                        <option value="[LA] Ladakh">[LA] Ladakh</option>
                        <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                        <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                        <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                        <option value="[MN] Manipur">[MN] Manipur</option>
                        <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                        <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                        <option value="[NL] Nagaland">[NL] Nagaland</option>
                        <option value="[OD] Odisha">[OD] Odisha</option>
                        <option value="[PY] Puducherry">[PY] Puducherry</option>
                        <option value="[PB] Punjab">[PB] Punjab</option>
                        <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                        <option value="[SK] Sikkim">[SK] Sikkim</option>
                        <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                        <option value="[TS] Telangana">[TS] Telangana</option>
                        <option value="[TR] Tripura">[TR] Tripura</option>
                        <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                        <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                        <option value="[WB] West Bengal">[WB] West Bengal</option>
                        <option value="[OT] Other Territory">[OT] Other Territory</option>
                    </select>
                    
                    </div>
                </div>
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Transportation</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6 d-flex align-items-center">
                        <select name="transportation" id="transportation" class="form-control bg-light text-dark">
                            <option value="" hidden selected></option>
                            <option value="Bus">Bus</option>
                            <option value="Car">Car</option>
                            <option value="Train">Train</option>
                            {% for p in trans %}
                            <option value="{{p.method}}">{{p.method}}</option>
                            {% endfor %}
                        </select>
                        <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="create-trans">+</button><br><br><br>
                    </div>
                </div>
                <div class="form-group row mt-4">
                    <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Kilometer</label></div>
                    <div class="col-sm-12 col-md-6 col-lg-6">
                        <input  type="text" class="form-control bg-light text-dark" name="km" >     
                         
     
                    </div>
                    
                </div>
                <div class="form-group row mt-4">
                  <div class="col-sm-12 col-md-3 col-lg-3 col-form-label"><label>Vehicle Number</label></div>
                  <div class="col-sm-12 col-md-6 col-lg-6">
                      <input type="text" class="form-control bg-light text-dark" name="vno" placeholder="KL XX AA 1234">
                  </div>
              </div>
              


                
                <div class="row mt-2">
                  <div class="col-md-12 table-responsive-md mt-3">
                    <table class="table table-bordered " id="item_table" onclick='toggleDateInput()'>
                      <thead>
                        <tr>
                          <th>Item<br><a href="" data-toggle="modal" data-target="#newitem" class="text-capitalize">+ Item</a></th>
                          
                          <th class="text-right">Quantity</th>
                          <th class="text-right">Rate</th>
                          <th class="text-right">Discount</th>
                          <th class="text-right">Tax</th>
                          <th class="text-right">Amount</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr id="row1">
                            <td style="width: 10%;">
                                <div ><select
                                        class='form-control bg-light text-dark border-0 item_select itm'
                                        name='item[]' id='item1'>
                                        <option value=" " selected disabled>Select Item</option>
                                        {% for i in item %}
                                          <option value="{{i.Name}}">{{ i.Name  }} </option>
                                        {% endfor %}
                                    </select></div>
                            </td>
                            
                           
                            <td style="width: 13%;" class='text-right'><input type='number' id='qty1'
                                    class=' text-right qty form-control bg-light text-dark' name='quantity[]'
                                    value='0'>
                            </td>
                            <td style="width: 15%;" class='text-right'><input type='number' id='rate1'
                                    class=' text-right rate form-control bg-light text-dark' name='rate[]'
                                    value='0'>
                            </td>
                            <td style="width: 12%;" class='text-right text-dark'><input type='number' id='discount1'
                                    class=' text-right discount bg-light text-dark form-control' name='discount[]'
                                    value='0'>
                            </td>
                            <td style="width: 15%;" class='text-right '> <select name='tax[]' id='tax1'
                                    class='form-control bg-light text-dark  text-right border-0 tax' onclick="toggleDateInput()">
                                    <optgroup class="text-center" label="GST">
                                      <option value="0" selected></option>
                                      <option value="0">0% GST(0%)</option>
                                      <option value="3">3.0% GST(3%)</option>
                                      <option value="5">5.0% GST(5%)</option>
                                      <option value="12">12.0% GST(12%)</option>
                                      <option value="18">18.0% GST(18%)</option>
                                      <option value="28">28.0% GST(28%)</option>
                                    </optgroup>
                                    <optgroup  class="text-center" label="IGST">
                                      <option value="0">0% IGST(0%)</option>
                                      <option value="3">3.0% IGST(3%)</option>
                                      <option value="5">5.0% IGST(5%)</option>
                                      <option value="12">12.0% IGST(12%)</option>
                                      <option value="18">18.0% IGST(18%)</option>
                                      <option value="28">28.0% IGST(28%)</option>             
                                      </optgroup>
                                </select></td>
                            <td style="display: none;">
                                <input type="text" name='taxamount' id="taxamount1"
                                    class=" taxamount text-dark" />
                            </td>
                            <td style="width: 15%;" class='text-right'><input type='number' id='amount1'
                                    class=' text-right form-control amount bg-light text-dark' name='amount[]'
                                    value='0.00'></td>
                            <td class='text-center'><button type='button' id='del_btn1'
                                    class='btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row'
                                    style='width:30px'>X</button></td>
                                    <td class='text-center'>
                                      <button type='button' class='btn btn-transparent text-primary btn-sm btn-outline-primary rounded-circle clone-row' data-row=1 style='width:30px'><i class="fa fa-clone"></i>
                                      </button>
                                    </td>
           </tr>
                </tbody>
              </table>
              <button type="button" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="add-row">Add another line</button>
            </div>
          </div>
          
                <div class="row border-bottom pb-5">
                  <div class="col-md-5 mt-2 p-3 mx-5">
                    <label for="">Note</label>
                    <div class="form-row">
                      <textarea class="form-control text-dark bg-light" name="note" rows="15" style="height: 200px;"></textarea>
                    </div><br>
                    <div>
                      <input type="file" class="form-control text-dark bg-light" name="file">
                    </div>
                    <div>
                    </div>
                  </div>
                  <div class="col-sm-6 " >
                      <table class=" table  text-white" style="background-color: rgba(58, 57, 57, 0.8);">
                          <tr>
                              <td>Sub Total</td>
                              <td></td>
                              <td><input type="number" id="subtotal" name="subtotal" step="any" value="0.00"
                                      class="bg-transparent border-0 text-right subtotal text-white"></td>
                          </tr>
                          <tr style="display: none;" id="tr_igst">
                              <td>IGST</td>
                              <td></td>
                              <td><input type="number" id='igst' name="igst" step="any" value="0.00"
                                      class="form-control bg-transparent border-0 text-right igst  text-white" ></td>
                          </tr>
                          <tr style="display: none;" id="tr_cgst">
                              <td>CGST</td>
                              <td></td>
                              <td><input type="number" id='cgst' name="cgst" step="any" value="0.00"
                                      class="form-control bg-transparent border-0 text-right cgst text-white" ></td>
                          </tr>
                          <tr style="display: none;" id="tr_sgst">
                              <td>SGST</td>
                              <td></td>
                              <td><input type="number" id='sgst' name="sgst" step="any" value="0.00"
                                      class="form-control bg-transparent border-0 text-right sgst  text-white" ></td>
                          </tr>
                          <tr>
                              <td>Tax Amount</td>
                              <td></td>
                              <td><input type="number" id="total_taxamount" name="total_taxamount" step="any" value="0.00" 
                                  class="total_taxamount form-control bg-transparent border-0 text-right  text-white"></td>
                          </tr>
                          <tr>
                              <td>Shipping Charges</td>
                              
                              <td><input type="hidden" id="shipping_charge" name="shipping_charge" step="any" value="0.00" 
                                  class="form-control bg-transparent border-0 text-right shipping_charge  "></td>
                                  <td><input type="number" class="form-control  bg-transparent border-0  text-light" id="shipping" value="0"> </td>
                          </tr>
                          <tr>
                            <td>Adjustment</td>
                            
                            <td><input type="hidden" id="adj" name="adj" step="any" value="0.00" 
                                class="form-control bg-transparent border-0 text-right adj  "></td>
                                <td><input type="number" class="form-control  bg-transparent border-0  text-light" id="adji" value="0"> </td>
                        </tr>
                          <tr>
                              <td></td>
                              <td></td>
                              <td> </td>
                          </tr>
                          <tr>
                              <th>Total ( &#x20B9; )</th>
                              <th></th>
                              <th><input type="number" id="grandtotal" name="grandtotal" step="any" value="0.00" 
                                      class="form-control bg-transparent border-0 text-right grandtotal  text-white"></th>
                          </tr>
                      </table>
                  </div>
              </div>
          
              
                <div class="row mt-5 mb-3 m-5 ">
                 
              
               
                  <input style="width: 150px;margin-right: 2rem;" type="submit" class="btn btn-success mt-2" value="Save">
                     <input style="width: 150px;margin-right: 2rem;" class="btn btn-danger mt-2" type="reset" value="Cancel">
               
                  
                 
                </div>
              </form>
              <div class="modal fade" id="newvendor">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                    <div class="modal-header " style="background: rgb(32, 35, 37);">
                        <h3 class="m-3 text-uppercase">New Vendor</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="background: rgb(32, 35, 37);">
                      <div class="card p-3 m-3">
                        <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalVendor">
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="validationCustom01">Title</label>
                            </div>
                            <div class="col-md-3 mt-2">
                              <select name="title" id="title" class="form-control bg-light text-dark">
                                <option value="Mr.">Mr.</option>
                                <option value="Mrs.">Mrs.</option>
                                <option value="Miss">Miss</option>
                                <option value="Ms.">Ms.</option>
                              </select>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="fname" style="color: red;">First name*</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="fname" name="firstname" required>
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="lname">Last name</label>
                              <label id="vdisplayname" name = "vdisplayname" hidden></label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="lname" name="lastname">
                            </div>
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="company">Company Name</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="vcompany" name="vcompany_name">
                            </div>
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="email">Email</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="email" class="form-control bg-light text-dark" id="vemail" name="vemail" placeholder="example@gmail.com">    
                            </div>              
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="email">Vendor Phone</label>
                            </div>
                            <div class="col-md-3 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="vw_mobile" placeholder="Work Number" maxlength="10" name="vw_mobile">
                            </div>        
                            <div class="col-md-3 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="vp_mobile" placeholder="Personal Number" maxlength="10" name="vp_mobile">
                            </div>          
                          </div>
          
                     
                          <hr>
                          <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
          
                          <div class="row mt-5">
                            <div class="col-md-3 mt-2">
                              <label for="wsite">Website</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="wsite" placeholder="www.example.com" name="website">
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="vskype">Skype name/Number</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark"  id="vskype" name="vskype">
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_desg">Designation</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="v_desg" name="v_desg">
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_dpt">Department</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="v_dpt" name="v_dpt">
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <select class="form-control bg-light text-dark" id="v_gsttype" name="v_gsttype" required>
                                <option selected disabled value="">Choose..</option>
                                <option value="Registered Business - Regular">Registered Business - Regular <span><i>(Business that is registered under gst)</i></span></option>
                                <option value="Registered Business - Composition">Registered Business - Composition (Business that is registered under composition scheme in gst)</option>
                                <option value="unregistered Business">Unregistered Business (Business that has not been registered under gst)</option>
                                <option value="Overseas">Overseas (Import/Export of supply outside india)</option>
                                <option value="Special Economic Zone (SEZ)">Special Economic Zone (SEZ) (Business that is located in a special economic zone of india or a SEZ developer)</option>
                                <option value="Demed Exports">Demed Exports (Supply of woods to an exports oriented unit or againsed advanced authorization or export promotion capital woods)</option>
                                <option value="Tax Deductor">Tax Deductor (State of central gov,government agencies or local authority)</option>
                                <option value="SEZ Developer">SEZ Developer (A person or organization who owns atleast 26% eqaulity in creating business units in special economic zone)</option>
                              </select>
                            </div>       
                          </div>
          
                          <div class="row gstrow d-none">
                            <div class="col-md-3 mt-2">
                              <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="v_gstin" name="v_gstin" placeholder="29APPCK7465F1Z1">
                              <label id="gst_label"></label>
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_pan">PAN Number</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="v_pan" name="v_pan" placeholder="APPCK7465F">
                              <label id="pan_label"></label>
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="" style="color: rgb(190, 88, 88);">Source of Supply *</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <select class="form-control bg-light text-dark" id="v_srcsupply" name="v_sourceofsupply">
                                <option value="Nill"></option>
                                <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                <option value="[AS] Assam">[AS] Assam</option>
                                <option value="[BR] Bihar">[BR] Bihar</option>
                                <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                <option value="[DL] Delhi">[DL] Delhi</option>
                                <option value="[GA] Goa">[GA] Goa</option>
                                <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                <option value="[HR] Haryana">[HR] Haryana</option>
                                <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                <option value="[KA] Karnataka">[KA] Karnataka</option>
                                <option value="[KL] Kerala">[KL] Kerala</option>
                                <option value="[LA] Ladakh">[LA] Ladakh</option>
                                <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                <option value="[MN] Manipur">[MN] Manipur</option>
                                <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                <option value="[NL] Nagaland">[NL] Nagaland</option>
                                <option value="[OD] Odisha">[OD] Odisha</option>
                                <option value="[PY] Puducherry">[PY] Puducherry</option>
                                <option value="[PB] Punjab">[PB] Punjab</option>
                                <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                <option value="[SK] Sikkim">[SK] Sikkim</option>
                                <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                <option value="[TS] Telangana">[TS] Telangana</option>
                                <option value="[TR] Tripura">[TR] Tripura</option>
                                <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                <option value="[WB] West Bengal">[WB] West Bengal</option>
                                <option value="[OT] Other Territory">[OT] Other Territory</option>
                              </select>
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_curn">Currency </label>
                            </div>
                            <div class="col-md-3 mt-2">
                              <select class="form-control bg-light text-dark" id="v_curn" name="v_curn" required>
                                <option selected disabled value="">Choose..</option>
                                <option value="INR">INR</option>
                              </select>
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_open">Opening Balance</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="v_open" name="v_open">
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_terms">Payment Terms</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <div class="d-flex">
                                <select class="form-control bg-light text-dark" id="v_terms" name="v_terms" required>
                                  {% for p in payment %}
                                  <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                                  {% endfor %}
                                </select>                
                                <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>   
                              </div>
                            </div>       
                          </div>
          
                          <hr>
          
                          <div class="row">
                            <div class="col-md-6 mt-5 text-center text-uppercase">
                              <h4 class="mb-0">Billing Address</h4>
                            </div>
                            <div class="col-md-6 mt-5">
                              <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
                            </div>
                          </div>
                          <div class="row mt-2 m-0 p-0 mb-2">
                            <div class="col-md-9"> </div>
                            <div class="col-md-3 text-right  m-0 p-0">
                              <input type="checkbox" onclick="addressSame()" id="vokay" name="vokay">
                              <label for="vokay" style="color: #909091;">Same As Billing Address</label>
                            </div>
                          </div>
          
                          <div class="row mt-5">
                            <div class="col-md-1">
                              <label for="vstreet">Street</label>
                            </div>
                            <div class="col-md-4">
                              <textarea class="form-control bg-light text-dark street" id="vstreet" name="vstreet"></textarea>
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="vsstreet">Street</label>
                            </div>
                            <div class="col-md-4 ">
                              <textarea class="form-control bg-light text-dark street" id="vsstreet" name="vsstreet"></textarea>
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-1">
                              <label for="vcity">City</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vcity" name="vcity" placeholder="City">  
                            </div>
                            <div class="col-md-1">
                            </div>
                            <div class="col-md-1">
                              <label for="vscity">City</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vscity" name="vscity" placeholder="City">  
                            </div>
                            <div class="col-md-1">
                            </div>
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-1">
                              <label for="vstate">State</label>
                            </div>
                            <div class="col-md-4">
                              <select type="text" class="form-control bg-light text-dark" id="vstate" name="vstate">
                                <option value="" selected>Choose</option>
                                <option value="None Of This">None Of This</option>
                                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                </option>
                                <option value="Andhra Predhesh">Andhra Predhesh</option>
                                <option value="Arunachal Predesh">Arunachal Predesh</option>
                                <option value="Assam">Assam</option>
                                <option value="Bihar">Bihar</option>
                                <option value="Chandigarh">Chandigarh</option>
                                <option value="Chhattisgarh">Chhattisgarh</option>
                                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                <option value="Damn anad Diu">Damn anad Diu</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Goa">Goa</option>
                                <option value="Gujarat">Gujarat</option>
                                <option value="Haryana">Haryana</option>
                                <option value="Himachal Predesh">Himachal Predesh</option>
                                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                <option value="Jharkhand">Jharkhand</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Kerala">Kerala</option>
                                <option value="Ladakh">Ladakh</option>
                                <option value="Lakshadweep">Lakshadweep</option>
                                <option value="Madhya Predesh">Madhya Predesh</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Manipur">Manipur</option>
                                <option value="Meghalaya">Meghalaya</option>
                                <option value="Mizoram">Mizoram</option>
                                <option value="Nagaland">Nagaland</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Puducherry">Puducherry</option>
                                <option value="Punjab">Punjab</option>
                                <option value="Rajasthan">Rajasthan</option>
                                <option value="Sikkim">Sikkim</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Telangana">Telangana</option>
                                <option value="Tripura">Tripura</option>
                                <option value="Uttar Predesh">Uttar Predesh</option>
                                <option value="Uttarakhand">Uttarakhand</option>
                                <option value="West Bengal">West Bengal</option>
                                <option value="Other Territory">Other Territory</option>
                              </select>
                            </div>
                            <div class="col-md-1"></div>
            
                            <div class="col-md-1">
                              <label for="vsstate">State</label>
                            </div>
                            <div class="col-md-4 ">
                              <select type="text" class="form-control bg-light text-dark" id="vsstate" name="vsstate">
                                <option value="" selected>Choose</option>
                                <option value="None Of This">None Of This</option>
                                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                </option>
                                <option value="Andhra Predhesh">Andhra Predhesh</option>
                                <option value="Arunachal Predesh">Arunachal Predesh</option>
                                <option value="Assam">Assam</option>
                                <option value="Bihar">Bihar</option>
                                <option value="Chandigarh">Chandigarh</option>
                                <option value="Chhattisgarh">Chhattisgarh</option>
                                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                <option value="Damn anad Diu">Damn anad Diu</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Goa">Goa</option>
                                <option value="Gujarat">Gujarat</option>
                                <option value="Haryana">Haryana</option>
                                <option value="Himachal Predesh">Himachal Predesh</option>
                                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                <option value="Jharkhand">Jharkhand</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Kerala">Kerala</option>
                                <option value="Ladakh">Ladakh</option>
                                <option value="Lakshadweep">Lakshadweep</option>
                                <option value="Madhya Predesh">Madhya Predesh</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Manipur">Manipur</option>
                                <option value="Meghalaya">Meghalaya</option>
                                <option value="Mizoram">Mizoram</option>
                                <option value="Nagaland">Nagaland</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Puducherry">Puducherry</option>
                                <option value="Punjab">Punjab</option>
                                <option value="Rajasthan">Rajasthan</option>
                                <option value="Sikkim">Sikkim</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Telangana">Telangana</option>
                                <option value="Tripura">Tripura</option>
                                <option value="Uttar Predesh">Uttar Predesh</option>
                                <option value="Uttarakhand">Uttarakhand</option>
                                <option value="West Bengal">West Bengal</option>
                                <option value="Other Territory">Other Territory</option>
                              </select>
                            </div>
          
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-1">
                              <label for="vcountry">Country</label>
                            </div>
                            <div class="col-md-4 ">
                              <input type="text" class="form-control bg-light text-dark" id="vcountry" name="vcountry" placeholder="Country">  
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="vscountry">Country</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vscountry"  name="vscountry" placeholder="Country">
                            </div>
                            <div class="col-md-1 "></div>
          
                          </div>
          
                          <div class="row mt-2">
          
                            <div class="col-md-1">
                              <label for="vpincode">Pincode</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vpincode" name="vpincode" maxlength="6" placeholder="PIN Code"> 
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="vspincode">Pincode</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vspincode" name="vspincode" maxlength="6"  placeholder="PIN Code">  
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
          
                            <div class="col-md-1">
                              <label for="vphone">Phone</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vphone" name="vphone"  placeholder="Phone"> 
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="vsphone">Phone</label>
                            </div>
                            <div class="col-md-4"> 
                              <input type="text" class="form-control bg-light text-dark" id="vsphone" name="vsphone"  placeholder="Phone">  
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
          
                            <div class="col-md-1">
                              <label for="vfax">Fax</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vfax" name="vfax"  placeholder="FAX"> 
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="vsfax">Fax</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="vsfax" name="vsfax"  placeholder="FAX">  
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row">
                              <div class="col-md-6">
                                <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                                <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                                <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                              </div>
                          </div>
                          <div class="row">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                              <div class="d-flex">
                                <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                                type="submit" data-dismiss="modal" id="vendorSave">Submit
                                </button> 
          
                                <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                                  data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">Cancel</span>
                                </button>
                              </div>
                            </div>
                            <div class="col-md-4"></div>
                          </div>
                        </form>
                            </div>
                        </div>
                    </div>
                </div>  
              </div>  
          
             
              <!-- customer modal -->
          
          
              <div class="modal fade" id="newcustomer">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                    <div class="modal-header " style="background: rgb(32, 35, 37);">
                        <h3 class="m-3 text-uppercase">New Customer</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="background: rgb(32, 35, 37);">
                      <div class="card p-3 m-3">
                        <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalCustomer">
                  
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="">Customer Type</label><br>
                            </div>
                            <div class="col-md-6 mt-2">
                              <div class="d-flex">
                                <div class="radio_opt mx-5 mt-2">
                                  <input type="radio" id="business" name="radioCust" value="Business" >
                                  <label for="option1">Business</label>
                                </div>
                                <div class="radio_opt mx-4 mt-2">
                                  <input type="radio" id="individual" name="radioCust" value="Individual" >
                                  <label for="option2">Individual</label>
                                </div>
                              </div>
                            </div>
                          </div>
                          <div class="row mt-5">
                            <div class="col-md-3">
                              <label for="ctitle" style="color:rgb(190, 88, 88);">Title</label>
                            </div>
                            <div class="col-md-3">
                              <select name="ctitle" id="ctitle" class="form-control bg-light text-dark">
                                <option value="Mr." selected>Mr.</option>
                                <option value="Mrs.">Mrs.</option>
                                <option value="Ms.">Ms.</option>
                                <option value="Miss.">Miss.</option>
                                <option value="Dr.">Dr.</option>
                              </select>
                            </div>
                          </div>
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="cfname" style="color:rgb(190, 88, 88);">First name</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="cfname" name="cfirstname" required>
                            </div>
                          </div>
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="clname" style="color:rgb(190, 88, 88);">Last name</label>
                              <label id="cdisplayname" name = "cdisplayname" hidden></label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="clname" name="clastname" required>
                            </div>
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="ccompany" style="color:rgb(190, 88, 88);">Company Name</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="ccompany" name="ccompany_name" required>
                            </div>
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="cemail" style="color:rgb(190, 88, 88);">Customer Email</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="email" class="form-control bg-light text-dark" id="cemail" name="cemail" placeholder="example@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required>    
                            </div>              
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="email">Customer Phone</label>
                            </div>
                            <div class="col-md-3 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="cw_mobile" placeholder="Work Number" maxlength="10" name="cw_mobile">
                            </div>        
                            <div class="col-md-3 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="cp_mobile" placeholder="Personal Number" maxlength="10" name="cp_mobile">
                            </div>          
                          </div>
          
                     
                          <hr>
                          <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
                          <div class="row mt-5">
                            <div class="col-md-3 mt-2">
                              <label for="facebook">Facebook</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="facebook" placeholder="www.example.com" name="facebook">
                            </div>       
                          </div>
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="twitter">Twitter</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="twitter" placeholder="www.example.com" name="twitter">
                            </div>       
                          </div>
          
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="website">Website</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="website" placeholder="www.example.com" name="website">
                            </div>       
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="cskype">Skype name/Number</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="cskype" name="cskype">
                            </div>       
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="c_desg">Designation</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="c_desg" name="c_desg">
                            </div>       
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="c_dpt">Department</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="c_dpt" name="c_dpt">
                            </div>       
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="c_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <select class="form-control bg-light text-dark" id="c_gsttype" name="c_gsttype" required>
                                <option value="value" selected>Select a Gst Treatment</option>
                                <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                                <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">Registered Business-Composition Business that is registered under the Composition scheme in GST</option>
                                <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                                <option value="Consumer- A customer who is a regular Consumer">Consumer- A customer who is a regular Consumer</option>
                                <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                                <option value="Special Economic Zone">Special Economic Zone</option>
                              </select>
                            </div>       
                          </div>
          
                           <div class="row gstrow d-none">
                            <div class="col-md-3 mt-2">
                              <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="c_gstin" name="c_gstin" placeholder="29APPCK7465F1Z1" required>
                              <label id="gst_label"></label>
                            </div>       
                          </div>
          
                          <div class="row">
                            <div class="col-md-3 mt-2">
                              <label for="v_pan">PAN Number</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="c_pan" name="c_pan" placeholder="APPCK7465F">
                              <label id="pan_label"></label>
                            </div>       
                          </div> 
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="" style="color: rgb(190, 88, 88);">Place of Supply *</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <select class="form-control bg-light text-dark" id="placesupply" name="placesupply">
                                <option value="Nill"></option>
                                <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                                <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                                <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                                <option value="[AS] Assam">[AS] Assam</option>
                                <option value="[BR] Bihar">[BR] Bihar</option>
                                <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                                <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                                <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                                <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                                <option value="[DL] Delhi">[DL] Delhi</option>
                                <option value="[GA] Goa">[GA] Goa</option>
                                <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                                <option value="[HR] Haryana">[HR] Haryana</option>
                                <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                                <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                                <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                                <option value="[KA] Karnataka">[KA] Karnataka</option>
                                <option value="[KL] Kerala">[KL] Kerala</option>
                                <option value="[LA] Ladakh">[LA] Ladakh</option>
                                <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                                <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                                <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                                <option value="[MN] Manipur">[MN] Manipur</option>
                                <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                                <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                                <option value="[NL] Nagaland">[NL] Nagaland</option>
                                <option value="[OD] Odisha">[OD] Odisha</option>
                                <option value="[PY] Puducherry">[PY] Puducherry</option>
                                <option value="[PB] Punjab">[PB] Punjab</option>
                                <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                                <option value="[SK] Sikkim">[SK] Sikkim</option>
                                <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                                <option value="[TS] Telangana">[TS] Telangana</option>
                                <option value="[TR] Tripura">[TR] Tripura</option>
                                <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                                <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                                <option value="[WB] West Bengal">[WB] West Bengal</option>
                                <option value="[OT] Other Territory">[OT] Other Territory</option>
                              </select>
                            </div>       
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-4 ">
                              <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference * </label>
                            </div>
                            <div class="col-md-5">
                              <div class="d-flex">
                                <div class="radio_opt mx-5 mt-2">
                                  <input type="radio" id="item-tax3" name="radioOption2" value="Taxable" >
                                  <label for="option3">Taxable</label>
                                </div>
                                <div class="radio_opt mx-4 mt-2">
                                  <input type="radio" id="item-tax4" name="radioOption2" value="Tax-exempt" >
                                  <label for="option4">Tax-exempt</label>
                                </div>
                              </div>
                            </div>       
                          </div>
          
                          <div class="row mt-2 mb-4 d-none inter-intra" >
                            <div class="col-md-3">
                              <label for="intra">Intra-State TAX</label>
                            </div>
                            <div class="col-md-3">
                              <select name="intra" class="form-control bg-light text-dark" id="intra1">
                                <option value="">Select GST</option>
          
                                <option value="GST0[0%]">GST0[0%]</option>
                                <option value="GST5[5%]">GST5[5%]</option>
                                <option value="GST12[12%]">GST12[12%]</option>
                                <option value="GST18[18%]">GST18[18%]</option>
                                <option value="GST28[28%]">GST28[28%]</option>
                              </select>             
                            </div>
          
                            
                            <div class="col-md-2">
                              <label for="inter">Inter-State TAX</label>
                            </div>
                            <div class="col-md-3">
                              <select name="inter" class="form-control bg-light text-dark" id="inter1">
                                <option value="">Select GST</option>
          
                                <option value="IGST0[0%]">IGST0[0%]</option>
                                <option value="IGST5[5%]">IGST5[5%]</option>
                                <option value="IGST12[12%]">IGST12[12%]</option>
                                <option value="IGST18[18%]">IGST18[18%]]</option>
                                <option value="IGST28[28%]">IGST28[28%]</option>
                              </select>               
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
                          
                          <hr>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="c_curn">Currency </label>
                            </div>
                            <div class="col-md-3 mt-2">
                              <select class="form-control bg-light text-dark"id="c_curn" name="c_curn" required>
                                <option selected disabled value="">Choose..</option>
                                <option value="INR">INR</option>
                              </select>
                            </div>       
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="c_open">Opening Balance</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="c_open" name="c_open">
                            </div>       
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="c_terms">Payment Terms</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <div class="d-flex">
                                <select class="form-control text-dark bg-light" id="c_terms" name="c_terms" required>
                                  <option selected value="15">NET 15</option>
                                  <option value="30">NET 30</option>
                                  <option value="45">NET 45</option>
                                  <option value="60">NET 60</option>
                                  <option value="90">NET 90</option>
                                  <option value="">Due end of the month</option>
                                  <option value="recpt">Due on receipt</option>
                                  {% for p in payments %}
                                  <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                                  {% endfor %}
                                </select>                
                                <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal">+</a>   
                              </div>
                            </div>       
                          </div>
                          
                          
          
                          <hr>
          
                          <div class="row">
                            <div class="col-md-6 mt-5 text-center text-uppercase">
                              <h4 class="mb-0">Billing Address</h4>
                            </div>
                            <div class="col-md-6 mt-5">
                              <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
                            </div>
                          </div>
                          <div class="row mt-2 m-0 p-0 mb-2">
                            <div class="col-md-9"> </div>
                            <div class="col-md-3 text-right  m-0 p-0">
                              <input type="checkbox" onclick="address()" id="voka" name="vokay">
                              <label for="voka" style="color: #909091;">Same As Billing Address</label>
                            </div>
                          </div>
          
                          <div class="row mt-5">
                            <div class="col-md-1">
                              <label for="cstreet">Address</label>
                            </div>
                            <div class="col-md-4">
                              <textarea class="form-control bg-light text-dark street" id="cstreet" name="vstreet"></textarea>
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="csstreet">Address</label>
                            </div>
                            <div class="col-md-4 ">
                              <textarea class="form-control bg-light text-dark street" id="csstreet" name="vsstreet"></textarea>
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-1">
                              <label for="ccity">City</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="ccity" name="vcity" placeholder="City">  
                            </div>
                            <div class="col-md-1">
                            </div>
                            <div class="col-md-1">
                              <label for="cscity">City</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="cscity" name="cscity" placeholder="City">  
                            </div>
                            <div class="col-md-1">
                            </div>
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-1">
                              <label for="cstate">State</label>
                            </div>
                            <div class="col-md-4">
                              <select type="text" class="form-control bg-light text-dark" id="cstate" name="vstate">
                                <option value="" selected>Choose</option>
                                <option value="None Of This">None Of This</option>
                                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                </option>
                                <option value="Andhra Predhesh">Andhra Predhesh</option>
                                <option value="Arunachal Predesh">Arunachal Predesh</option>
                                <option value="Assam">Assam</option>
                                <option value="Bihar">Bihar</option>
                                <option value="Chandigarh">Chandigarh</option>
                                <option value="Chhattisgarh">Chhattisgarh</option>
                                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                <option value="Damn anad Diu">Damn anad Diu</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Goa">Goa</option>
                                <option value="Gujarat">Gujarat</option>
                                <option value="Haryana">Haryana</option>
                                <option value="Himachal Predesh">Himachal Predesh</option>
                                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                <option value="Jharkhand">Jharkhand</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Kerala">Kerala</option>
                                <option value="Ladakh">Ladakh</option>
                                <option value="Lakshadweep">Lakshadweep</option>
                                <option value="Madhya Predesh">Madhya Predesh</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Manipur">Manipur</option>
                                <option value="Meghalaya">Meghalaya</option>
                                <option value="Mizoram">Mizoram</option>
                                <option value="Nagaland">Nagaland</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Puducherry">Puducherry</option>
                                <option value="Punjab">Punjab</option>
                                <option value="Rajasthan">Rajasthan</option>
                                <option value="Sikkim">Sikkim</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Telangana">Telangana</option>
                                <option value="Tripura">Tripura</option>
                                <option value="Uttar Predesh">Uttar Predesh</option>
                                <option value="Uttarakhand">Uttarakhand</option>
                                <option value="West Bengal">West Bengal</option>
                                <option value="Other Territory">Other Territory</option>
                              </select>
                            </div>
                            <div class="col-md-1"></div>
            
                            <div class="col-md-1">
                              <label for="csstate">State</label>
                            </div>
                            <div class="col-md-4 ">
                              <select type="text" class="form-control bg-light text-dark" id="csstate" name="vsstate">
                                <option value="" selected>Choose</option>
                                <option value="None Of This">None Of This</option>
                                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                                </option>
                                <option value="Andhra Predhesh">Andhra Predhesh</option>
                                <option value="Arunachal Predesh">Arunachal Predesh</option>
                                <option value="Assam">Assam</option>
                                <option value="Bihar">Bihar</option>
                                <option value="Chandigarh">Chandigarh</option>
                                <option value="Chhattisgarh">Chhattisgarh</option>
                                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                                <option value="Damn anad Diu">Damn anad Diu</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Goa">Goa</option>
                                <option value="Gujarat">Gujarat</option>
                                <option value="Haryana">Haryana</option>
                                <option value="Himachal Predesh">Himachal Predesh</option>
                                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                <option value="Jharkhand">Jharkhand</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Kerala">Kerala</option>
                                <option value="Ladakh">Ladakh</option>
                                <option value="Lakshadweep">Lakshadweep</option>
                                <option value="Madhya Predesh">Madhya Predesh</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Manipur">Manipur</option>
                                <option value="Meghalaya">Meghalaya</option>
                                <option value="Mizoram">Mizoram</option>
                                <option value="Nagaland">Nagaland</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Puducherry">Puducherry</option>
                                <option value="Punjab">Punjab</option>
                                <option value="Rajasthan">Rajasthan</option>
                                <option value="Sikkim">Sikkim</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Telangana">Telangana</option>
                                <option value="Tripura">Tripura</option>
                                <option value="Uttar Predesh">Uttar Predesh</option>
                                <option value="Uttarakhand">Uttarakhand</option>
                                <option value="West Bengal">West Bengal</option>
                                <option value="Other Territory">Other Territory</option>
                              </select>
                            </div>
          
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-1">
                              <label for="ccountry">Country</label>
                            </div>
                            <div class="col-md-4 ">
                              <input type="text" class="form-control bg-light text-dark" id="ccountry" name="vcountry" placeholder="Country">  
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="cscountry">Country</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="cscountry"  name="vscountry" placeholder="Country">
                            </div>
                            <div class="col-md-1 "></div>
          
                          </div>
          
                          <div class="row mt-2">
          
                            <div class="col-md-1">
                              <label for="cpincode">Pincode</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="cpincode" name="vpincode" maxlength="6" placeholder="PIN Code"> 
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="cspincode">Pincode</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="cspincode" name="vspincode" maxlength="6"  placeholder="PIN Code">  
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
          
                            <div class="col-md-1">
                              <label for="cphone">Phone</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="cphone" name="vphone"  placeholder="Phone"> 
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="csphone">Phone</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="csphone" name="vsphone"  placeholder="Phone">  
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
          
                            <div class="col-md-1">
                              <label for="cfax">Fax</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="cfax" name="vfax"  placeholder="FAX"> 
                            </div>
                            <div class="col-md-1"></div>
          
                            <div class="col-md-1">
                              <label for="csfax">Fax</label>
                            </div>
                            <div class="col-md-4">
                              <input type="text" class="form-control bg-light text-dark" id="csfax" name="vsfax"  placeholder="FAX">  
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
          
                          <div class="row mt-2">
                              <div class="col-md-6">
                                <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                                <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                                <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                              </div>
                          </div>
                          <div class="row mt-5">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                              <div class="d-flex">
                                <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                                type="submit" data-dismiss="modal" id="customersave"  >Submit
                                </button> 
          
                                <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                                  data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">Cancel</span>
                                </button>
                              </div>
                            </div>
                            <div class="col-md-4"></div>
                          </div>
                        </form>
                            </div>
                        </div>
                    </div>
                </div>  
              </div>  
          
              <!-- item modal -->
          
              <div class="modal fade" id="newitem" >
                <div class="modal-dialog modal-xl">
                  <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                    <div class="modal-header " style="background: rgb(32, 35, 37);">
                        <h3 class="m-3 text-uppercase">New Item</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="background: rgb(32, 35, 37);">
                      <div class="card p-3 m-3">
                        <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalItem">
          
                          <div class="row mt-2">
                            <div class="col-md-4 mr-0">
                              <label class="col-form-label col-sm-2 p-0">Type <i class="fa fa-question-circle"></i></label>
                            </div>
                            <div class="col-md-5 ml-0 d-flex">
                              <div class="radio_opt mx-5 ">
                                <input type="radio" id="item_type1" name="radioOption" value="Goods" >
                                <label for="option1">Goods</label>
                              </div>
                              <div class="radio_opt mx-5 ">
                                <input type="radio" id="item_type2" name="radioOption" value="Services" >
                                <label for="option2">Services</label>
                              </div>
                            </div>
                          </div>
                          <div class="row mt-2">
                            <div class="col-md-3">
                              <label for="name" style="color: rgb(190, 88, 88);">Name *</label>
                            </div>
                            <div class="col-md-6">
                              <input type="text" class="form-control bg-light text-dark" id="item_name" name="item_name" required>
                            </div>
                          </div>
                          <div class="row mt-2">
                            <div class="col-md-3 ">
                              <label for="units">Unit</label>
                            </div>
                            <div class="col-md-6">
                              <div class="d-flex">
                                <select class="form-control bg-light text-dark" id="item_units" name="item_units" required>
                                  <option value="">Select Unit</option>
                                  {% for u in units %}
                                  <option value="{{u.id}}">{{u.unit}}</option>
                                  {% endfor %}
                                </select>                
                                <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newunit" data-toggle="modal">+</a>  
                              </div>
                            </div>
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-4 ">
                              <label for="c_tax" style="color: rgb(190, 88, 88);">Tax Preference * </label>
                            </div>
                            <div class="col-md-5">
                              <div class="d-flex">
                                <div class="radio_opt mx-5 mt-2">
                                  <input type="radio" id="item-tax1" name="radioOption1" value="Taxable" >
                                  <label for="option1">Taxable</label>
                                </div>
                                <div class="radio_opt mx-4 mt-2">
                                  <input type="radio" id="item-tax2" name="radioOption1" value="Tax-exempt" >
                                  <label for="option2">Tax-exempt</label>
                                </div>
                              </div>
                            </div>       
                          </div>
          
                          <div class="row mt-2 mb-4 d-none inter-intra" >
                            <div class="col-md-3">
                              <label for="intra">Intra-State TAX</label>
                            </div>
                            <div class="col-md-3">
                              <select name="intra" class="form-control bg-light text-dark" id="intra">
                                <option value="">Select GST</option>
          
                                <option value="GST0[0%]">GST0[0%]</option>
                                <option value="GST5[5%]">GST5[5%]</option>
                                <option value="GST12[12%]">GST12[12%]</option>
                                <option value="GST18[18%]">GST18[18%]</option>
                                <option value="GST28[28%]">GST28[28%]</option>
                              </select>             
                            </div>
          
                            
                            <div class="col-md-2">
                              <label for="inter">Inter-State TAX</label>
                            </div>
                            <div class="col-md-3">
                              <select name="inter" class="form-control bg-light text-dark" id="inter">
                                <option value="">Select GST</option>
          
                                <option value="IGST0[0%]">IGST0[0%]</option>
                                <option value="IGST5[5%]">IGST5[5%]</option>
                                <option value="IGST12[12%]">IGST12[12%]</option>
                                <option value="IGST18[18%]">IGST18[18%]]</option>
                                <option value="IGST28[28%]">IGST28[28%]</option>
                              </select>               
                            </div>
                            <div class="col-md-1"></div>
          
                          </div>
                          
                          <hr>
          
                          <div class="row mt-5 text-center">
                            <div class="col-md-6 d-flex text-center">
                              <input  type="checkbox" name="selling" checked class="mx-2 my-0">
                              <h6 class="m-0">Selling Information</h6>
                            </div>
                            <div class="col-md-6 d-flex text-center">
                              <input  type="checkbox" name="purchase" checked class="mx-2 my-0">
                              <h6 class="m-0">Purchase Information</h6>
                            </div>
                          </div>
                          
                          <div class="row mt-4">
                            <div class="col-md-2">
                              <label for="sell_price">Selling Price *</label>
                            </div>
                            <div class="col-md-4">
                              <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                  <div class="input-group-text">INR</div>
                                </div>
                                <input required type="text" class="form-control bg-light text-dark" name="sell_price" id="sell_price">
                              </div>                  
                            </div>
          
                            <div class="col-md-2">
                              <label for="cost_price">Cost Price *</label>
                            </div>
                            <div class="col-md-4 ">
                              <div class="input-group mb-2">
                                <div class="input-group-prepend">
                                  <div class="input-group-text">INR</div>
                                </div>
                                <input required type="text" class="form-control bg-light text-dark" name="cost_price" id="cost_price">
                              </div>
                            </div>
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-2">
                              <label for="vcity">Account</label>
                            </div>
                            <div class="col-md-4">
                              <select name="sell_acc" id="sell_acc" class="form-control bg-light text-dark">
                                <option value="">Select Account</option>
                 
                                  <option value="" disabled class="btn btn-dark text-white"><b>SALES</b></option>
                                  {% for s in sales %}
                                      <option value="{{s.id}}">{{ s.Account_name }}</option>
                                {% endfor %}
                              </select> 
                            </div>
                            <div class="col-md-2">
                              <label for="cost_acc">Account</label>
                            </div>
                            <div class="col-md-4">
                              <select name="cost_acc" class="form-control bg-light text-dark" id="cost_acc">
                                <option value="">Select Account</option>
          
          
                                
                                  <option value="" disabled class="btn btn-dark text-white"><b>PURCHASE</b></option>
                                  {% for p in purchase %}
                                      <option value="{{p.id}}">{{ p.Account_name }}</option>
                                {% endfor %}
          
                              </select> 
                            </div>
                          </div>
          
                          <div class="row mt-2">
                            <div class="col-md-2">
                              <label for="sell_desc">Description</label>
                            </div>
                            <div class="col-md-4">
                              <input  type="text" name="sell_desc" class="form-control bg-light text-dark"  id="sell_desc">
                            </div>
            
                            <div class="col-md-2">
                              <label for="cost_desc">Description</label>
                            </div>
                            <div class="col-md-4 ">
                              <input  type="text" name="cost_desc" class="form-control bg-light text-dark"  id="cost_desc">
                            </div>
          
                          </div>
          
                          <div class="row mt-3">
                              <div class="col-md-6">
                                <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                                <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                                <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
                              </div>
                          </div>
                          <div class="row">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                              <div class="d-flex">
                                <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                                type="submit" data-dismiss="modal" id="itemSave">Submit
                                </button> 
          
                                <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                                  data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">Cancel</span>
                                </button>
                              </div>
                            </div>
                            <div class="col-md-4"></div>
                          </div>
                        </form>
                            </div>
                        </div>
                    </div>
                </div>  
              </div>  
          
          
              <!-- unit modal -->
          
              <div class="modal fade" id="newunit">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                    <div class="modal-header " style="background: rgb(32, 35, 37);">
                        <h3 class="m-3 text-uppercase">Add Unit</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="background: rgb(32, 35, 37);">
                      <div class="card p-3 m-3">
                        <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalUnit">
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2"></div>
                            <div class="col-md-1 mt-2">
                              <label for="unit" style="color: rgb(190, 88, 88);">Unit</label>
                            </div>
          
                            <div class="col-md-4 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="unit" name="unit" required>
                            </div>
                            <div class="col-md-4 mt-2"></div>
                          </div>
                          
                          <div class="row mt-5">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                              <div class="d-flex">
                                <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                                type="submit" data-dismiss="modal" id="unitSave">Save
                                </button> 
                                
          
                                <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                                  data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">Cancel</span>
                                </button>
                              </div>
                            </div>
                            <div class="col-md-4"></div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>  
              </div>  
          
          
              <!-- account modal -->
          
              <div class="modal fade" id="newaccount">
                <div class="modal-dialog modal-xl">
                  <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
                    <div class="modal-header " style="background: rgb(32, 35, 37);">
                        <h3 class="m-3 text-uppercase">New Account</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="background: rgb(32, 35, 37);">
                      <div class="card p-3 m-3">
                        <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalAccount">
                  
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="">Account Type</label><br>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="acct_type" name="acct_type" required>
                            </div>
                          </div>
                          
                          <div class="row mt-2">
                            <div class="col-md-3 mt-2">
                              <label for="cfname">Account name</label>
                            </div>
                            <div class="col-md-6 mt-2">
                              <input type="text" class="form-control bg-light text-dark" id="acct_name" name="acct_name" required>
                            </div>
                          </div>            
          
                          <div class="row mt-5">
                            <div class="col-md-4"></div>
                            <div class="col-md-4">
                              <div class="d-flex">
                                <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                                type="submit" data-dismiss="modal" id="accountSave">Submit
                                </button> 
          
                                <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                                  data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">Cancel</span>
                                </button>
                              </div>
                            </div>
                            <div class="col-md-4"></div>
                          </div>
                        </form>
                      </div>
                    </div>
                  </div>
                </div>  
              </div>  
          
          
              <!-- end of modal -->
          
          
          
              
            </div>
            </div>
          </div>
          
          <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
          
          <script>
            
          
           
          
          
          
          $(document).ready(function() {
              $('#vendor').change(function() {
          
                  var name = $("#vendor").val();
                  var na = name.split(' ')
                  $.ajax({
          
                      url: "{% url 'get_vendordet' %}", 
          
                      data: { 
                              fname : na[0],
                              lname : na[1],
                              id :na[2],
                              csrfmiddlewaretoken: '{{ csrf_token }}' 
                          },
          
                      type : 'POST',
          
                      success: function(data) {
                        // console.log(data.vendor_email);
                          $("#email_row").removeClass('d-none');
                          $("#email_row").addClass('d-flex');
                          $("#gstin_row").removeClass('d-none');
                          $("#gstin_row").addClass('d-flex');
                          $("#gst_trt_row").removeClass('d-none');
                          $("#gst_trt_row").addClass('d-flex');
          
                          $('#email_inp').val(" " +data.vendor_email);
                          $('#gstin_inp').val(" " +data.gst_number);
                          $('#gst_trt_inp').val(" "+data.gst_treatment);
          
                      }
                  });
              
              });
          });
          
          $(document).ready(function() {
            $('#custom').change(function() {
              var name = $("#custom").val();
              var na = name.split(' ');
              console.log(name)
              $.ajax({
                url: "{% url 'customer_det' %}",
                data: {
                  name:name,
                  csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                type: 'POST',
                success: function(data) {
                  console.log(data)
                  $("#cemail_inp").val(data.customer_email);
                  $("#custAddress").val(data.adres);
                  $("#custstreet").val(data.streat);
                  $("#custcity").val(data.city);
                  $("#custstate").val(data.state);
                  document.getElementById('company_state').value = data.st
          
                }
              });
            });
          });
          
          
          
          
          
          
          
            $(document).ready(function() {
              $("#fname, #lname").change(function() {
                $("#vdisplayname").text($("#title").val() +" " + $("#fname").val() + " " + $("#lname").val());
              });
            });
          
          
            $(document).ready(function() {
              $("#v_gsttype").change(function() {
                var x=$('#v_gsttype').val();
                // console.log(x)
                if(x=="unregistered Business") 
                {
                  $(".gstrow").addClass('d-none');
          
                }
                else if(x == 'Overseas'){
                  $(".gstrow").addClass('d-none');
                }
                else 
                {
                  $(".gstrow").removeClass('d-none');
                  $(".gstrow").addClass('d-flex');
                }
              
              });
            });
          
          
              $(document).ready(function() {
              $("#v_gstin").change(function() {
          
                  var x=$("v_gstin").val();
                  var gst_label=document.getElementById("gst_label")
                  var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
                  if (!expr.test(x)) {
                      gst_label.style.color="red";
                      gst_label.innerHTML = "Invalid GST Number.";
                  }
                  else{
                      gst_label.style.color="green";
                      gst_label.innerHTML = "valid GST Number.";
          
                  }
                });
              });
          
              $(document).ready(function() {
                $("#v_pan").change(function() {
                  var x= $("#v_pan").val();
                  var pan_label=document.getElementById("pan_label")
                  var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
                  if (!expr.test(x)) {
                      pan_label.style.color="red";
                      pan_label.innerHTML = "Invalid PAN Number.";
                  }
                  else{
                      pan_label.style.color="green";
                      pan_label.innerHTML = "valid PAN Number.";
          
                  }
                });
              });
          
              $(document).ready(function() {
              $("#cfname, #clname").change(function() {
                $("#cdisplayname").text($("#ctitle").val() +" " + $("#cfname").val() + " " + $("#clname").val());
              });
            });
          
          
            $(document).ready(function() {
    $("#c_gsttype").change(function() {
        var x = $('#c_gsttype').val();
        // console.log(x)
        if (x == "Unregistered Business-not Registered under GST" || x == "Overseas- Persons with who you do import or exports of supplies outside india") {
            $(".gstrow").addClass('d-none');
        } else {
            $(".gstrow").removeClass('d-none');
            $(".gstrow").addClass('d-flex');
        }
    });
});

          
          
              $(document).ready(function() {
              $("#c_gstin").change(function() {
          
                  var x=$("c_gstin").val();
                  var gst_label=document.getElementById("gst_label")
                  var expr=/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
                  if (!expr.test(x)) {
                      gst_label.style.color="red";
                      gst_label.innerHTML = "Invalid GST Number.";
                  }
                  else{
                      gst_label.style.color="green";
                      gst_label.innerHTML = "valid GST Number.";
          
                  }
                });
              });
          
              $(document).ready(function() {
                $("#c_pan").change(function() {
                  var x= $("#c_pan").val();
                  var pan_label=document.getElementById("pan_label")
                  var expr=    /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/
                  if (!expr.test(x)) {
                      pan_label.style.color="red";
                      pan_label.innerHTML = "Invalid PAN Number.";
                  }
                  else{
                      pan_label.style.color="green";
                      pan_label.innerHTML = "valid PAN Number.";
          
                  }
                });
              });
          
          
            function addressSame(){
              var chkbtn = document.getElementById('vokay');
              if (chkbtn.checked == true) {
                document.getElementById('vsstreet').value = document.getElementById('vstreet').value;
                document.getElementById('vscity').value = document.getElementById('vcity').value;
                document.getElementById('vspincode').value = document.getElementById('vpincode').value;
                document.getElementById('vscountry').value = document.getElementById('vcountry').value;
                document.getElementById('vsstate').value = document.getElementById('vstate').value;
                document.getElementById('vsphone').value = document.getElementById('vphone').value;
                document.getElementById('vsfax').value = document.getElementById('vfax').value;
              } 
              else {
                document.getElementById('vsstreet').value = '';
                document.getElementById('vscity').value = '';
                document.getElementById('vsstate').value = '';
                document.getElementById('vspincode').value = '';
                document.getElementById('vscountry').value = '';
                document.getElementById('vsphone').value = '';
                document.getElementById('vsfax').value = '';
              }
            }
          
          
          
            function address(){
              var chkbtn = document.getElementById('voka');
              if (chkbtn.checked == true) {
                document.getElementById('csstreet').value = document.getElementById('cstreet').value;
                document.getElementById('cscity').value = document.getElementById('ccity').value;
                document.getElementById('cspincode').value = document.getElementById('cpincode').value;
                document.getElementById('cscountry').value = document.getElementById('ccountry').value;
                document.getElementById('csstate').value = document.getElementById('cstate').value;
                document.getElementById('csphone').value = document.getElementById('cphone').value;
                document.getElementById('csfax').value = document.getElementById('cfax').value;
              } 
              else {
                document.getElementById('csstreet').value = '';
                document.getElementById('cscity').value = '';
                document.getElementById('csstate').value = '';
                document.getElementById('cspincode').value = '';
                document.getElementById('cscountry').value = '';
                document.getElementById('csphone').value = '';
                document.getElementById('csfax').value = '';
              }
            }
          //------customer create 
          
          $(document).on("click","#customersave",function(){
            if ($('input[name="radioCust"]:checked').val() == 'Business'){
          
              itemtype = $('#business').val();
            }
            else{
              itemtype = $('#individual').val();
            }
          
            if ($('input[name="radioOption2"]:checked').val() == 'Taxable'){
              inte = $('#item-tax3').val();
              
            }
            else{
              inte = $('#item-tax4').val();
            }
          
          
            $.ajax({
              
              type : 'POST',
              url:"{% url 'ewayb_customer' %}",
          
              data:{
                  tax:inte,
                  itemtype:itemtype,
                  title : $("#ctitle").val(),
                  firstname : $("#cfname").val(),
                  lastname : $("#clname").val(),
                  company_name : $("#ccompany").val(),
                  display_name : $('#cdisplayname').text(),
                  email : $("#cemail").val(),
                  website :$("#cwsite").val(),
                  work_mobile :$("#cw_mobile").val(),
                  pers_mobile :$("#cp_mobile").val(),
                  skype :$("#cskype").val(),
                  facebook :$("#facebook").val(),
                  twitter :$("#twitter").val(),
                  desg :$("#c_desg").val(),
                  dpt :$("#c_dpt").val(),
                  gsttype :$("#c_gsttype").val(),
                  gstin :$("#c_gstin").val(),
                  panno : $("#c_pan").val(),
                  placesupply :$("#placesupply").val(),
                  currency : $("#c_curn").val(),
                  openingbalance : $("#c_open").val(),
                  paymentterms : $("#c_terms").val(),
                  street : $("#cstreet").val(),
                  city : $("#ccity").val(),
                  state : $("#cstate").val(),
                  pincode : $("#cpincode").val(),
                  fax : $("#cfax").val(),
                  phone : $("#cphone").val(),
                  country : $("#ccountry").val(),
                  shipstreet : $("csstreet").val(),
                  shipcity : $("#cscity").val(),
                  shipstate : $("#csstate").val(),
                  shippincode : $("#cspincode").val(),
                  shipcountry : $("#cscountry").val(),
                  shipfax : $("#csfax").val(),
                  shipphone : $("#csphone").val(),
                  radioCust: $("input[name='radioCust']:checked").val(),
                  csrfmiddlewaretoken: '{{ csrf_token }}',
                },
                
                success: function(response) {
    document.getElementById("modalCustomer").reset();
    reloadcustomer(); // Call the reloadcustomer function to update the dropdown


                  
                },
            });        
          });
          
          function reloadcustomer() {
    $.ajax({
        url: "{% url 'customer_dropdown_ewayb' %}",
        type: "GET",
        dataType: "json",
        data: {}, // You can pass additional data if needed
        success: function(data) {
            var dropdown = $('#customer');
            dropdown.empty();
            $.each(data, function(key, value) {
            var optionText = value[1];
            var optionValue = key;

    // Append the option to the dropdown
    dropdown.append($('<option></option>').attr('value', optionValue).text(optionText));
    
        });
        },
        error: function(xhr, status, error) {
            console.error(xhr.responseText);
        }
    });
}


          
            //---------modal vendor-----
          
          $(document).on("click","#vendorSave",function(){
            $.ajax({
              
              type : 'POST',
              url:"{% url 'purchase_vendor' %}",
          
              data:{
                  title : $("#title").val(),
                  firstname : $("#fname").val(),
                  lastname : $("#lname").val(),
                  company_name : $("#vcompany").val(),
                  display_name : $('#vdisplayname').text(),
                  email : $("#vemail").val(),
                  website :$("#wsite").val(),
                  work_mobile :$("#vw_mobile").val(),
                  pers_mobile :$("#vp_mobile").val(),
                  skype :$("#vskype").val(),
                  desg :$("#v_desg").val(),
                  dpt :$("#v_dpt").val(),
                  gsttype :$("#v_gsttype").val(),
                  gstin :$("#v_gstin").val(),
                  panno : $("#v_pan").val(),
                  sourceofsupply :$("#v_srcsupply").val(),
                  currency : $("#v_curn").val(),
                  openingbalance : $("#v_open").val(),
                  paymentterms : $("#v_terms").val(),
                  street : $("#vstreet").val(),
                  city : $("#vcity").val(),
                  state : $("#vstate").val(),
                  pincode : $("#vpincode").val(),
                  fax : $("#vfax").val(),
                  phone : $("#vphone").val(),
                  country : $("#vcountry").val(),
                  shipstreet : $("#vsstreet").val(),
                  shipcity : $("#vscity").val(),
                  shipstate : $("#vsstate").val(),
                  shippincode : $("#vspincode").val(),
                  shipcountry : $("#vscountry").val(),
                  shipfax : $("#vsfax").val(),
                  shipphone : $("#vsphone").val(),
                  csrfmiddlewaretoken: '{{ csrf_token }}'
                  
                },
              
                success: function(response) {
                  document.getElementById("modalVendor").reset();
                  reloadVendor();
                },
            });        
          });
          
          function reloadVendor() {
            $.ajax({
              url: "{% url 'vendor_dropdown' %}",
              type: "GET",
              dataType: "json",
              data: $(this).serialize(),
              csrfmiddlewaretoken: '{{ csrf_token }}',
          
              success: function(data) {
                var dropdown = $('#vendor');
                dropdown.empty();
                $.each(data, function(key, value) {
                    dropdown.append($('<option></option>').attr('value', key).text(value[0]+" " +value[1] + ' ' + value[2]).val(value[1] + ' ' + value[2]+ ' ' +value[3]));
                });
              },
              error: function(xhr, status, error) {
              console.error(xhr.responseText);
              }
            });
          }
          
         
          
          // unit modal
          
          
          $(document).on("click","#unitSave",function(){
            $.ajax({
              
              type : 'POST',
              url:"{% url 'purchase_unit_eway' %}",
          
              data:{
                  unit : $("#unit").val(),      
                  csrfmiddlewaretoken: '{{ csrf_token }}'
                  
                },
              
                success: function(response) {
                  document.getElementById("modalUnit").reset();
                  reloadUnit();
                },
            });        
          });
          
          
          function reloadUnit() {
          
            $.ajax({
              url: "{% url 'purchase_unit_dropdown_eway' %}",
              type: "GET",
              dataType: "json",
              data: $(this).serialize(),
              csrfmiddlewaretoken: '{{ csrf_token }}',
          
              success: function(data) {
                var dropdown = $('#item_units');
                dropdown.empty();
          
                $.each(data, function(key, value) {
                    dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                });
              },
              error: function(xhr, status, error) {
              console.error(xhr.responseText);
              }
            });
          }
          
          
          // item modal
          
          $(document).ready(function() {
            $("#item-tax1").click(function() {
            //  console.log($("#item_units").val().split(' ')[0]);
              $(".inter-intra").removeClass('d-none');
              $(".inter-intra").addClass('d-flex');
            });
          
            $("#item-tax2").click(function() {
          
              $(".inter-intra").removeClass('d-flex');
              $(".inter-intra").addClass("d-none");
            });
          });
          
          $(document).ready(function() {
            $("#item-tax3").click(function() {
            //  console.log($("#item_units").val().split(' ')[0]);
              $(".inter-intra").removeClass('d-none');
              $(".inter-intra").addClass('d-flex');
            });
          
            $("#item-tax4").click(function() {
          
              $(".inter-intra").removeClass('d-flex');
              $(".inter-intra").addClass("d-none");
            });
          });
          
          $(document).on("click","#itemSave",function(){
          
            if ($('input[name="radioOption"]:checked').val() == 'Goods'){
          
                itemtype = $('#item_type1').val();
              }
            else{
              itemtype = $('#item_type2').val();
            }
          
            if ($('input[name="radioOption1"]:checked').val() == 'Taxable'){
                inter = $('#inter').val();
                intra = $('#intra').val();
              }
            else{
              inter = 0;
              intra = 0;
            }
          
            
            $.ajax({
              
              type : 'POST',
              url:"{% url 'purchase_item_eway' %}",
              
              data:{
                  type : itemtype,
                  name : $("#item_name").val(),
                  unit : $("#item_units").val(),
                  inter : inter,
                  intra : intra,
                  sell_price : $("#sell_price").val(),
                  cost_price : $("#cost_price").val(),
                  sell_acc : $("#sell_acc").val(),
                  cost_acc : $("#cost_acc").val(),
                  sell_desc : $("#sell_desc").val(),
                  cost_desc : $("#cost_desc").val(),
                  
                  csrfmiddlewaretoken: '{{ csrf_token }}'
                  
                },
              
                success: function(response) {
                  document.getElementById("modalItem").reset();
                  reloadItem();
                },
            });        
          });
          
          
          function reloadItem() {
            $.ajax({
              url: "{% url 'purchase_item_dropdown_eway' %}",
              type: "GET",
              dataType: "json",
              data: $(this).serialize(),
              csrfmiddlewaretoken: '{{ csrf_token }}',
          
              success: function(data) {
                var dropdown = $('.itm');
                dropdown.empty();
          
                $.each(data, function(key, value) {
                    dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                });
              },
              error: function(xhr, status, error) {
              console.error(xhr.responseText);
              }
            });
          }
          
          // account modal
          
          $(document).on("click","#accountSave",function(){
          
            $.ajax({
              
              type : 'POST',
              url:"{% url 'purchase_account' %}",
              
              data:{
                  actype : $("#acct_type").val(),
                  acname : $("#acct_name").val(),
               
                  csrfmiddlewaretoken: '{{ csrf_token }}'
                  
                },
              
                success: function(response) {
                  document.getElementById("modalAccount").reset();
                  reloadAccount();
                },
            });        
          });
          
          
          function reloadAccount() {
            $.ajax({
              url: "{% url 'purchase_account_dropdown' %}",
              type: "GET",
              dataType: "json",
              data: $(this).serialize(),
              csrfmiddlewaretoken: '{{ csrf_token }}',
          
              success: function(data) {
                var dropdown = $('.acnt');
                dropdown.empty();
          
                $.each(data, function(key, value) {
                    dropdown.append($('<option></option>').attr('value', key).text(value).val(value));
                });
              },
              error: function(xhr, status, error) {
              console.error(xhr.responseText);
              }
            });
          }
          
          </script>
          
          <script>
          var rowCount = 1;
          $(document).ready(function () {
            // Counter for row IDs
          
            // Function to calculate the row amount
            function calculateRowAmount(row) {
              var qty = parseFloat(row.find('.qty').val());
              var rate = parseFloat(row.find('.rate').val());
              var tax = parseFloat(row.find('.tax').val());
              var discount = parseFloat(row.find('.discount').val());
          
              var rowAmount = (qty * rate) - discount;
              var taxAmount = (rowAmount * tax) / 100;
          
              row.find('.amount').val(rowAmount.toFixed(2));
              row.find('.taxamount').val(taxAmount.toFixed(2));
              
              return rowAmount;
              calculateTaxAmount();
            }
          
            // Function to calculate the subtotal
            function calculateSubtotal() {
              var subtotal = 0;
              $('#item_table tbody tr').each(function () {
                subtotal += calculateRowAmount($(this));
              });
              $('#subtotal').val(subtotal.toFixed(2));
            }
          
          // Function to calculate the grand total
          function calculateGrandTotal() {
            var grandTotal = 0;
            var totalTaxAmount = 0;
          
            $('#item_table tbody tr').each(function () {
              var rowAmount = calculateRowAmount($(this));
              grandTotal += rowAmount;
              var taxAmount = parseFloat($(this).find('.taxamount').val());
              grandTotal += taxAmount;
              totalTaxAmount += taxAmount;
            });
            var shippingCharges = parseFloat($('#shipping').val());
            grandTotal += shippingCharges;
            var adjA = parseFloat($('#adji').val());
            grandTotal += adjA;
            $('#grandtotal').val(grandTotal.toFixed(2));
            $('#total_taxamount').val(totalTaxAmount.toFixed(2));
          }
          
            $('#item_table').on('change', '.tax', function () {
              var row = $(this).closest('tr');
              calculateRowAmount(row);
              calculateSubtotal();
              calculateGrandTotal();
            });
          
            $('#add-row').click(function () {
              rowCount++; // Increment row counter
              var newRow = `
                <tr id='row${rowCount}'>
                  <td style="width: 10%;">
                    <div>
                      <select class='form-control bg-light text-dark  border-0 item_select itm' name='item[]' id='item${rowCount}'>
                        <option value=" " selected disabled>Select Item</option>
                        {% for i in item %}
                          <option value="{{i.Name}}">{{ i.Name }}</option>
                        {% endfor %}
                      </select>
                    </div>
                  </td>
          
                 
                  
                  <td style="width: 13%;" class='text-right'>
                    <input type='number' id='qty${rowCount}' class='text-right bg-light text-dark qty form-control' name='quantity[]' value='0'>
                  </td>
                  
                  <td style="width: 15%;" class='text-right'>
                    <input type='number' id='rate${rowCount}' class='text-right bg-light text-dark rate form-control' name='rate[]' value='0'>
                  </td>
                  
                  <td style="width: 12%;" class='text-right'>
                    <input type='number' id='discount${rowCount}' class='text-right bg-light text-dark discount form-control' name='discount[]' value='0'>
                  </td>
                  
                  <td style="width: 15%;" class='text-right'>
                    <select name='tax[]'  id='tax${rowCount}' class='form-control bg-light text-dark text-right border-0 tax' onclick=' toggleDateInput()'>
                      <optgroup class="text-center" label="GST">
                                      <option value="0">0% GST(0%)</option>
                                      <option value="3">3.0% GST(3%)</option>
                                      <option value="5">5.0% GST(5%)</option>
                                      <option value="12">12.0% GST(12%)</option>
                                      <option value="18">18.0% GST(18%)</option>
                                      <option value="28">28.0% GST(28%)</option>
                                    </optgroup>
                                    <optgroup  class="text-center" label="IGST">
                                     
                                      <option value="0">0% IGST(0%)</option>
                                      <option value="3">3.0% IGST(3%)</option>
                                      <option value="5">5.0% IGST(5%)</option>
                                      <option value="12">12.0% IGST(12%)</option>
                                      <option value="18">18.0% IGST(18%)</option>
                                      <option value="28">28.0% IGST(28%)</option>             
                                      </optgroup>
                    </select>
                  </td>
                  
                  <td style="display: none;">
                    <input type="text" name='taxamount' id="taxamount${rowCount}" class="form-control bg-light text-dark taxamount" />
                  </td>
                  
                  <td style="width: 15%;" class='text-right'>
                    <input type='number' id='amount${rowCount}' class='text-right bg-light text-dark form-control amount' name='amount[]' value='0.00'>
                  </td>
                  
                  <td class='text-center'>
                    <button type='button' id='del_btn${rowCount}' class='btn btn-transparent text-danger btn-sm btn-outline-danger rounded-circle delete-row' style='width:30px'>X</button>
                  </td>
                  <td class='text-center'>
                  <button type='button' class='btn btn-transparent text-primary btn-sm btn-outline-primary rounded-circle clone-row' data-row='${rowCount}' style='width:30px'><i class="fa fa-clone"></i>
          </button>
                </td>
                </tr>
              `;
            $('#item_table tbody').append(newRow);
              toggleDateInput();
              calculateSubtotal();
              calculateGrandTotal();
            });
            $('#item_table').on('click', '.delete-row', function () {
              $(this).closest('tr').remove();
              calculateSubtotal();
              calculateGrandTotal();
              calculateTaxAmount();
            });
            $('#srcofsupply').on('change', function () {
            var row = $(this).closest('tr');
            calculateRowAmount(row);
            calculateSubtotal();
            calculateGrandTotal();
            toggleDateInput();
            calculateTaxAmount();
          
            // Calculate total tax amount and its IGST amount
            var totalTaxAmount = 0;
            var totalIGSTAmount = 0;
          
            $('#item_table tbody tr').each(function () {
              var tax = $(this).find('.tax').val();
              var amount = $(this).find('.amount').val();
          
              var taxAmount = amount * (tax / 100);
              totalTaxAmount += taxAmount;
          
              if (tax.startsWith('IGST')) {
                totalIGSTAmount += taxAmount;
              }
            });
          
            // Update the total tax amount and its IGST amount in the UI
            $('#total_taxamount').val(totalTaxAmount.toFixed(2));
            $('#total_igstamount').val(totalIGSTAmount.toFixed(2));
          });
          
            $(document).ready(function() {
              var row = $(this).closest('tr');
              calculateRowAmount(row);
              calculateSubtotal();
              calculateGrandTotal();
              toggleDateInput();
              calculateTaxAmount();
          });
            // Input change event for quantity, rate, and discount
            $('#item_table').on('input', '.qty, .rate, .discount,.tax', function () {
              var row = $(this).closest('tr');
              calculateRowAmount(row);
              calculateSubtotal();
              calculateGrandTotal();
              toggleDateInput();
              calculateTaxAmount();
            });
          
            $('#shipping').on('input', function () {
              var shippingAmount = parseFloat($(this).val());5
              $('#shipping_charge').val(shippingAmount.toFixed(2));
              calculateGrandTotal();
            });
          
            $('#adji').on('input', function () {
              var adjAm = parseFloat($(this).val());5
              $('#adj').val(adjAm.toFixed(2));
              calculateGrandTotal();
            });
          
            // Add an event listener to the fields in the item table
          $('#item_table').on('click', '.item_select, .acnt, .rate, .qty, .tax, .discount', function () {
            var row = $(this).closest('tr');
            var taxElement = row.find('.tax');
          
            var checkbox = document.getElementById("srcofsupply");
            var vale = checkbox.value;
          
            if (vale === "[KL] Kerala") {
              taxElement.find('optgroup[label="GST"]').show();
              taxElement.find('optgroup[label="IGST"]').hide();
            } else {
              taxElement.find('optgroup[label="GST"]').hide();
              taxElement.find('optgroup[label="IGST"]').show();
            }
          });
          
          // Event handler for clone button
          $('#item_table').on('click', '.clone-row', function () {
            var row = $(this).closest('tr');
            var clonedRow = row.clone(); // Clone the current row
            var newRowId = 'row' + rowCount; // Generate a new ID for the cloned row
            clonedRow.attr('id', newRowId); // Set the new ID for the cloned row
          
            // Clone the options for tax, account, and item
            var currentItem = row.find('.item_select').val();
            clonedRow.find('.item_select').val(currentItem);
            var currentAccount = row.find('.acnt').val();
            clonedRow.find('.acnt').val(currentAccount);
            var currentTax = row.find('.tax').val();
            clonedRow.find('.tax').val(currentTax);
          
            rowCount++; // Increment row counter
          
            $('#item_table tbody').append(clonedRow);
            var row = $(this).closest('tr');
            calculateRowAmount(row);
            calculateSubtotal();
            calculateGrandTotal();
            toggleDateInput();
            calculateTaxAmount();
            toggleDateInput();
          });
          
          
                 
          
          });
          function calculateTaxAmount() {
                  var checkbox = document.getElementById("srcofsupply");
                  var vale=checkbox.value;
                  var srcofsupply = vale; // Replace with the actual value of srcofsupply
                  var companyState = "[KL] Kerala"; // Replace with the actual value of company state
          
                  var subtotal = parseFloat(document.getElementById("subtotal").value);
                  var shipping = parseFloat(document.getElementById("shipping").value);
                  var adj = parseFloat(document.getElementById("adji").value);
                  var tax = parseFloat(document.getElementById("total_taxamount").value);
                  
                  var tax_rate = 0.0; // Default tax rate for IGST
                  if (srcofsupply === companyState) {
                      tax_rate =tax; // Tax rate for CGST/SGST
                  }
          
                  var total_taxamount = tax_rate;
          
                  var cgst = 0.00;
                  var sgst = 0.00;
                  var igst = 0.00;
          
                  if (srcofsupply === companyState) {
                      cgst = total_taxamount / 2;
                      sgst = total_taxamount / 2;
                  } else {
                      igst = tax;
                  }
          
                  document.getElementById("cgst").value = cgst.toFixed(2);
                  document.getElementById("sgst").value = sgst.toFixed(2);
                  document.getElementById("igst").value = igst.toFixed(2);
          
                  if (srcofsupply === companyState) {
                      document.getElementById("tr_igst").style.display = "none";
                      document.getElementById("tr_cgst").style.display = "";
                      document.getElementById("tr_sgst").style.display = "";
                  } else {
                      document.getElementById("tr_igst").style.display = "";
                      document.getElementById("tr_cgst").style.display = "none";
                      document.getElementById("tr_sgst").style.display = "none";
                  }
          
                  document.getElementById("total_taxamount").value = total_taxamount.toFixed(2);
                  var grandtotal = subtotal + total_taxamount + shipping + adji;
                  document.getElementById("grandtotal").value = grandtotal.toFixed(2);
              }
          
              // Call the function initially on page load
              
          
              // Add event listeners to update tax amounts when subtotal or shipping changes
              document.getElementById("subtotal").addEventListener("input", calculateTaxAmount);
              document.getElementById("shipping").addEventListener("input", calculateTaxAmount);
              
          
          function toggleDateInput() {
                var checkbox = document.getElementById("srcofsupply");
                var vale=checkbox.value;
                
                for (var i = 1; i <= rowCount; i++) {
                  var taxElement = $('#tax' + i);
          
                  if (vale === "[KL] Kerala") {
                      taxElement.find('optgroup[label="GST"]').show();
                      taxElement.find('optgroup[label="IGST"]').hide();
                  } else {
                      taxElement.find('optgroup[label="GST"]').hide();
                      taxElement.find('optgroup[label="IGST"]').show();
                  }
              }
            }
          
            function test(taxamount) {
                  console.log('test333');
                  console.log(taxamount)
                  d = 0;
                  var checkbox = document.getElementById("srcofsupply");
                  var vale=checkbox.value;
                  console.log(pos)
                  console.log('state')
                  console.log(state)
                  console.log('state')
                  console.log('----------')
                  if ( vale === "[KL] Kerala") {
                      console.log(pos);
                      console.log(state);
                      console.log(taxamount);
                      gst = taxamount / 2;
                      console.log(gst);
                      $('#cgst').val(parseFloat(gst.toFixed(2)));
                      $('#sgst').val(parseFloat(gst.toFixed(2)));
                      $('#igst').val(parseFloat(d.toFixed(2)));
                      
                      // document.getElementById('tr_cgst').style= ('display: flex');
                      
                      // document.getElementById('tr_sgst').style= ('display: flex');
                      // document.getElementById('tr_igst').style= ('display: none');
          
                     
                  }
                  else{
                      gst = taxamount ;
                      console.log(gst);
                      $('#cgst').val(parseFloat(d.toFixed(2)));
                      $('#sgst').val(parseFloat(d.toFixed(2)));
                      $('#igst').val(parseFloat(gst.toFixed(2)));
                  }
                  var checkbox = document.getElementById("srcofsupply");
                  var vale=checkbox.value;
                  var pos= "[KL] Kerala"
                  if (vale==pos){
          
                  }
          
                  if (vale !=  "[KL] Kerala") {
                      console.log(pos);
                      console.log(state);
                      document.getElementById('tr_cgst').style=('display: none');
                      document.getElementById('tr_sgst').style= ('display: none');
                      document.getElementById('tr_igst').style= ('display: block');
                  }
                  else{
                      document.getElementById('tr_cgst').style=('display: block');
                      document.getElementById('tr_sgst').style= ('display: block');
                      document.getElementById('tr_igst').style= ('display: none');
                  }
              }
          
          </script>
          
          <script>
            $(document).ready(function () {
          
          
                var roinc = 0
                console.log("ajax");
                // var place = document.getElementById('pos').value;
          
                $(document).on('click', '#item1', function () {
                    select = $('#item1').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            data4=response.place
                            document.getElementById('rate1').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst1').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst1').value = data1
                            }
                            document.getElementById('tigst1').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst1').value = data2
          
                        }
                    });
          
                });
                // console.log('pos:'+place_of_supply);
                $(document).on('click', '#item2', function () {
                    select = $('#item2').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate2').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst2').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst2').value = data1
                            }
                            document.getElementById('tigst2').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst2').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item3', function () {
                    select = $('#item3').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate3').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst3').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst3').value = data1
                            }
                            document.getElementById('tigst3').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst3').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item4', function () {
                    select = $('#item4').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate4').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst4').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst4').value = data1
                            }
                            document.getElementById('tigst4').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst4').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item5', function () {
                    select = $('#item5').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate5').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst5').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst5').value = data1
                            }
                            document.getElementById('tigst5').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst5').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item6', function () {
                    select = $('#item6').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate6').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst6').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst6').value = data1
                            }
                            document.getElementById('tigst6').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst6').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item7', function () {
                    select = $('#item7').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate7').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst7').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst7').value = data1
                            }
                            document.getElementById('tigst7').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst7').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item8', function () {
                    select = $('#item8').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate8').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst8').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst8').value = data1
                            }
                            document.getElementById('tigst8').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst8').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item9', function () {
                    select = $('#item9').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate9').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst9').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst9').value = data1
                            }
                            document.getElementById('tigst9').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst9').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item10', function () {
                    select = $('#item10').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate10').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst10').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst10').value = data1
                            }
                            document.getElementById('tigst10').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst10').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item11', function () {
                    select = $('#item11').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate11').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst11').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst11').value = data1
                            }
                            document.getElementById('tigst11').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst11').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item12', function () {
                    select = $('#item12').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate12').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst12').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst12').value = data1
                            }
                            document.getElementById('tigst12').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst12').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item13', function () {
                    select = $('#item13').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate13').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst13').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst13').value = data1
                            }
                            document.getElementById('tigst13').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst13').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item14', function () {
                    select = $('#item14').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate14').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst14').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst14').value = data1
                            }
                            document.getElementById('tigst14').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst14').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item15', function () {
                    select = $('#item15').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate15').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst15').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst15').value = data1
                            }
                            document.getElementById('tigst15').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst15').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item16', function () {
                    select = $('#item16').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate16').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst16').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst16').value = data1
                            }
                            document.getElementById('tigst16').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst16').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item17', function () {
                    select = $('#item17').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate17').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst17').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst17').value = data1
                            }
                            document.getElementById('tigst17').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst17').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item18', function () {
                    select = $('#item18').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate18').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst18').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst18').value = data1
                            }
                            document.getElementById('tigst18').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst18').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item19', function () {
                    select = $('#item19').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate19').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst19').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst19').value = data1
                            }
                            document.getElementById('tigst19').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst19').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item20', function () {
                    select = $('#item20').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate20').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst20').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst20').value = data1
                            }
                            document.getElementById('tigst20').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst20').value = data2
          
                        }
                    });
          
                });
          
                $(document).on('click', '#item21', function () {
                    select = $('#item21').val();
                    customer = $('#customer_sel').val();
                    console.log(select);
                    console.log(customer);
                    $.ajax({
                        type: "GET",
                        url: "{% url 'itemdata_challan' %}",
                        data: {
                            id: select,
                            cust: customer
                        },
                        success: function (response) {
                            console.log(response)
                            data = response.rate
                            data1 = response.gst
                            data2 = response.igst
                            data3 = response.pos
                            document.getElementById('rate21').value = data
          
                            if (data3 == '{{ company.state }}') {
                                document.getElementById('tgst21').innerHTML = data1 + ' % GST';
                                document.getElementById('tgst21').value = data1
                            }
                            document.getElementById('tigst21').innerHTML = data2 + ' % IGST';
                            document.getElementById('tigst21').value = data2
          
                        }
                    });
          
                });
          
          
            });
          </script>
          <!-- Modal for Transportation Input -->
<div class="modal fade" id="transportModal" tabindex="-1" role="dialog" aria-labelledby="transportModalLabel" aria-hidden="true" style="z-index: 9999;">
  <div class="modal-dialog bg-dark" role="document">
      <div class="modal-content bg-dark">
          <div class="modal-body">
              <h1>Add Transportation</h1>
              <form id="transportForm">
                  {% csrf_token %}
                  <input type="text" id="transportInput" class="form-control bg-light text-dark" placeholder="Transportation Method">
                  <div class="modal-footer">
                      <button type="submit" class="btn btn-warning">Save</button>
                      <button type="button" class="btn btn-warning" data-dismiss="modal">Close</button>
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
   // Update the dropdown list with transportation options
function updateTransportationOptions() {
    $.ajax({
        type: 'GET',
        url: '/get-transportation-options/',  // Use the correct URL
        success: function(response) {
            // Clear existing options in the dropdown
            $('#transportation').empty();

            // Add the hidden and selected placeholder option
            $('#transportation').append('<option value="" hidden selected></option>');

            // Add the default options "Bus," "Car," and "Train"
            $('#transportation').append('<option value="Bus">Bus</option>');
            $('#transportation').append('<option value="Car">Car</option>');
            $('#transportation').append('<option value="Train">Train</option>');

            // Add the fetched transportation options to the dropdown
            response.options.forEach(function(option) {
                $('#transportation').append('<option value="' + option + '">' + option + '</option>');
            });
        },
        error: function(error) {
            console.error('Error fetching transportation options:', error);
        }
    });
}

// Call the function to populate the dropdown initially
updateTransportationOptions();

// Add an event listener to the "Create Transportation" button
$('#create-trans').on('click', function() {
    $('#transportModal').modal('show');
});

// Add an event listener to the form submission
$('#transportForm').submit(function(event) {
    event.preventDefault(); // Prevent default form submission
    
    var transportationMethod = $('#transportInput').val();
    if (transportationMethod.trim() !== '') {
        $.ajax({
            type: 'POST',
            url: '/add-transportation/',  // URL from your Django URL configuration
            data: {
                csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val(),
                method: transportationMethod
            },
            success: function(response) {
                console.log(response.message);
                $('#transportModal').modal('hide');
                // Refresh view or update UI as needed
                updateTransportationOptions(); // Call the function to update the dropdown
            },
            error: function(error) {
                console.error('Error adding transportation:', error);
            }
        });
    }
});

</script>
<!--modal-->
     
<div id="myModa" class="modal2 container-fluid" style="z-index: 9999;">
  <div class="modal1-content  bg-dark">
    <div class="d-flex justify-content-end">
      <button type="button" class="close btn  text-grey " 
                  onclick="document.getElementById('myModa').style.display='none'" style="background-color: rgb(210, 30, 30);">
                      <span aria-hidden="true">X</span>
        </div>
    <div class="modal-body" style="background: rgb(32, 35, 37);">
      <div class="card p-3 m-3">
        <form action="" method="post"  id="modalCustomer" class="needs-validation" novalidate autocomplete="off"> 
          {% csrf_token %}
          <div class="row mt-2">
            <h1>Add Customer</h1><br><br>
            <div class="col-md-3 mt-2">
              
              <label for="">Customer Type</label><br>
            </div>
            <div class="col-md-6 mt-2">
              <div class="d-flex">
                <div class="radio_opt mx-5 mt-2">
                  <input type="radio" id="business" name="radioCust" value="Business" >
                  <label for="option1">Business</label>
                </div>
                <div class="radio_opt mx-4 mt-2">
                  <input type="radio" id="individual" name="radioCust" value="Individual" >
                  <label for="option2">Individual</label>
                </div>
              </div>
            </div>
          </div>
          <div class="row mt-5">
            <div class="col-md-3">
              <label for="ctitle">Title</label>
            </div>
            <div class="col-md-3">
              <select name="ctitle" id="ctitle" class="form-control text-dark bg-light">
                <option value="Mr." selected>Mr.</option>
                <option value="Mrs.">Mrs.</option>
                <option value="Ms.">Ms.</option>
                <option value="Miss.">Miss.</option>
                <option value="Dr.">Dr.</option>
              </select>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="cfname" style="color:rgb(190, 88, 88);">First name*</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="cfname" name="cfirstname" required>
            </div>
          </div>
          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="clname" style="color:rgb(190, 88, 88);">Last name*</label>
              <label id="cdisplayname" name = "cdisplayname" hidden></label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="clname" name="clastname" required>
            </div>
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="ccompany">Company Name</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="ccompany" name="ccompany_name">
            </div>
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="cemail" style="color:rgb(190, 88, 88);">Customer Email*</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="email" class="form-control text-dark bg-light" id="cemail" name="cemail" placeholder="example@gmail.com" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required>    
            </div>              
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="email">Customer Phone</label>
            </div>
            <div class="col-md-3 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="cw_mobile" placeholder="Work Number" maxlength="10" name="cw_mobile">
            </div>        
            <div class="col-md-3 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="cp_mobile" placeholder="Personal Number" maxlength="10" name="cp_mobile">
            </div>          
          </div>

     
          <hr>
          <center><h4 class="text-uppercase mb-3"><b>Other Details</b></h4></center>
          <div class="row mt-5">
            <div class="col-md-3 mt-2">
              <label for="facebook">Facebook</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="facebook" placeholder="www.example.com" name="facebook">
            </div>       
          </div>
          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="twitter">Twitter</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="twitter" placeholder="www.example.com" name="twitter">
            </div>       
          </div>


          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="website">Website</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="website" placeholder="www.example.com" name="website">
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="cskype">Skype name/Number</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="cskype" name="cskype">
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="c_desg">Designation</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="c_desg" name="c_desg">
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="c_dpt">Department</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="c_dpt" name="c_dpt">
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="c_gsttype" style="color:rgb(190, 88, 88);">GST Treatment *</label>
            </div>
            <div class="col-md-6 mt-2">
              <select class="form-control text-dark bg-light" id="c_gsttype" name="c_gsttype" required>
                <option value="value" selected>Select a Gst Treatment</option>
                <option value="Registered Business-Regular Business that is registered under GST">Registered Business-Regular Business that is registered under GST</option>
                <option value="Registered Business-Composition Business that is registered under the Composition scheme in GST">Registered Business-Composition Business that is registered under the Composition scheme in GST</option>
                <option value="Unregistered Business-not Registered under GST">Unregistered Business-not Registered under GST</option>
                <option value="Consumer- A customer who is a regular Consumer">Consumer- A customer who is a regular Consumer</option>
                <option value="Overseas- Persons with who you do import or exports of supplies outside india">Overseas- Persons with who you do import or exports of supplies outside india</option>
                <option value="Special Economic Zone">Special Economic Zone</option>
              </select>
            </div>       
          </div>

          <!-- <div class="row gstrow d-none">
            <div class="col-md-3 mt-2">
              <label id="glbl" style="color:rgb(190, 88, 88);">GSTIN/UIN *</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control" id="v_gstin" name="v_gstin" placeholder="29APPCK7465F1Z1">
              <label id="gst_label"></label>
            </div>       
          </div>

          <div class="row">
            <div class="col-md-3 mt-2">
              <label for="v_pan">PAN Number</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control" id="v_pan" name="v_pan" placeholder="APPCK7465F">
              <label id="pan_label"></label>
            </div>       
          </div> -->

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="" style="color: rgb(190, 88, 88);">Place of Supply *</label>
            </div>
            <div class="col-md-6 mt-2">
              <select class="form-control text-dark bg-light" id="placesupply" name="placesupply" required>
                <option value="Nill"></option>
                <option value="[AN] Andaman and Nicobar Islads">[AN] Andaman and Nicobar Islads</option>
                <option value="[AD] Andhra Predhesh">[AD] Andhra Predhesh</option>
                <option value="[AR] Arunachal Predesh">[AR] Arunachal Predesh</option>
                <option value="[AS] Assam">[AS] Assam</option>
                <option value="[BR] Bihar">[BR] Bihar</option>
                <option value="[CH] Chandigarh">[CH] Chandigarh</option>
                <option value="[CG] Chhattisgarh">[CG] Chhattisgarh</option>
                <option value="[DNH] Dadra and Nagar Haveli">[DNH] Dadra and Nagar Haveli</option>
                <option value="[DD] Damn anad Diu">[DD] Damn anad Diu</option>
                <option value="[DL] Delhi">[DL] Delhi</option>
                <option value="[GA] Goa">[GA] Goa</option>
                <option value="[GJ] Gujarat">[GJ] Gujarat</option>
                <option value="[HR] Haryana">[HR] Haryana</option>
                <option value="[HP] Himachal Predesh">[HP] Himachal Predesh</option>
                <option value="[JK] Jammu and Kashmir">[JK] Jammu and Kashmir</option>
                <option value="[JH] Jharkhand">[JH] Jharkhand</option>
                <option value="[KA] Karnataka">[KA] Karnataka</option>
                <option value="[KL] Kerala">[KL] Kerala</option>
                <option value="[LA] Ladakh">[LA] Ladakh</option>
                <option value="[LD] Lakshadweep">[LD] Lakshadweep</option>
                <option value="[MP] Madhya Predesh">[MP] Madhya Predesh</option>
                <option value="[MH] Maharashtra">[MH] Maharashtra</option>
                <option value="[MN] Manipur">[MN] Manipur</option>
                <option value="[ML] Meghalaya">[ML] Meghalaya</option>
                <option value="[MZ] Mizoram">[MZ] Mizoram</option>
                <option value="[NL] Nagaland">[NL] Nagaland</option>
                <option value="[OD] Odisha">[OD] Odisha</option>
                <option value="[PY] Puducherry">[PY] Puducherry</option>
                <option value="[PB] Punjab">[PB] Punjab</option>
                <option value="[RJ] Rajasthan">[RJ] Rajasthan</option>
                <option value="[SK] Sikkim">[SK] Sikkim</option>
                <option value="[TN] Tamil Nadu">[TN] Tamil Nadu</option>
                <option value="[TS] Telangana">[TS] Telangana</option>
                <option value="[TR] Tripura">[TR] Tripura</option>
                <option value="[UP] Uttar Predesh">[UP] Uttar Predesh</option>
                <option value="[UK] Uttarakhand">[UK] Uttarakhand</option>
                <option value="[WB] West Bengal">[WB] West Bengal</option>
                <option value="[OT] Other Territory">[OT] Other Territory</option>
              </select>
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="c_tax" >Tax Preference </label>
            </div>
            <div class="col-md-6 mt-2">
              <div class="d-flex">
                <div class="radio_opt mx-5 mt-2">
                  <input type="radio" id="custtax1" name="radioCust1" value="Taxable" >
                  <label for="option1">Taxable</label>
                </div>
                <div class="radio_opt mx-4 mt-2">
                  <input type="radio" id="custtax2" name="radioCust1" value="Tax-exempt" >
                  <label for="option2">Tax-exempt</label>
                </div>
              </div>
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="c_curn" style="color: rgb(190, 88, 88);">Currency *</label>
            </div>
            <div class="col-md-3 mt-2">
              <select class="form-control text-dark bg-light" id="c_curn" name="c_curn" required>
                <option selected disabled value="">Choose..</option>
                <option value="INR">INR</option>
              </select>
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="c_open">Opening Balance</label>
            </div>
            <div class="col-md-6 mt-2">
              <input type="text" class="form-control text-dark bg-light" id="c_open" name="c_open">
            </div>       
          </div>

          <div class="row mt-2">
            <div class="col-md-3 mt-2">
              <label for="c_terms">Payment Terms</label>
            </div>
            <div class="col-md-6 mt-2">
              <div class="d-flex">
                <select class="form-control text-dark bg-light" id="c_terms" name="c_terms" >
                  <option selected value="15">NET 15</option>
                  <option value="30">NET 30</option>
                  <option value="45">NET 45</option>
                  <option value="60">NET 60</option>
                  <option value="90">NET 90</option>
                  <option value="">Due end of the month</option>
                  <option value="recpt">Due on receipt</option>
                  {% for p in payments %}
                  <option value="{{p.Terms}} {{p.id}}">{{p.Terms}}</option>
                  {% endfor %}
                </select>                
                <a href="#" class="btn btn-outline-secondary py-2 my-1" data-target="#newpayment" data-toggle="modal" id="paymentterms">+</a>   
              </div>
            </div>       
          </div>
          

          <hr>

          <div class="row mt-2">
            <div class="col-md-6 mt-5 text-center text-uppercase">
              <h4 class="mb-0">Billing Address</h4>
            </div>
            <div class="col-md-6 mt-5">
              <h4 class="mb-0 text-center text-uppercase">Shipping Address</h4>
            </div>
          </div>
          <div class="row mt-2 m-0 p-0 mb-2">
            <div class="col-md-9"> </div>
            <div class="col-md-3 text-right  m-0 p-0">
              <input type="checkbox" onclick="addressSame()" id="csokay" name="csokay">
              <label for="csokay" style="color: #909091;">Same As Billing Address</label>
            </div>
          </div>

          <div class="row mt-5">
            <div class="col-md-1">
              <label for="cstreet1">Address 1</label>
            </div>
            <div class="col-md-4">
              <textarea class="form-control street text-dark bg-light" id="cstreet1" name="cstreet1"></textarea>
            </div>
            <div class="col-md-1"></div>

            <div class="col-md-1">
              <label for="csstreet1">Address 1</label>
            </div>
            <div class="col-md-4 ">
              <textarea class="form-control street text-dark bg-light" id="csstreet1" name="csstreet1"></textarea>
            </div>
            <div class="col-md-1"></div>

          </div>
          <div class="row mt-5">
            <div class="col-md-1">
              <label for="cstreet2">Address 2</label>
            </div>
            <div class="col-md-4">
              <textarea class="form-control street text-dark bg-light" id="cstreet2" name="cstreet2"></textarea>
            </div>
            <div class="col-md-1"></div>

            <div class="col-md-1">
              <label for="csstreet2">Address 2</label>
            </div>
            <div class="col-md-4 ">
              <textarea class="form-control street text-dark bg-light" id="csstreet2" name="csstreet2"></textarea>
            </div>
            <div class="col-md-1"></div>

          </div>

          <div class="row mt-2">
            <div class="col-md-1">
              <label for="ccity">City</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="ccity" name="ccity" placeholder="City">  
            </div>
            <div class="col-md-1">
            </div>
            <div class="col-md-1">
              <label for="cscity">City</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="cscity" name="cscity" placeholder="City">  
            </div>
            <div class="col-md-1">
            </div>
          </div>

          <div class="row mt-2">
            <div class="col-md-1">
              <label for="cstate">State</label>
            </div>
            <div class="col-md-4">
              <select type="text" class="form-control text-dark bg-light" id="cstate" name="cstate">
                <option value="" selected>Choose</option>
                <option value="None Of This">None Of This</option>
                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads</option>
                <option value="Andhra Predhesh">Andhra Predhesh</option>
                <option value="Arunachal Predesh">Arunachal Predesh</option>
                <option value="Assam">Assam</option>
                <option value="Bihar">Bihar</option>
                <option value="Chandigarh">Chandigarh</option>
                <option value="Chhattisgarh">Chhattisgarh</option>
                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                <option value="Damn anad Diu">Damn anad Diu</option>
                <option value="Delhi">Delhi</option>
                <option value="Goa">Goa</option>
                <option value="Gujarat">Gujarat</option>
                <option value="Haryana">Haryana</option>
                <option value="Himachal Predesh">Himachal Predesh</option>
                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                <option value="Jharkhand">Jharkhand</option>
                <option value="Karnataka">Karnataka</option>
                <option value="Kerala">Kerala</option>
                <option value="Ladakh">Ladakh</option>
                <option value="Lakshadweep">Lakshadweep</option>
                <option value="Madhya Predesh">Madhya Predesh</option>
                <option value="Maharashtra">Maharashtra</option>
                <option value="Manipur">Manipur</option>
                <option value="Meghalaya">Meghalaya</option>
                <option value="Mizoram">Mizoram</option>
                <option value="Nagaland">Nagaland</option>
                <option value="Odisha">Odisha</option>
                <option value="Puducherry">Puducherry</option>
                <option value="Punjab">Punjab</option>
                <option value="Rajasthan">Rajasthan</option>
                <option value="Sikkim">Sikkim</option>
                <option value="Tamil Nadu">Tamil Nadu</option>
                <option value="Telangana">Telangana</option>
                <option value="Tripura">Tripura</option>
                <option value="Uttar Predesh">Uttar Predesh</option>
                <option value="Uttarakhand">Uttarakhand</option>
                <option value="West Bengal">West Bengal</option>
                <option value="Other Territory">Other Territory</option>
              </select>
            </div>
            <div class="col-md-1"></div>

            <div class="col-md-1">
              <label for="csstate">State</label>
            </div>
            <div class="col-md-4 ">
              <select type="text" class="form-control text-dark bg-light" id="csstate" name="csstate">
                <option value="" selected>Choose</option>
                <option value="None Of This">None Of This</option>
                <option value="Andaman and Nicobar Islads">Andaman and Nicobar Islads
                </option>
                <option value="Andhra Predhesh">Andhra Predhesh</option>
                <option value="Arunachal Predesh">Arunachal Predesh</option>
                <option value="Assam">Assam</option>
                <option value="Bihar">Bihar</option>
                <option value="Chandigarh">Chandigarh</option>
                <option value="Chhattisgarh">Chhattisgarh</option>
                <option value="Dadra and Nagar Haveli">Dadra and Nagar Haveli</option>
                <option value="Damn anad Diu">Damn anad Diu</option>
                <option value="Delhi">Delhi</option>
                <option value="Goa">Goa</option>
                <option value="Gujarat">Gujarat</option>
                <option value="Haryana">Haryana</option>
                <option value="Himachal Predesh">Himachal Predesh</option>
                <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                <option value="Jharkhand">Jharkhand</option>
                <option value="Karnataka">Karnataka</option>
                <option value="Kerala">Kerala</option>
                <option value="Ladakh">Ladakh</option>
                <option value="Lakshadweep">Lakshadweep</option>
                <option value="Madhya Predesh">Madhya Predesh</option>
                <option value="Maharashtra">Maharashtra</option>
                <option value="Manipur">Manipur</option>
                <option value="Meghalaya">Meghalaya</option>
                <option value="Mizoram">Mizoram</option>
                <option value="Nagaland">Nagaland</option>
                <option value="Odisha">Odisha</option>
                <option value="Puducherry">Puducherry</option>
                <option value="Punjab">Punjab</option>
                <option value="Rajasthan">Rajasthan</option>
                <option value="Sikkim">Sikkim</option>
                <option value="Tamil Nadu">Tamil Nadu</option>
                <option value="Telangana">Telangana</option>
                <option value="Tripura">Tripura</option>
                <option value="Uttar Predesh">Uttar Predesh</option>
                <option value="Uttarakhand">Uttarakhand</option>
                <option value="West Bengal">West Bengal</option>
                <option value="Other Territory">Other Territory</option>
              </select>
            </div>

            <div class="col-md-1"></div>

          </div>

          <div class="row mt-2">
            <div class="col-md-1">
              <label for="ccountry">Country</label>
            </div>
            <div class="col-md-4 ">
              <input type="text" class="form-control text-dark bg-light" id="ccountry" name="ccountry" placeholder="Country">  
            </div>
            <div class="col-md-1"></div>

            <div class="col-md-1">
              <label for="cscountry">Country</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="cscountry"  name="cscountry" placeholder="Country">
            </div>
            <div class="col-md-1 "></div>

          </div>

          <div class="row mt-2">

            <div class="col-md-1">
              <label for="cpincode">Pincode</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="cpincode" name="cpincode" maxlength="6" placeholder="PIN Code"> 
            </div>
            <div class="col-md-1"></div>

            <div class="col-md-1">
              <label for="cspincode">Pincode</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="cspincode" name="cspincode" maxlength="6" placeholder="PIN Code">  
            </div>
            <div class="col-md-1"></div>

          </div>

          <div class="row mt-2">

            <div class="col-md-1">
              <label for="cphone">Phone</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="cphone" name="cphone" placeholder="Phone"> 
            </div>
            <div class="col-md-1"></div>

            <div class="col-md-1">
              <label for="csphone">Phone</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="csphone" name="csphone" placeholder="Phone">  
            </div>
            <div class="col-md-1"></div>

          </div>

          <div class="row mt-2">

            <div class="col-md-1">
              <label for="cfax">Fax</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="cfax" name="cfax" placeholder="FAX"> 
            </div>
            <div class="col-md-1"></div>

            <div class="col-md-1">
              <label for="csfax">Fax</label>
            </div>
            <div class="col-md-4">
              <input type="text" class="form-control text-dark bg-light" id="csfax" name="csfax" placeholder="FAX">  
            </div>
            <div class="col-md-1"></div>

          </div>

          <div class="row mt-2">
              <div class="col-md-6">
                <input type="checkbox" value="" id="invalidCheck" name="invalidCheck" required>
                <label for="invalidCheck" style="color: #909091;">Agree to terms and conditions</label>
                <div class="invalid-feedback text-warning" >You must agree before submitting.</div>
              </div>
          </div>
          <div class="row mt-5">
            <div class="col-md-4"></div>
            <div class="col-md-4">
              <div class="d-flex">
                <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                type="submit" data-dismiss="modal" id="customerSave" style="background-color: rgb(210, 132, 30);">Submit
                </button> 

                <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                onclick="document.getElementById('myModa').style.display='none'" style="background-color: rgb(210, 132, 30);">
                    <span aria-hidden="true">Cancel</span>
                </button>
              </div>
            </div>
            <div class="col-md-4"></div>
          </div>
        </form>
            </div>
        </div>
  </div>
</div>
<script>
  var createUserBtn = document.getElementById("create-cus");
  var modal1 = document.getElementById("myModa");

  createUserBtn.onclick = function() {
    modal1.style.display = "block";
  }

  var cancelBtn = document.getElementById("cancel-btn");

  cancelBtn.onclick = function() {
   modal1.style.display = "none";
  }
</script>
     
     <div id="myModal2" class="modal3" style="z-index: 9999;">
      <div class="modal3-content bg-dark">
        <h2>New Payment Terms</h2>
    
        <form id="payment-form">
          {% csrf_token %} {# Add the CSRF token #}
    
          <div class="form-group">
            <label for="term-name" style="color: rgb(190, 88, 88);">Term Name*</label>
            <input type="text" id="term-name" class="form-control bg-light text-dark" required>
          </div>
    
          <div class="form-group">
            <label for="number-of-days" style="color: rgb(190, 88, 88);">Number of days*</label>
            <input type="number" id="number-of-days" class="form-control bg-light text-dark" required>
          </div>
    
          <div class="modal1-buttons">
            <button type="submit" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="create-btnz">Create</button>
            <button type="button" onclick="document.getElementById('myModal2').style.display='none'" class="btn btn-sm text-white" style="background-color: rgb(210, 132, 30);" id="cancel-btn">Cancel</button>
          </div>
        </form>
      </div>
    </div>
    
    <script>
      function addUnit() {
      let unitForm = document.getElementById("unitForm");
      let formData = new FormData(unitForm);
    
      $.ajax({
        url: "{% url 'createuser' %}",
        type: "POST",
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
          if (response.status === "success") {
            // Handle the success response for a successful creation
            console.log(response);
            var data = response.username;
            var data2 = response.email;
    
            // Add the newly created user and email to all user select elements
            $('[id^="user_select"]').each(function() {
              var option = new Option(data, data);
              $(this).append(option);
            });
    
            $('[id^="email"]').each(function() {
              var option = new Option(data2, data2);
              $(this).append(option);
            });
    
            closeForm();
            $("#myModal").hide();
          } else if (response.status === "error" && response.message === "User already exists") {
            // Handle the case where a user with the same name already exists
            alert("User already exists");
          }
        },
        error: function(error) {
          // Handle the error response
          console.log(error);
        }
      });
    }
    function closeForm() {
            let formContainer = document.getElementById("unitForm");
           
            $("#myModal").hide(); // Hide the modal
        }
    
    
      </script>
    <script>
      var createUserBtn = document.getElementById("paymentterms");
      var modal3 = document.getElementById("myModal2");
    
      createUserBtn.onclick = function() {
        modal3.style.display = "block";
      }
    
      var cancelBtn = document.getElementById("cancel-btn");
    
      cancelBtn.onclick = function() {
       modal3.style.display = "none";
      }
    </script>
    
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            // Bind a click event to the "Create Payment Term" button
            $("#paymentterms").click(function() {
                // Display the modal to create new payment terms
                $("#myModal2").css("display", "block");
            });
    
            // Handle form submission for adding new payment terms
            $("#payment-form").submit(function(event) {
                event.preventDefault(); // Prevent form submission
    
                // Extract term name and number of days from the form
                var termName = $("#term-name").val();
                var numberOfDays = $("#number-of-days").val();
    
                // Perform an AJAX POST request to add the new payment term
                $.ajax({
                    type: "POST",
                    url: "{% url 'recurbills_pay_eway' %}",
                    data: {
                        name: termName,
                        days: numberOfDays,
                        csrfmiddlewaretoken: '{{ csrf_token }}'
                    },
                    success: function(response) {
                        // If the new payment term is added successfully,
                        // update the dropdown list with the new option
                        $("#c_terms").append(
                            '<option value="' + termName + ' ' + response.id + '">' + termName + '</option>'
                        );
    
                        // Hide the modal
                        $("#myModal2").css("display", "none");
                    },
                    error: function(xhr, textStatus, errorThrown) {
                        console.error(errorThrown);
                    }
                });
            });
        });
    </script>
    <script>
      $(document).ready(function() {
    $('#customer').change(function() {

        var name = $("#customer").val();
        var na = name.split(' ')[0];
        $.ajax({

            url: "{% url 'get_customerdet_eway' %}", 

            data: { 
                    // name : na[1]+ " " + na[2] + " "+ na[3],
                    id : na,
                    csrfmiddlewaretoken: '{{ csrf_token }}' 
                },

            type : 'POST',

            success: function(data) {
              console.log(data)
              $("#cemail_row").removeClass('d-none');
              $("#cemail_row").addClass('d-flex');
              
              $("#cgst_trt_row").removeClass('d-none');
              $("#cgst_trt_row").addClass('d-flex');
              $('#cemail_inp').val(' '+ data.customer_email);
              $('#cgst_trt_inp').val(' ' +data.gst_treatment);

              if( data.gst_treatment == 'Registered Business-Regular Business that is registered under GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ data.gstin);

              }
              else if( data.gst_treatment == 'Registered Business-Composition Business that is registered under the Composition scheme in GST'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ data.gstin);
              }
              else if( data.gst_treatment == 'Overseas- Persons with who you do import or exports of supplies outside india'){
                $("#cgstin_row").removeClass('d-none');
                $("#cgstin_row").addClass('d-flex');
                $('#cgstin_inp').val(' '+ data.gstin);
              }
              
              else{
                $("#cgstin_row").addClass('d-none');
              }

                // gst or igst in tax

              $("#cust_state").val(data.state);
              
            }
           
        });
    });
});
    </script>
    <!-- Add your existing HTML content here -->
<!-- payment modal -->


<div class="modal fade" id="newpayment">
  <div class="modal-dialog modal-xl">
    <div class="modal-content" style="background: rgb(32, 35, 37);border-radius: 20px;">
      <div class="modal-header " style="background: rgb(32, 35, 37);">
          <h3 class="m-3 text-uppercase">Add Payment Term</h3>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
      </div>
      <div class="modal-body" style="background: rgb(32, 35, 37);">
        <div class="card p-3 m-3">
          <form action="" method="post" class="needs-validation" novalidate autocomplete="off" id="modalPayment">
            <div class="row mt-2">
              <div class="col-md-2 mt-2"></div>
              <div class="col-md-4 mt-2">
                <center><label for="termname" style="color: rgb(190, 88, 88);">Term Name *</label></center>
              </div>

              <div class="col-md-4 mt-2">
                <center><label for="termdays" style="color: rgb(190, 88, 88);">Number of Days *</label></center>
              </div>
              <div class="col-md-2 mt-2"></div>
            </div>


            <div class="row mt-2">
              <div class="col-md-2 mt-2"></div>

              <div class="col-md-4 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="term_name" name="term_name" required>      
              </div>

              <div class="col-md-4 mt-2">
                <input type="text" class="form-control text-dark bg-light" id="term_days" name="term_days" required>
              </div>
              <div class="col-md-2 mt-2"></div>

            </div>
            
            <div class="row mt-5">
              <div class="col-md-4"></div>
              <div class="col-md-4">
                <div class="d-flex">
                  <button class="btn save_btn rounded-pill text-grey w-50 my-4 mx-3"
                  type="submit" data-dismiss="modal" id="paySave">Save
                  </button> 
                  

                  <button type="button" class="close btn save_btn rounded-pill text-grey w-50 my-4" 
                    data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">Cancel</span>
                  </button>
                </div>
              </div>
              <div class="col-md-4"></div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>  
</div>     
<script>
  //--------payment terms modal-----------

$(document).on("click","#paySave",function(){
  $.ajax({
    
    type : 'POST',
    url:"{% url 'recurbills_pay' %}",

    data:{
        name : $("#term_name").val(),
        days : $("#term_days").val(),
        
        csrfmiddlewaretoken: '{{ csrf_token }}'
        
      },
    
      success: function(response) {
        document.getElementById("modalPayment").reset();
        reloadPayment();
      },
  });        
});

function reloadPayment() {

  $.ajax({
    url: "{% url 'pay_dropdown' %}",
    type: "GET",
    dataType: "json",
    data: $(this).serialize(),
    csrfmiddlewaretoken: '{{ csrf_token }}',

    success: function(data) {
      var dropdown = $('#c_terms');
      dropdown.empty();
      dropdown.append(`<option selected value="15">NET 15</option>
                          <option value="30">NET 30</option>
                          <option value="45">NET 45</option>
                          <option value="60">NET 60</option>
                          <option value="90">NET 90</option>
                          <option value="">Due end of the month</option>
                          <option value="recpt">Due on receipt</option>`);
      var drpv = $('#v_terms');
      drpv.empty();
      drpv.append(`<option selected value="15">NET 15</option>
                        <option value="30">NET 30</option>
                        <option value="45">NET 45</option>
                        <option value="60">NET 60</option>
                        <option value="90">NET 90</option>
                        <option value="">Due end of the month</option>
                        <option value="recpt">Due on receipt</option>`);
      $.each(data, function(key, value) {
          dropdown.append($('<option></option>').attr('value', key).text(value[0]).val(value[1]));
          drpv.append($('<option></option>').attr('value', key).text(value).val(value));
      });
    },
    error: function(xhr, status, error) {
    console.error(xhr.responseText);
    }
  });
}

</script> 
<script>
  var customerSelect = document.getElementById('customer');
  var customerEmailInput = document.getElementById('cemail_inp');
  var gstTreatmentInput = document.getElementById('cgst_trt_inp');
  var gstNumberInput = document.getElementById('cgstin_inp');

  customerSelect.addEventListener('change', function() {
    var selectedOption = this.options[this.selectedIndex];
    var email = selectedOption.dataset.email;
    var gstTreatment = selectedOption.dataset.gstTreatment;
    var gstNumber = selectedOption.dataset.gstin;
    console.log(customerEmailInput.value)
    customerEmailInput.value = email;
    gstTreatmentInput.value = gstTreatment;
    gstNumberInput.value = gstNumber;

  });
</script>


{% endblock %}